<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>eBPF: The Superpower of Linux Kernel</title>
    <meta name="revised" content="Wednesday, December 24th, 2025, 3:50 pm" />
    <meta property="og:updated_time" content="2025-12-24T15:50:00+08:00" />
    <meta name="keywords"
        content="eBPF, Linux Kernel, Network Security, XDP, Kprobes, 2025 Report, AI Optimization, FinOps">

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "TechArticle",
      "headline": "eBPF: The Superpower of Linux Kernel",
      "description": "2025 技术专题：深度解析 eBPF 如何重塑现代化基础设施平台，涵盖 AI 调度优化、FinOps 成本缩减及全球巨头实战案例。",
      "datePublished": "2025-12-20T08:00:00+08:00",
      "dateModified": "2025-12-24T15:50:00+08:00",
      "proficiencyLevel": "Expert",
      "author": {
        "@type": "Person",
        "name": "Weibo Rao"
      }
    }
    </script>
    <style>
        /* --- CSS Variables & Cisco Color Palette --- */
        :root {
            --cisco-blue: #049FD9;
            --cisco-dark-blue: #1D2729;
            --cisco-midnight: #0D274D;
            --cisco-sky-blue: #6ABF4B;
            --cisco-green: #6CC24A;
            --cisco-red: #E2231A;
            --cisco-orange: #FF9E1B;
            --cisco-gray: #F2F2F2;
            --cisco-light-gray: #E8E8E8;
            --text-main: #333333;
            --text-light: #FFFFFF;
            --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            --card-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
            --transition: all 0.3s ease;
            /* 增强呼吸感的间距变量 */
            --section-padding: 120px;
        }

        /* --- Reset & Base --- */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: var(--font-family);
            color: var(--text-main);
            background-color: #ffffff;
            line-height: 1.6;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased; /* 新增：iOS 字体平滑 */
        }

        /* --- Components --- */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            width: 100%;
        }

        .btn {
            display: inline-block;
            padding: 12px 28px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
            transition: var(--transition);
            cursor: pointer;
            border: none;
            font-size: 1rem;
        }

        .btn-primary {
            background-color: var(--cisco-blue);
            color: white;
            box-shadow: 0 4px 6px rgba(4, 159, 217, 0.3);
        }

        .btn-primary:hover {
            background-color: #0380ae;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(4, 159, 217, 0.4);
        }

        .card {
            background: white;
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            padding: clamp(20px, 5%, 40px);
            margin-bottom: 20px;
            border-top: 4px solid var(--cisco-blue);
            transition: var(--transition);
            width: 100%;
            word-wrap: break-word;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        /* Winston 原则：显著性呼吁框 (Salience Callout) */
        .winston-callout {
            background: rgba(4, 159, 217, 0.05);
            border-left: 5px solid var(--cisco-blue);
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
            font-weight: 500;
            color: var(--cisco-midnight);
        }

        .winston-callout strong {
            color: var(--cisco-blue);
            text-transform: uppercase;
            font-size: 0.85rem;
            display: block;
            margin-bottom: 5px;
        }

        /* --- Header --- */
        header {
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            position: sticky;
            top: 0;
            z-index: 1000;
            padding: 15px 0;
        }

        .nav-wrapper {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--cisco-dark-blue);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo svg {
            height: 28px;
            width: auto;
        }

        .lang-switch {
            background: var(--cisco-gray);
            border-radius: 20px;
            padding: 4px;
            display: flex;
            font-size: 0.85rem;
        }

        .lang-btn {
            padding: 6px 14px;
            border-radius: 16px;
            cursor: pointer;
            color: #666;
            font-weight: 600;
            transition: all 0.2s;
        }

        .lang-btn.active {
            background: white;
            color: var(--cisco-blue);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        /* --- Hero Section --- */
        .hero {
            background: linear-gradient(135deg, var(--cisco-dark-blue) 0%, #0D274D 100%);
            color: white;
            padding: 100px 0 140px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: -50px;
            right: -50px;
            width: 300px;
            height: 300px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(4, 159, 217, 0.2) 0%, rgba(0, 0, 0, 0) 70%);
            z-index: 0;
        }

        .hero-content {
            position: relative;
            z-index: 1;
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 24px;
            font-weight: 300;
            letter-spacing: -1px;
        }

        .hero h1 strong {
            font-weight: 800;
            display: block;
            color: var(--cisco-blue);
            margin-top: 10px;
        }

        .hero p {
            font-size: 1.25rem;
            opacity: 0.9;
            max-width: 700px;
            margin: 0 auto 40px;
            font-weight: 300;
        }

        /* --- Sections General --- */
        section {
            padding: var(--section-padding) 0;
        }

        .section-title {
            text-align: center;
            font-size: 2.2rem;
            color: var(--cisco-dark-blue);
            margin-bottom: 60px;
            font-weight: 700;
            position: relative;
        }

        .section-title::after {
            content: '';
            display: block;
            width: 60px;
            height: 4px;
            background: var(--cisco-blue);
            margin: 20px auto 0;
            border-radius: 2px;
        }

        .golden-badge {
            display: inline-block;
            padding: 4px 12px;
            background: var(--cisco-blue);
            color: white;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: bold;
            margin-bottom: 15px;
            text-transform: uppercase;
        }

        /* --- Grid Layouts --- */
        .grid-3 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }

        .feature-box {
            background: white;
            padding: 30px;
            border-radius: 12px;
            border: 1px solid #eee;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
        }

        .feature-box:hover {
            transform: translateY(-5px);
            border-color: var(--cisco-blue);
        }

        .feature-box svg {
            width: 48px;
            height: 48px;
            fill: var(--cisco-blue);
            margin-bottom: 20px;
        }

        /* --- Analogy Grid --- */
        .analogy-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 40px;
        }

        .analogy-item {
            text-align: center;
            height: 100%;
        }

        .analogy-icon {
            height: 140px;
            margin-bottom: 25px;
            transition: transform 0.3s;
        }

        .analogy-item:hover .analogy-icon {
            transform: scale(1.05);
        }

        .analogy-tag {
            font-family: 'Courier New', monospace;
            font-size: 0.75rem;
            color: var(--cisco-blue);
            font-weight: bold;
            text-transform: uppercase;
            display: block;
            margin-bottom: 8px;
        }

        /* --- Terminology Section --- */
        .term-group {
            margin-bottom: 60px;
        }

        .term-group-title {
            font-size: 1.6rem;
            color: var(--cisco-blue);
            border-left: 6px solid var(--cisco-blue);
            padding-left: 18px;
            margin-bottom: 30px;
            font-weight: 800;
        }

        .term-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 25px;
        }

        .term-card {
            background: #fff;
            border: 1px solid #eee;
            padding: 25px;
            border-radius: 12px;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .term-card::after {
            content: '';
            position: absolute;
            bottom: 0;
            right: 0;
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, transparent 50%, var(--cisco-blue) 50%);
            opacity: 0.05;
        }

        .term-card:hover {
            border-color: var(--cisco-blue);
            box-shadow: 0 6px 20px rgba(4, 159, 217, 0.1);
        }

        .term-card h4 {
            color: var(--cisco-midnight);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.1rem;
        }

        .term-card p {
            font-size: 0.95rem;
            color: #555;
            line-height: 1.5;
        }

        /* --- Evolution Timeline --- */
        .evolution-timeline {
            position: relative;
            max-width: 900px;
            margin: 40px auto;
            padding: 20px 0;
        }

        .evolution-timeline::before {
            content: '';
            position: absolute;
            left: 50%;
            width: 2px;
            height: 100%;
            background: linear-gradient(to bottom, transparent, var(--cisco-light-gray), transparent);
            transform: translateX(-50%);
        }

        .timeline-item {
            margin-bottom: 60px;
            position: relative;
            width: 50%;
            padding: 0 40px;
        }

        .timeline-item:nth-child(odd) {
            left: 0;
            text-align: right;
        }

        .timeline-item:nth-child(even) {
            left: 50%;
            text-align: left;
        }

        .timeline-point {
            position: absolute;
            top: 10px;
            width: 20px;
            height: 20px;
            background: var(--cisco-blue);
            border: 4px solid white;
            border-radius: 50%;
            box-shadow: 0 0 0 4px rgba(4, 159, 217, 0.2);
            z-index: 2;
        }

        .timeline-item:nth-child(odd) .timeline-point {
            right: -10px;
        }

        .timeline-item:nth-child(even) .timeline-point {
            left: -10px;
        }

        .timeline-year {
            font-weight: 900;
            color: var(--cisco-blue);
            font-size: 1.4rem;
            font-family: 'Courier New', monospace;
        }

        .timeline-content h5 {
            margin: 8px 0;
            color: var(--cisco-dark-blue);
            font-size: 1.2rem;
        }

        .timeline-content p {
            font-size: 0.9rem;
            color: #666;
        }

        /* --- Insight Card --- */
        .insight-card {
            background: #f8f9fa;
            border-left: 4px solid var(--cisco-blue);
            padding: 20px;
            margin: 30px 0;
            font-style: italic;
            color: #555;
            font-size: 1rem;
            line-height: 1.7;
        }

        /* --- Comparison Table --- */
        .comparison-wrapper {
            overflow-x: auto;
            margin: 60px 0;
            -webkit-overflow-scrolling: touch;
        }

        .comparison-table {
            width: 100%;
            min-width: 600px;
            border-collapse: collapse;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
        }

        .comparison-table th {
            background: var(--cisco-dark-blue);
            color: white;
            padding: 20px;
            text-align: left;
            font-size: 1rem;
        }

        .comparison-table td {
            padding: 20px;
            border-bottom: 1px solid #eee;
            font-size: 0.95rem;
        }

        .comparison-table tr:hover {
            background-color: #fcfcfc;
        }

        .check-icon {
            color: var(--cisco-green);
            font-weight: bold;
        }

        .cross-icon {
            color: var(--cisco-red);
            font-weight: bold;
        }

        /* --- Code Snippet Section --- */
        .code-tabs {
            background: #1e1e1e;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
            margin: 40px 0;
        }

        .tabs-header {
            display: flex;
            background: #2d2d2d;
            border-bottom: 1px solid #444;
            overflow-x: auto;
        }

        .tab-btn {
            padding: 15px 25px;
            color: #999;
            cursor: pointer;
            border: none;
            background: transparent;
            font-weight: bold;
            transition: var(--transition);
            font-size: 0.9rem;
            white-space: nowrap;
        }

        .tab-btn.active {
            color: var(--cisco-blue);
            background: #1e1e1e;
            border-bottom: 3px solid var(--cisco-blue);
        }

        .code-content {
            padding: 25px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.95rem;
            color: #d4d4d4;
            white-space: pre-wrap;
            overflow-x: auto;
            line-height: 1.6;
        }

        .code-keyword {
            color: #569cd6;
        }

        .code-string {
            color: #ce9178;
        }

        .code-comment {
            color: #6a9955;
        }

        .code-func {
            color: #dcdcaa;
        }

        /* --- Terminal Section --- */
        /* 3. 优化终端模拟器高度 */
        .terminal-wrapper {
            background: #000;
            border-radius: 8px;
            padding: 25px;
            color: #0f0;
            font-family: 'Courier New', Courier, monospace;
            height: 320px; /* 适当减小固定高度 */
            max-height: 50vh; /* 新增：最大高度不超过屏幕一半 */
            overflow-y: auto;
            -webkit-overflow-scrolling: touch; /* 新增：iOS 滚动丝滑 */
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.6);
            margin: 30px 0;
            border: 1px solid #444;
        }

        .terminal-line {
            margin-bottom: 10px;
            line-height: 1.5;
            font-size: 0.95rem;
        }

        .terminal-prompt {
            color: #fff;
            font-weight: bold;
        }

        .terminal-cursor {
            display: inline-block;
            width: 10px;
            height: 18px;
            background: #0f0;
            vertical-align: middle;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            50% {
                opacity: 0;
            }
        }

        /* --- Process Section --- */
        .process-section {
            background-color: #FAFAFA;
        }

        .process-steps {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 25px;
            position: relative;
            margin-top: 50px;
        }

        .step-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            border: 1px solid #eee;
            position: relative;
            z-index: 2;
        }

        .step-number {
            background: var(--cisco-blue);
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .step-arrow {
            position: absolute;
            top: 40px;
            right: -15px;
            z-index: 1;
            color: #ddd;
            font-size: 1.5rem;
        }

        /* --- Detail Components Section --- */
        .detail-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 30px;
            margin-top: 50px;
        }

        .hook-list {
            list-style: none;
            padding: 0;
            margin-top: 15px;
        }

        .hook-item {
            padding: 12px;
            border-bottom: 1px solid #eee;
            display: flex;
            gap: 15px;
            align-items: flex-start;
        }

        .hook-item:last-child {
            border-bottom: none;
        }

        .hook-label {
            font-weight: bold;
            color: var(--cisco-blue);
            min-width: 80px;
            font-family: 'Courier New', monospace;
        }

        .hook-desc {
            font-size: 0.9rem;
            color: #555;
        }

        /* --- Features Grid (Pillars) --- */
        .features {
            background-color: var(--cisco-dark-blue);
            color: white;
        }

        .features .section-title {
            color: white;
        }

        .pillars-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            margin-top: 50px;
        }

        @media (max-width: 1024px) {
            .pillars-grid {
                grid-template-columns: 1fr;
            }
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.04);
            padding: 40px 35px;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-top: 6px solid var(--cisco-blue);
            backdrop-filter: blur(12px);
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .feature-card:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .feature-icon-box {
            width: 75px;
            height: 75px;
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.1);
            transition: var(--transition);
        }

        .feature-card:hover .feature-icon-box {
            transform: scale(1.1) rotate(5deg);
        }

        .feature-card h3 {
            color: white;
            margin-bottom: 20px;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .feature-card p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1rem;
            line-height: 1.7;
            flex-grow: 1;
        }

        /* 修复：针对非深色背景 section 下的 feature-card 增强文字可见性 */
        section:not(.features) .feature-card h3,
        section:not(.features) .feature-card p {
            color: var(--text-main) !important;
        }

        section:not(.features) .feature-card {
            background: #fff;
            border: 1px solid #eee;
            border-top: 6px solid var(--cisco-blue);
        }

        /* --- Interactive Demo --- */
        .demo-section {
            background: #fff;
            border-top: 1px solid #eee;
        }

        .pipeline-container {
            background: var(--cisco-dark-blue);
            border-radius: 20px;
            padding: 30px;
            position: relative;
            height: 280px;
            overflow: hidden;
            margin: 40px auto;
            max-width: 1000px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: inset 0 0 80px rgba(0, 0, 0, 0.6);
        }

        .kernel-zone {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            border: 2px dashed rgba(255, 255, 255, 0.1);
            pointer-events: none;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding-bottom: 20px;
            color: rgba(255, 255, 255, 0.25);
            font-size: 1rem;
            letter-spacing: 4px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .packet {
            width: 60px;
            height: 60px;
            background: white;
            border-radius: 12px;
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
            color: var(--cisco-dark-blue);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.4);
            z-index: 10;
            transition: left 0.1s linear, opacity 0.3s;
        }

        .ebpf-program {
            width: 160px;
            height: 160px;
            background: rgba(4, 159, 217, 0.15);
            border: 2px solid var(--cisco-blue);
            border-radius: 50%;
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.9rem;
            box-shadow: 0 0 40px rgba(4, 159, 217, 0.3);
            z-index: 5;
        }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 40px;
        }

        .control-panel {
            background: #f9f9f9;
            padding: 30px;
            border-radius: 16px;
            border: 1px solid #ddd;
            margin-bottom: 20px;
            max-width: 700px;
            margin: 0 auto 30px;
            text-align: left;
        }

        /* --- Ecosystem Grid --- */
        .feature-grid-eco {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 35px;
            margin-top: 50px;
        }

        @media (max-width: 850px) {
            .feature-grid-eco {
                grid-template-columns: 1fr;
            }
        }

        /* --- Case Studies Section --- */
        .case-study-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 25px;
            margin-top: 40px;
        }

        .case-study-card {
            background: #fff;
            border: 1px solid #eee;
            border-radius: 12px;
            padding: 25px;
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .case-study-card:hover {
            border-color: var(--cisco-blue);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
        }

        .case-study-meta {
            font-weight: 800;
            color: var(--cisco-midnight);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .case-study-meta span {
            font-size: 0.7rem;
            background: var(--cisco-gray);
            padding: 2px 8px;
            border-radius: 4px;
            text-transform: uppercase;
        }

        /* --- Footer --- */
        /* 4. 适配 iPhone 底部安全区 */
        footer {
            background: var(--cisco-dark-blue);
            color: white;
            text-align: center;
            padding: 80px 0 calc(80px + env(safe-area-inset-bottom)); /* 优化：适配底部横条 */
            font-size: 0.95rem;
            border-top: 6px solid var(--cisco-blue);
        }

        /* --- Utilities --- */
        .hidden {
            display: none !important;
        }

        .text-cisco-blue {
            color: var(--cisco-blue);
        }

        .text-bold {
            font-weight: 700;
        }

        /* --- New Diagram Styles --- */
        .diagram-container {
            display: flex;
            justify-content: center;
            margin: 40px 0;
            background: #fff;
            padding: 20px;
            border-radius: 12px;
            box-shadow: var(--card-shadow);
        }

        .arch-svg {
            max-width: 100%;
            height: auto;
        }

        /* --- Responsive Tweaks for iPhone --- */
        @media (max-width: 768px) {
            :root {
                --section-padding: 60px;
            }

            .hero h1 {
                font-size: 2.2rem;
            }

            .hero p {
                font-size: 1.1rem;
            }

            .section-title {
                font-size: 1.8rem;
                margin-bottom: 40px;
            }

            /* 重点：运行流程卡片在手机端竖向排列 */
            .process-steps {
                grid-template-columns: 1fr;
                gap: 40px;
            }

            .step-arrow {
                display: none;
            }

            .step-card {
                border-top: 4px solid var(--cisco-blue);
            }

            .step-card[style*="border-top-color"] {
                border-top-width: 4px !important;
            }

            .detail-grid {
                grid-template-columns: 1fr;
            }

            .evolution-timeline::before {
                left: 20px;
            }

            .timeline-item {
                width: 100%;
                text-align: left !important;
                padding-left: 45px;
            }

            .timeline-point {
                left: 11px !important;
            }

            .pipeline-container {
                height: 200px;
                padding: 15px;
            }

            .ebpf-program {
                width: 120px;
                height: 120px;
            }

            /* 修正 Isovalent 卡片溢出 */
            .isovalent-main-card {
                padding: 20px !important;
                width: 100% !important;
                box-sizing: border-box !important;
            }

            .isovalent-header-box {
                flex-direction: column;
                text-align: center;
                gap: 15px !important;
            }

            .isovalent-header-box h3 {
                font-size: 1.5rem !important;
            }
        }

        /* 新增：检查站标签样式 */
        .checkpoint-tag {
            position: absolute;
            bottom: -25px;
            font-size: 0.7rem;
            font-weight: bold;
            color: var(--cisco-blue);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* 仪表盘样式：模拟赛车性能监控界面 */
        .map-dashboard {
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid var(--cisco-blue);
            border-radius: 8px;
            padding: 15px;
            width: 220px;
            color: var(--cisco-blue);
            font-family: 'Courier New', monospace;
            box-shadow: 0 0 15px rgba(4, 159, 217, 0.3);
        }

        .map-title {
            font-size: 0.75rem;
            color: #fff;
            border-bottom: 1px solid #444;
            padding-bottom: 5px;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .map-stat {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }

        .stat-value {
            color: var(--cisco-green);
            font-weight: bold;
        }

        .stat-value.alert {
            color: var(--cisco-red);
            animation: flash 0.5s ease;
        }

        @keyframes flash {
            50% {
                opacity: 0.3;
            }
        }

        .report-highlight {
            background: #f8f9fa;
            border-radius: 16px;
            padding: 40px;
            margin: 60px 0;
            border: 1px solid var(--cisco-blue);
        }

        .metric-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .metric-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            box-shadow: var(--card-shadow);
        }

        .metric-card .value {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--cisco-blue);
            display: block;
        }
    </style>
</head>

<body>

    <!-- Header -->
    <header>
        <div class="container nav-wrapper">
            <div class="logo">
                <svg viewBox="0 0 64 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect width="64" height="32" rx="4" fill="white" />
                    <path d="M14 24V16" stroke="#049FD9" stroke-width="3" stroke-linecap="round" />
                    <path d="M22 24V10" stroke="#049FD9" stroke-width="3" stroke-linecap="round" />
                    <path d="M30 24V14" stroke="#049FD9" stroke-width="3" stroke-linecap="round" />
                    <path d="M38 24V8" stroke="#049FD9" stroke-width="3" stroke-linecap="round" />
                    <path d="M46 24V14" stroke="#049FD9" stroke-width="3" stroke-linecap="round" />
                    <path d="M54 24V19" stroke="#049FD9" stroke-width="3" stroke-linecap="round" />
                </svg>
                <span>Security Architect View</span>
            </div>
            <div class="lang-switch">
                <div class="lang-btn active" onclick="setLang('zh')">中文</div>
                <div class="lang-btn" onclick="setLang('en')">EN</div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container hero-content">
            <h1 class="lang-zh">eBPF<br><strong>Linux 内核的超能力</strong></h1>
            <h1 class="lang-en hidden">eBPF<br><strong>The Superpower of Linux Kernel</strong></h1>

            <p class="lang-zh">无需重启，无需修改源码，让操作系统即刻拥有全新的安全、网络与可观测能力。<br>这不仅仅是技术升级，这是基础设施的范式转移。</p>
            <p class="lang-en hidden">Instantly grant the OS new security, networking, and observability capabilities
                without restarting or modifying the source code.<br>It's not just an upgrade; it's a paradigm shift for
                infrastructure.</p>

            <button class="btn btn-primary lang-zh" onclick="scrollToDemo()">体验交互 Demo</button>
            <button class="btn btn-primary lang-en hidden" onclick="scrollToDemo()">Try Interactive Demo</button>
            <div class="hero-evidence-bar" style="display: flex; justify-content: center; gap: 30px; margin-top: 50px; flex-wrap: wrap;">
                <div class="evidence-item" style="text-align: left; border-left: 3px solid var(--cisco-blue); padding-left: 15px;">
                    <span style="display: block; font-size: 1.8rem; font-weight: 800; color: var(--cisco-blue);">4X</span>
                    <span style="font-size: 0.8rem; opacity: 0.8; text-transform: uppercase;">网络包处理吞吐量提升</span>
                </div>
                <div class="evidence-item" style="text-align: left; border-left: 3px solid var(--cisco-green); padding-left: 15px;">
                    <span style="display: block; font-size: 1.8rem; font-weight: 800; color: var(--cisco-green);">&lt;2%</span>
                    <span style="font-size: 0.8rem; opacity: 0.8; text-transform: uppercase;">极致传感器 CPU 开销</span>
                </div>
                <div class="evidence-item" style="text-align: left; border-left: 3px solid var(--cisco-orange); padding-left: 15px;">
                    <span style="display: block; font-size: 1.8rem; font-weight: 800; color: var(--cisco-orange);">Zero</span>
                    <span style="font-size: 0.8rem; opacity: 0.8; text-transform: uppercase;">代码侵入式安全观测</span>
                </div>
            </div>
            <!-- Winston 原则：The Promise (核心承诺) -->
            <div class="winston-callout lang-zh"
                style="max-width: 600px; margin: 40px auto 0; text-align: left; background: rgba(255,255,255,0.1); color: white; border-left-color: var(--cisco-blue);">
                <strong>核心承诺 / THE PROMISE</strong>
                阅读本文，您将掌握如何利用 eBPF 将原本黑盒的 Linux 内核变为可编程、透明且绝对安全的智能底座。
            </div>

            <div class="hero-graphic" style="margin-top: 60px;">
                <svg width="280" height="200" viewBox="0 0 200 150" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="30" y="20" width="140" height="110" rx="12" fill="rgba(255,255,255,0.05)" stroke="white"
                        stroke-width="1.5" />
                    <circle cx="100" cy="75" r="30" fill="#049FD9" fill-opacity="0.9">
                        <animate attributeName="r" values="30;34;30" dur="2s" repeatCount="indefinite" />
                        <animate attributeName="fill-opacity" values="0.9;0.5;0.9" dur="2s" repeatCount="indefinite" />
                    </circle>
                    <path d="M100 75L30 20" stroke="#6CC24A" stroke-width="2" stroke-dasharray="6 6" />
                    <path d="M100 75L170 20" stroke="#6CC24A" stroke-width="2" stroke-dasharray="6 6" />
                    <path d="M100 75L30 130" stroke="#6CC24A" stroke-width="2" stroke-dasharray="6 6" />
                    <path d="M100 75L170 130" stroke="#6CC24A" stroke-width="2" stroke-dasharray="6 6" />
                    <text x="100" y="80" text-anchor="middle" fill="white" font-size="11" font-family="sans-serif"
                        font-weight="900" letter-spacing="2">KERNEL</text>
                </svg>
            </div>
        </div>
    </section>

    <!-- Analogy & Why Section -->
    <section class="container">
        <span class="golden-badge lang-zh">核心痛点 / WHY</span>
        <span class="golden-badge lang-en hidden">PAIN POINTS / WHY</span>
        <h2 class="section-title lang-zh">为什么要引入 eBPF？</h2>
        <h2 class="section-title lang-en hidden">Why eBPF?</h2>

        <!-- Winston 原则：The Bottom Line (标语化结论) -->
        <div class="winston-callout lang-zh">
            <strong>核心洞察 / THE BOTTOM LINE</strong>
            eBPF 终结了“内核开发以年为单位”的历史，开启了“内核创新以秒为单位”的新纪元。
        </div>

        <p class="lang-zh" style="text-align: center; max-width: 850px; margin: -20px auto 40px;">Linux
            内核是现代基础架构的基石，但其作为“共享资源”的特性，导致了<strong>稳定性与创新速度</strong>之间的剧烈冲突。传统上，在内核中实现新功能面临着难以逾越的障碍：</p>
        <p class="lang-en hidden" style="text-align: center; max-width: 850px; margin: -20px auto 40px;">The Linux
            kernel is the bedrock of modern infrastructure, but its nature as a "shared resource" creates a sharp
            conflict between <strong>stability and the pace of innovation</strong>. Historically, implementing new
            features in the kernel faced insurmountable obstacles:</p>

        <!-- Technical Pain Points Grid -->
        <div class="grid-3">
            <div class="feature-box">
                <svg viewBox="0 0 24 24">
                    <path d="M13,9V3.5L18.5,9M6,2c-1.11,0-2,0.89-2,2v16a2,2 0 0,0,2,2h12a2,2 0 0,0,2-2V8L14,2H6Z" />
                </svg>
                <h3 class="lang-zh">修改内核源码</h3>
                <h3 class="lang-en hidden">Kernel Source</h3>
                <p class="lang-zh"><strong>时间鸿沟：</strong>一个新特性从提交社区到最终进入企业发行版，往往需要 <strong>3-5
                        年</strong>。这无法满足现代云原生极速演进的需求。</p>
                <p class="lang-en hidden"><strong>The Time Gap:</strong> It takes <strong>3-5 years</strong> for a new
                    feature to move from upstream to enterprise distributions, failing modern cloud-native agility.</p>
            </div>
            <div class="feature-box">
                <svg viewBox="0 0 24 24">
                    <path
                        d="M21,16.5C21,16.88 20.79,17.21 20.47,17.38L12.57,21.82C12.41,21.94 12.21,22 12,22C11.79,22 11.59,21.94 11.43,21.82L3.53,17.38C3.21,17.21 3,16.88 3,16.5V7.5C3,7.12 3.21,6.79 3.53,6.62L11.43,2.18C11.59,2.06 11.79,2 12,2C12.21,2 12.41,2.06 12.57,2.18L20.47,6.62C20.79,6.79 21,7.12 21,7.5V16.5Z" />
                </svg>
                <h3 class="lang-zh">内核模块 (LKM)</h3>
                <h3 class="lang-en hidden">Kernel Modules</h3>
                <p class="lang-zh"><strong>安全困境：</strong>内核模块缺乏保护边界。代码中一个小小的空指针引用就会触发 <strong>Kernel
                        Panic</strong>，导致整机甚至整个集群节点的崩溃。</p>
                <p class="lang-en hidden"><strong>The Safety Dilemma:</strong> Modules lack protection boundaries. A
                    tiny null pointer can trigger a <strong>Kernel Panic</strong>, crashing the entire host.</p>
            </div>
            <div class="feature-box" style="background: #e1f5fe; border: 2px solid var(--cisco-blue);">
                <svg viewBox="0 0 24 24" style="fill: var(--cisco-blue);">
                    <path d="M12,2L4.5,20.29L5.21,21L12,18L18.79,21L19.5,20.29L12,2Z" />
                </svg>
                <h3 class="lang-zh">eBPF 革命性方案</h3>
                <h3 class="lang-en hidden">eBPF Revolution</h3>
                <p class="lang-zh"><strong>解耦与安全：</strong>通过沙盒机制在运行时动态加载程序。它提供了<strong>原生性能</strong>，同时由内核验证器保证绝不引发系统崩溃。
                </p>
                <p class="lang-en hidden"><strong>Decoupling & Safety:</strong> Dynamically loads programs via
                    sandboxing. It offers <strong>native performance</strong> guaranteed by a kernel verifier.</p>
            </div>
        </div>

        <h3 class="lang-zh"
            style="margin-top: 60px; margin-bottom: 20px; color: var(--cisco-midnight); font-size: 1.6rem; text-align: center;">
            深度对比：为什么 eBPF 是最终答案？</h3>
        <h3 class="lang-en hidden"
            style="margin-top: 60px; margin-bottom: 20px; color: var(--cisco-midnight); font-size: 1.6rem; text-align: center;">
            Deep Comparison: Why eBPF is the Ultimate Answer?</h3>

        <div class="comparison-wrapper">
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th class="lang-zh">维度 / Dimension</th>
                        <th class="lang-zh">传统方式 (LKM / Upstream)</th>
                        <th class="lang-zh">eBPF 模式</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="lang-zh">交付速度</td>
                        <td class="lang-zh"><span class="cross-icon">✗</span> 以“年”为单位</td>
                        <td class="lang-zh"><span class="check-icon">✓</span> 以“秒”为单位 (即时加载)</td>
                    </tr>
                    <tr>
                        <td class="lang-zh">安全性</td>
                        <td class="lang-zh"><span class="cross-icon">✗</span> 高风险 (Panic 隐患)</td>
                        <td class="lang-zh"><span class="check-icon">✓</span> 极高 (验证器强校验)</td>
                    </tr>
                    <tr>
                        <td class="lang-zh">系统重启</td>
                        <td class="lang-zh"><span class="cross-icon">✗</span> 通常需要重启内核</td>
                        <td class="lang-zh"><span class="check-icon">✓</span> 无需重启，热插拔</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="analogy-grid" style="margin-top: 80px;">
            <div class="card analogy-item">
                <div class="analogy-icon">
                    <svg viewBox="0 0 100 80" height="100%" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M20 60 L80 60" stroke="#333" stroke-width="3" />
                        <rect x="35" y="20" width="30" height="30" rx="4" fill="var(--cisco-blue)" fill-opacity="0.2"
                            stroke="var(--cisco-blue)" stroke-width="2" />
                        <path d="M50 15 V25 M45 20 H55" stroke="var(--cisco-blue)" stroke-width="2" />
                        <circle cx="20" cy="60" r="5" fill="#333" />
                        <circle cx="80" cy="60" r="5" fill="#333" />
                    </svg>
                </div>
                <span class="analogy-tag">Hot-Swapping</span>
                <h3 class="lang-zh">不停车的引擎热升级</h3>
                <p class="lang-zh" style="margin-top:10px; color:#666; font-size: 0.9rem;">
                    <strong>技术本质：</strong>eBPF 实现了内核逻辑的动态载入与即时卸载，无需重新编译内核或重启系统。<br><br>
                    <strong>类比：</strong>传统内核修改像是在车间拆解引擎进行静态维修；eBPF 就像给正在赛道上疾驰的赛车实时刷写 ECU（引擎控制单元）固件，实现性能的无缝增强。
                </p>
            </div>

            <div class="card analogy-item">
                <div class="analogy-icon">
                    <svg viewBox="0 0 100 80" height="100%" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="50" cy="40" r="30" stroke="#333" stroke-width="2" />
                        <path d="M50 40 L70 30" stroke="var(--cisco-blue)" stroke-width="3" />
                        <rect x="20" y="65" width="60" height="10" rx="2" fill="var(--cisco-blue)" fill-opacity="0.1" />
                        <circle cx="50" cy="40" r="5" fill="#333" />
                    </svg>
                </div>
                <span class="analogy-tag">Real-time Telemetry</span>
                <h3 class="lang-zh">全栈引擎遥测系统</h3>
                <p class="lang-zh" style="margin-top:10px; color:#666; font-size: 0.9rem;">
                    <strong>技术本质：</strong>eBPF 能够无损地捕获内核态的细微事件，提供从网络协议栈到系统调用的全视角视图。<br><br>
                    <strong>类比：</strong>它就像是在引擎的每一个活塞、气门上安插了高频传感器。它能穿透黑暗，将复杂的运行数据转化成仪表盘上的实时指标。
                </p>
            </div>

            <div class="card analogy-item">
                <div class="analogy-icon">
                    <svg viewBox="0 0 100 80" height="100%" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect x="25" y="15" width="50" height="50" rx="25" fill="rgba(108, 194, 74, 0.1)"
                            stroke="var(--cisco-green)" stroke-width="2" />
                        <path d="M40 40 L48 48 L60 35" stroke="var(--cisco-green)" stroke-width="4"
                            stroke-linecap="round" />
                    </svg>
                </div>
                <span class="analogy-tag">Virtual Simulation</span>
                <h3 class="lang-zh">智能驾驶防爆系统</h3>
                <p class="lang-zh" style="margin-top:10px; color:#666; font-size: 0.9rem;">
                    <strong>技术本质：</strong>通过验证器（Verifier）进行静态指令分析，严格限制内存访问，确保程序绝不破坏内核稳定性。<br><br>
                    <strong>类比：</strong>eBPF 代码就像一套自动驾驶指令。在下发给引擎前，系统会进行“虚拟试驾”，确保这些指令不会导致引擎爆缸或系统失控。
                </p>
            </div>
        </div>
    </section>

    <!-- 基础概念与心理模型 -->
    <section style="background: #ffffff; border-top: 1px solid #eee;">
        <div class="container">
            <span class="golden-badge lang-zh">基础认知 / FOUNDATION</span>
            <span class="golden-badge lang-en hidden">CORE CONCEPTS</span>
            <h2 class="section-title lang-zh">Linux 的运行边界：理解 User Space 与 Kernel Space</h2>
            <h2 class="section-title lang-en hidden">The Linux Boundaries</h2>

            <!-- Winston 原则：显著性呼吁框 (The Bottom Line) -->
            <div class="winston-callout lang-zh">
                <strong>核心洞察 / THE BOTTOM LINE</strong>
                理解 eBPF 的前提是意识到：Linux 内核是一个被严格保护的“禁区”，而 eBPF 是目前唯一能安全进入该禁区的通行证。
            </div>
            <div class="symbol-container" style="background: #f8f9fa; padding: 40px; border-radius: 20px; text-align: center; margin: 40px 0;">
                <h4 style="margin-bottom: 30px; color: var(--cisco-midnight);">eBPF 权限沙盒模型：安全与力量的平衡</h4>
                <svg width="100%" max-width="500" height="300" viewBox="0 0 500 300" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="250" cy="150" r="130" stroke="#ddd" stroke-width="2" stroke-dasharray="5 5" />
                    <text x="250" y="45" text-anchor="middle" fill="#999" font-size="12">USER SPACE (受限区域)</text>
                    
                    <rect x="50" y="100" width="400" height="180" rx="10" fill="rgba(29, 39, 41, 0.05)" />
                    <text x="250" y="270" text-anchor="middle" fill="#1D2729" font-weight="bold">KERNEL SPACE (高权禁区)</text>
                    
                    <rect x="150" y="120" width="200" height="100" rx="8" fill="white" stroke="var(--cisco-blue)" stroke-width="3" />
                    <text x="250" y="155" text-anchor="middle" fill="var(--cisco-blue)" font-weight="900" font-size="16">eBPF SANDBOX</text>
                    <text x="250" y="180" text-anchor="middle" fill="#666" font-size="11">Verifier 强校验 | JIT 加速</text>
                    
                    <path d="M250 80 V120" stroke="var(--cisco-red)" stroke-width="2" marker-end="url(#arrow-red)" />
                    <circle cx="250" cy="100" r="15" fill="var(--cisco-red)" />
                    <text x="275" y="105" fill="var(--cisco-red)" font-size="10" font-weight="bold">VERIFIER (安全闸门)</text>
                    
                    <defs>
                        <marker id="arrow-red" markerWidth="10" markerHeight="10" refX="9" refY="5" orient="auto">
                            <path d="M0 0 L10 5 L0 10 Z" fill="var(--cisco-red)" />
                        </marker>
                    </defs>
                </svg>
                <p style="font-size: 0.9rem; color: #666; margin-top: 20px;">eBPF 提供了一个“受控的特权通道”，让代码既能触达核心数据，又不会破坏引擎稳定性。</p>
            </div>
            <div class="detail-grid">
                <div class="card" style="border-top-color: var(--cisco-midnight);">
                    <h4 class="lang-zh">Linux Kernel (操作系统的核心引擎)</h4>
                    <p class="lang-zh" style="font-size: 0.95rem; margin-top: 10px;">
                        <strong>定义：</strong>OS 的核心子系统，负责管理硬件、内存分配、进程调度及网络协议栈。它是具备最高特权的软件层。<br><br>
                        <strong>类比：</strong>它是车辆的动力核心。直接修改它需要“停机熄火”，而 eBPF 则为这个引擎提供了无需关盖即可插入的“数字化控制插件”。
                    </p>
                </div>

                <div class="card" style="border-top-color: var(--cisco-midnight);">
                    <h4 class="lang-zh">User Space vs Kernel Space (安全边界)</h4>
                    <p class="lang-zh" style="font-size: 0.95rem; margin-top: 10px;">
                        <strong>定义：</strong>现代操作系统实现的两种运行级别。用户态（Ring 3）受限运行，内核态（Ring 0）拥有完全控制权。<br><br>
                        <strong>类比：</strong>用户空间是安全的驾驶舱，乘客（应用）不能碰引擎；内核空间是布满管线的引擎室。eBPF 实现了在驾驶舱内，安全地将指令送入引擎室。
                    </p>
                </div>

                <div class="card" style="border-top-color: var(--cisco-red);">
                    <h4 class="lang-zh">内核模块 (LKM) 的安全困境</h4>
                    <p class="lang-zh" style="font-size: 0.95rem; margin-top: 10px;">
                        <strong>定义：</strong>Loadable Kernel Module 是一种在运行时加载到内核空间的二进制对象，它与核心引擎共享完全相同的内存寻址空间。<br><br>
                        <strong>风险本质：</strong>由于缺乏指令级校验，LKM 的错误会直接引发 <strong>Kernel
                            Panic</strong>。这就像在引擎运转时尝试手动更换活塞，一旦出错即是毁坏性的全机停摆。
                    </p>
                </div>

                <div class="card" style="border-top-color: var(--cisco-orange);">
                    <h4 class="lang-zh">System Call (系统门铃)</h4>
                    <p class="lang-zh" style="font-size: 0.95rem; margin-top: 10px;">
                        <strong>定义：</strong>用户态程序请求内核服务的标准编程接口。它是跨越权限边界的唯一合法通道。<br><br>
                        <strong>类比：</strong>它是驾驶舱内的各种踏板与旋钮。当你想加速（读取文件）或转向（发送包）时，必须通过这些标准接口发出请求。
                    </p>
                </div>

                <div class="card" style="border-top-color: var(--cisco-blue);">
                    <h4 class="lang-zh">eBPF 沙盒：虚拟化保护层</h4>
                    <p class="lang-zh" style="font-size: 0.95rem; margin-top: 10px;">
                        <strong>定义：</strong>eBPF 程序运行在内核态虚拟机中，通过 <strong>Verifier（验证器）</strong> 对字节码进行 DAG
                        分析，确保内存安全且不含死循环。<br><br>
                        <strong>类比：</strong>它像是一套智能防错系统，在任何不安全的代码下发给引擎前将其拦截在“虚拟试车台”中，确保核心底座的绝对稳定。
                    </p>
                </div>

                <div class="card" style="border-top-color: var(--cisco-green);">
                    <h4 class="lang-zh">Hook (内核检查站)</h4>
                    <p class="lang-zh" style="font-size: 0.95rem; margin-top: 10px;">
                        <strong>定义：</strong>Hook 是一种事件驱动的触发机制，它在内核关键处理路径（如网络入站、进程创建）中预置了探测桩点。<br><br>
                        <strong>类比：</strong>它是高速公路网上的“感应检查站”。当车辆（数据流）经过特定卡口时，检查站瞬间激活，驻点检查员（eBPF 程序）在不停车的情况下完成审计或拦截。
                    </p>
                </div>
                <div class="card" style="border-top-color: var(--cisco-red); background: rgba(226, 35, 26, 0.02);">
                    <h4 class="lang-zh">后 CrowdStrike 时代的安全准则</h4>
                    <p class="lang-zh" style="font-size: 0.95rem; margin-top: 10px;">
                        <strong>行业背景：</strong>2024 年的大规模故障证明，传统驱动在内核态的“手滑”代价是全球性的。eBPF
                        是目前唯一能让安全工具既拥有内核级权限，又具备<strong>崩溃豁免权</strong>的方案。<br><br>
                        <strong>核心区别：</strong>传统方案是“直接运行二进制”，而 eBPF 是“通过安全法院（Verifier）审判后再执行”。
                    </p>
                </div>
            </div>
            <div class="insight-card" style="margin-top: 40px; border-left-color: var(--cisco-orange);">
                <span class="lang-zh">
                    <strong>架构师思维点拨：</strong> 为什么我们说 eBPF 是“数字化控制插件”？<br>
                    传统的 LKM 像是直接改动引擎的齿轮咬合；而 eBPF 是在引擎内部定义了一套“虚拟控制链路”。虽然它是软件代码，但它直接控制 CPU
                    寄存器和网卡中断，其执行逻辑在物理层面上与原生内核函数具有<strong>同等的原子性与确定性</strong>。
                </span>
            </div>
            <h2 class="section-title lang-zh" style="margin-top: 80px;">心理模型：为什么把 eBPF 类比成 JavaScript？</h2>
            <h2 class="section-title lang-en hidden" style="margin-top: 80px;">Mental Model: eBPF as the JS of Kernel
            </h2>

            <div class="pillars-grid">
                <!-- Event-Driven -->
                <div class="feature-card" style="border-top-color: var(--cisco-midnight);">
                    <div class="feature-icon-box" style="background: rgba(29, 39, 41, 0.1);">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="var(--cisco-midnight)"
                            stroke-width="2">
                            <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" />
                        </svg>
                    </div>
                    <h3 class="lang-zh">事件驱动 (Event-Driven)</h3>
                    <p class="lang-zh">如同 JS 响应点击事件，eBPF 程序由内核钩子（Hooks）触发。当系统调用发生、网络包到达或函数进入时，相应的 eBPF 程序就会被精准激活并执行。</p>
                </div>
                <!-- Sandboxed -->
                <div class="feature-card" style="border-top-color: var(--cisco-blue);">
                    <div class="feature-icon-box" style="background: rgba(4, 159, 217, 0.1);">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="var(--cisco-blue)"
                            stroke-width="2">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2" />
                            <path d="M7 11V7a5 5 0 0 1 10 0v4" />
                        </svg>
                    </div>
                    <h3 class="lang-zh">沙盒运行 (Sandboxed)</h3>
                    <p class="lang-zh">正如浏览器确保 JS 无法直接危害您的电脑，eBPF 在加载前必须通过“验证器”的严审，确保代码绝对安全、不含死循环且不非法越界访问，为内核提供基石般的保障。
                    </p>
                </div>
                <!-- Dynamic Extension -->
                <div class="feature-card" style="border-top-color: var(--cisco-green);">
                    <div class="feature-icon-box" style="background: rgba(108, 194, 74, 0.1);">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="var(--cisco-green)"
                            stroke-width="2">
                            <path
                                d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z" />
                        </svg>
                    </div>
                    <h3 class="lang-zh">动态扩展 (Dynamic Extension)</h3>
                    <p class="lang-zh">JS 让静态网页变全功能 App，eBPF 让静态内核变可编程底座。开发者可以实时为运行中的内核热加载新功能，将基础设施的演进周期从数年缩短至数秒。</p>
                </div>
            </div>
            <div class="winston-callout lang-zh"
                style="margin-top: 60px; border-left-color: var(--cisco-orange); background: rgba(255, 158, 27, 0.05);">
                <strong>架构逻辑桥梁 / THE ARCHITECTURAL BRIDGE</strong>
                既然我们理解了“不停车升级引擎”的概念，那么在 Linux 的二进制世界里，这一切是如何实现的？接下来的术语百科将为您揭开支撑这套“数字化控制插件”的底层硬核组件。
            </div>
        </div>

    </section>

    <!-- Terminology Section -->
    <section style="background: #fdfdfd; border-top: 1px solid #eee;">
        <div class="container">
            <span class="golden-badge lang-zh">术语百科 / KNOWLEDGE BASE</span>
            <span class="golden-badge lang-en hidden">THE DICTIONARY</span>
            <h2 class="section-title lang-zh">eBPF 核心术语百科</h2>
            <h2 class="section-title lang-en hidden">The eBPF Dictionary</h2>

            <!-- Winston 原则：Mental Model (建立心理模型) -->
            <div class="winston-callout lang-zh">
                <strong>核心价值 / CORE VALUE</strong>
                掌握了 JIT、CO-RE 和 BTF，您就掌握了 eBPF 实现工业级高性能与兼容性的底层密码。
            </div>

            <div class="term-group">
                <h3 class="term-group-title lang-zh">1. 内核虚拟化与执行基石</h3>
                <h3 class="term-group-title lang-en hidden">1. Kernel Runtime Foundation</h3>
                <div class="term-grid">
                    <div class="term-card">
                        <h4 class="lang-zh">JIT (Just-In-Time)</h4>
                        <h4 class="lang-en hidden">JIT Compilation</h4>
                        <p class="lang-zh">即时编译器。它是 eBPF 性能的加速器，将中间字节码在加载时瞬间转化为 CPU 原生指令，让 eBPF 的执行效率与静态编译的内核代码几乎没有差别。
                        </p>
                        <p class="lang-en hidden">Converts eBPF bytecode to native CPU instructions at load time,
                            achieving near-native execution speed.</p>
                    </div>
                    <div class="term-card">
                        <h4 class="lang-zh">CO-RE (Compile Once – Run Everywhere)</h4>
                        <h4 class="lang-en hidden">CO-RE</h4>
                        <p class="lang-zh">eBPF 的“工业化”关键。通过 BTF 记录内核类型信息，允许程序在不同的 Linux 内核版本之间无缝迁移，解决了“一个版本编译一次”的痛点。</p>
                        <p class="lang-en hidden">Enables portability across different kernel versions by mapping type
                            info via BTF at load time.</p>
                    </div>
                    <div class="term-card">
                        <h4 class="lang-zh">BTF (BPF Type Format)</h4>
                        <h4 class="lang-en hidden">BTF</h4>
                        <p class="lang-zh">一种元数据格式，记录了内核数据结构的完整定义。它是 eBPF 程序能够理解内核“内部对话”的翻译手册，也是实现 CO-RE 的基础。</p>
                        <p class="lang-en hidden">Compact metadata format for kernel types, providing debug info for BPF
                            programs and CO-RE.</p>
                    </div>
                </div>
            </div>

            <div class="term-group">
                <h3 class="term-group-title lang-zh">2. 核心架构交互组件</h3>
                <h3 class="term-group-title lang-en hidden">2. Architecture Components</h3>
                <div class="term-grid">
                    <div class="term-card">
                        <h4 class="lang-zh">Verifier (验证器)</h4>
                        <h4 class="lang-en hidden">Verifier</h4>
                        <p class="lang-zh">eBPF 的“安全闸门”。它通过模拟执行来分析代码的状态机，确保程序没有死循环、不访问越界内存、不破坏内核完整性，是 eBPF 安全性的终极保障。</p>
                        <p class="lang-en hidden">Static analyzer that simulates program execution to guarantee safety,
                            blocking infinite loops and illegal memory access.</p>
                    </div>
                    <div class="term-card">
                        <h4 class="lang-zh">BPF Maps (共享内存)</h4>
                        <h4 class="lang-en hidden">BPF Maps</h4>
                        <p class="lang-zh">内核与用户态之间的“高速公路”。eBPF 程序通过这种键值对存储方式，将捕获的数据传递给用户态分析工具，或接收用户态下发的配置指令。</p>
                        <p class="lang-en hidden">Highly efficient shared memory (key-value) between kernel and
                            userspace for data persistence and communication.</p>
                    </div>
                    <div class="term-card">
                        <h4 class="lang-zh">Helper Functions</h4>
                        <h4 class="lang-en hidden">Helper Functions</h4>
                        <p class="lang-zh">内核为 eBPF 程序开放的安全接口。由于程序不能直接调用内核私有函数，Helper 提供了获取时间、读写 Map、生成日志等受控的受限能力。</p>
                        <p class="lang-en hidden">Standardized, stable kernel APIs for eBPF programs to interact with
                            the kernel safely.</p>
                    </div>
                </div>
            </div>
            <div class="term-group">
                <h3 class="term-group-title lang-zh">3. 核心挂钩与追踪机制</h3>
                <h3 class="term-group-title lang-en hidden">3. Core Hooks & Tracing Mechanisms</h3>
                <div class="term-grid">
                    <div class="term-card" style="border-top: 3px solid var(--cisco-red);">
                        <h4 class="lang-zh">XDP (eXpress Data Path)</h4>
                        <h4 class="lang-en hidden">XDP</h4>
                        <p class="lang-zh" style="font-size: 0.9rem;">
                            <strong>定义：</strong>Linux 内核中性能最高的网络路径，位于网卡驱动层。它允许在分配内核缓冲区（sk_buff）之前处理数据包。<br><br>
                            <strong>场景：</strong>极速丢弃 DDoS 攻击包，消耗资源极少。
                        </p>
                    </div>

                    <div class="term-card" style="border-top: 3px solid var(--cisco-orange);">
                        <h4 class="lang-zh">Kprobes / Uprobes</h4>
                        <h4 class="lang-en hidden">Dynamic Probes</h4>
                        <p class="lang-zh" style="font-size: 0.9rem;">
                            <strong>定义：</strong>动态追踪机制。Kprobes 用于钩住内核函数入口/出口，Uprobes 则针对用户态程序（如二进制文件或库函数）。<br><br>
                            <strong>场景：</strong>在不修改源代码的情况下监控特定函数的调用频率或参数。
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Evolution Timeline -->
    <section>
        <div class="container">
            <span class="golden-badge lang-zh">发展简史 / EVOLUTION</span>
            <span class="golden-badge lang-en hidden">HISTORY</span>
            <h2 class="section-title lang-zh">技术演进：从过滤器到超级内核</h2>
            <h2 class="section-title lang-en hidden">Evolution: From Filter to Super Kernel</h2>

            <div class="evolution-timeline">
                <div class="timeline-item">
                    <div class="timeline-point"></div>
                    <div class="timeline-year">1992</div>
                    <div class="timeline-content">
                        <h5 class="lang-zh">cBPF：伯克利包过滤器的诞生</h5>
                        <h5 class="lang-en hidden">Birth of cBPF</h5>
                        <p class="lang-zh">最初的设计是为了提升网络包过滤效率。当时它只是一个简单的 2 寄存器虚拟机，作为 `tcpdump` 的心脏存在。</p>
                        <p class="lang-en hidden">Simple 2-register VM for efficient packet filtering in tools like
                            tcpdump.</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-point"></div>
                    <div class="timeline-year">2014</div>
                    <div class="timeline-content">
                        <h5 class="lang-zh">eBPF：进入通用编程时代</h5>
                        <h5 class="lang-en hidden">eBPF: The Universal Engine</h5>
                        <p class="lang-zh">内核开发者 Alexei Starovoitov 扩展了指令集（10 个寄存器）。Linux 3.15 首次集成，eBPF
                            从网络扩展到了系统监控、安全和跟踪。</p>
                        <p class="lang-en hidden">Extended ISA (10 registers) added. Linux 3.15 enabled generic kernel
                            instrumentation beyond networking.</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-point"></div>
                    <div class="timeline-year">2018</div>
                    <div class="timeline-content">
                        <h5 class="lang-zh">CO-RE：实现跨版本交付</h5>
                        <h5 class="lang-en hidden">CO-RE: Compile Once</h5>
                        <p class="lang-zh">BTF 元数据机制成熟，解决了 eBPF 在不同 Linux 发行版之间的兼容性噩梦，这标志着 eBPF 真正具备了大规模商业交付的能力。</p>
                        <p class="lang-en hidden">BTF and CO-RE matured, allowing a single binary to run across multiple
                            kernel versions safely.</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-point"></div>
                    <div class="timeline-year">NOW</div>
                    <div class="timeline-content">
                        <h5 class="lang-zh">可编程内核标准</h5>
                        <h5 class="lang-en hidden">The Standard Interface</h5>
                        <p class="lang-zh">eBPF 正在成为云原生操作系统的“事实标准”。Microsoft 甚至推出了 eBPF for Windows，证明了这种可编程内核范式的普适性。
                        </p>
                        <p class="lang-en hidden">eBPF is now the de-facto standard for cloud-native infrastructure,
                            even expanding to Windows.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Deep Dive Section -->
    <section class="process-section">
        <div class="container">
            <span class="golden-badge lang-zh">运行机制 / INNER WORKINGS</span>
            <span class="golden-badge lang-en hidden">MECHANISM</span>
            <h2 class="section-title lang-zh">深度解析：eBPF 运行流程</h2>
            <h2 class="section-title lang-en hidden">Deep Dive: How eBPF Works</h2>

            <p class="lang-zh" style="text-align: center; max-width: 800px; margin: 0 auto 30px;">eBPF
                允许在不更改内核代码的情况下，在内核事件触发时运行自定义程序。以下是其核心链路图示：</p>
            <p class="lang-en hidden" style="text-align: center; max-width: 800px; margin: 0 auto 30px;">eBPF allows
                running custom programs upon kernel events without changing source code. Here is the core workflow:</p>

            <!-- 技术原理图 -->
            <div class="diagram-container">
                <svg class="arch-svg" width="600" height="300" viewBox="0 0 600 300">
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="var(--cisco-blue)" />
                        </marker>
                    </defs>
                    <!-- User Space -->
                    <rect x="50" y="20" width="500" height="80" rx="10" fill="#f8f9fa" stroke="#ddd" stroke-width="1" />
                    <text x="300" y="50" text-anchor="middle" font-weight="bold" fill="#666" font-size="14"
                        class="lang-zh">User Space (用户空间)</text>
                    <text x="300" y="50" text-anchor="middle" font-weight="bold" fill="#666" font-size="14"
                        class="lang-en hidden">User Space</text>

                    <rect x="100" y="60" width="120" height="30" rx="5" fill="#fff" stroke="var(--cisco-midnight)"
                        stroke-width="1.5" />
                    <text x="160" y="80" text-anchor="middle" font-size="11" fill="var(--cisco-midnight)">eBPF
                        Program</text>

                    <rect x="380" y="60" width="120" height="30" rx="5" fill="#fff" stroke="var(--cisco-midnight)"
                        stroke-width="1.5" />
                    <text x="440" y="80" text-anchor="middle" font-size="11" fill="var(--cisco-midnight)">Loader
                        (bpftool)</text>

                    <!-- Arrow -->
                    <path d="M300 100 L300 130" stroke="var(--cisco-blue)" stroke-width="3" fill="none"
                        marker-end="url(#arrowhead)" />

                    <!-- Kernel Space -->
                    <rect x="50" y="140" width="500" height="140" rx="10" fill="rgba(4, 159, 217, 0.05)"
                        stroke="var(--cisco-blue)" stroke-width="2" />
                    <text x="300" y="165" text-anchor="middle" font-weight="bold" fill="var(--cisco-midnight)"
                        font-size="14" class="lang-zh">Kernel Space (内核空间)</text>
                    <text x="300" y="165" text-anchor="middle" font-weight="bold" fill="var(--cisco-midnight)"
                        font-size="14" class="lang-en hidden">Kernel Space</text>

                    <!-- Internal Blocks -->
                    <rect x="70" y="180" width="100" height="80" rx="5" fill="#fff" stroke="var(--cisco-blue)"
                        stroke-width="1" />
                    <text x="120" y="210" text-anchor="middle" font-size="11" font-weight="bold"
                        fill="var(--cisco-midnight)">Verifier</text>
                    <text x="120" y="230" text-anchor="middle" font-size="10" fill="#666" class="lang-zh">(验证器)</text>
                    <text x="120" y="230" text-anchor="middle" font-size="10" fill="#666"
                        class="lang-en hidden">(Verifier)</text>

                    <rect x="200" y="180" width="100" height="80" rx="5" fill="#fff" stroke="var(--cisco-blue)"
                        stroke-width="1" />
                    <text x="250" y="210" text-anchor="middle" font-size="11" font-weight="bold"
                        fill="var(--cisco-midnight)">JIT Compiler</text>
                    <text x="250" y="230" text-anchor="middle" font-size="10" fill="#666" class="lang-zh">(即时编译)</text>
                    <text x="250" y="230" text-anchor="middle" font-size="10" fill="#666"
                        class="lang-en hidden">(JIT)</text>

                    <rect x="330" y="180" width="100" height="80" rx="5" fill="#fff" stroke="var(--cisco-blue)"
                        stroke-width="1" />
                    <text x="380" y="210" text-anchor="middle" font-size="11" font-weight="bold"
                        fill="var(--cisco-midnight)">Maps</text>
                    <text x="380" y="230" text-anchor="middle" font-size="10" fill="#666" class="lang-zh">(数据共享)</text>
                    <text x="380" y="230" text-anchor="middle" font-size="10" fill="#666" class="lang-en hidden">(Data
                        Sharing)</text>

                    <rect x="460" y="180" width="70" height="80" rx="5" fill="#fff" stroke="var(--cisco-blue)"
                        stroke-width="1" />
                    <text x="495" y="210" text-anchor="middle" font-size="11" font-weight="bold"
                        fill="var(--cisco-midnight)">Hooks</text>
                    <text x="495" y="230" text-anchor="middle" font-size="10" fill="#666" class="lang-zh">(挂钩点)</text>
                    <text x="495" y="230" text-anchor="middle" font-size="10" fill="#666" class="lang-en hidden">(Hook
                        Points)</text>
                </svg>
            </div>

            <div class="process-steps">
                <div class="step-card">
                    <div class="step-number">1</div>
                    <h4 class="lang-zh">编译与抽象</h4>
                    <h4 class="lang-en hidden">Compile & Abstract</h4>
                    <p class="lang-zh">开发者编写 C 代码，通过 LLVM/Clang 编译成特殊的 **eBPF 字节码**。这种中间格式独立于硬件架构，是代码安全的第一道抽象。</p>
                    <p class="lang-en hidden">Code is compiled via LLVM/Clang into architecture-independent eBPF
                        bytecode.</p>
                    <div class="step-arrow">➜</div>
                </div>

                <div class="step-card" style="border-top-color: var(--cisco-orange);">
                    <div class="step-number" style="background: var(--cisco-orange);">2</div>
                    <h4 class="lang-zh">全路径验证 (Verifier)</h4>
                    <h4 class="lang-en hidden">Full-Path Validation</h4>
                    <p class="lang-zh">加载器将字节码注入内核。**验证器**会分析每一条可能的执行路径。如果发现死循环、非法指针或过深的嵌套调用，加载将立即被阻断。</p>
                    <p class="lang-en hidden">The Verifier simulates all execution paths to prevent crashes, infinite
                        loops, or illegal memory access.</p>
                    <div class="step-arrow">➜</div>
                </div>

                <div class="step-card">
                    <div class="step-number">3</div>
                    <h4 class="lang-zh">硬件加速 (JIT)</h4>
                    <h4 class="lang-en hidden">Hardware Speed (JIT)</h4>
                    <p class="lang-zh">一旦通过验证，**JIT 编译器**会将字节码翻译成当前 CPU（x86/ARM）的机器码。这让 eBPF 以原生速度处理每秒数千万次的事件。</p>
                    <p class="lang-en hidden">JIT translates bytecode to local machine code (x86/ARM) for native-level
                        execution speed.</p>
                    <div class="step-arrow">➜</div>
                </div>

                <div class="step-card" style="border-top-color: var(--cisco-green);">
                    <div class="step-number" style="background: var(--cisco-green);">4</div>
                    <h4 class="lang-zh">钩子响应 (Hooking)</h4>
                    <h4 class="lang-en hidden">Event Response</h4>
                    <p class="lang-zh">程序正式“挂载”到指定的内核钩子点。每当特定事件发生时，eBPF 程序会瞬间在内核上下文中执行，并通过 Maps 回传关键结果。</p>
                    <p class="lang-en hidden">Program attaches to hooks and executes within the kernel context,
                        communicating results back via BPF Maps.</p>
                </div>
            </div>

            <!-- 核心组件细节 -->
            <div class="detail-grid">
                <div class="card" style="border-top-color: var(--cisco-blue);">
                    <h3 class="lang-zh">辅助函数 (Helper Functions)</h3>
                    <h3 class="lang-en hidden">Helper Functions</h3>
                    <p class="lang-zh" style="font-size: 0.95rem; margin-top: 10px;">
                        eBPF 程序的设计哲学强调安全与隔离，不允许直接调用任意内核函数。内核提供了一组受控的 <strong>Helper API</strong>，作为安全的“工具箱”。
                    </p>
                    <ul class="hook-list">
                        <li class="hook-item">
                            <span class="hook-label">Data</span>
                            <span class="hook-desc lang-zh">`bpf_probe_read()` 用于安全读取内核内存；`bpf_get_current_pid()` 获取进程
                                ID。</span>
                            <span class="hook-desc lang-en hidden">`bpf_probe_read()` for safe memory access;
                                `bpf_get_current_pid()` for process info.</span>
                        </li>
                        <li class="hook-item">
                            <span class="hook-label">Network</span>
                            <span class="hook-desc lang-zh">`bpf_skb_load_bytes()` 解析包数据；`bpf_redirect()`
                                实现极速包重定向。</span>
                            <span class="hook-desc lang-en hidden">`bpf_skb_load_bytes()` for packet parsing;
                                `bpf_redirect()` for fast packet redirect.</span>
                        </li>
                    </ul>
                </div>

                <div class="card" style="border-top-color: var(--cisco-midnight);">
                    <h3 class="lang-zh">尾调用 (Tail Calls)</h3>
                    <h3 class="lang-en hidden">Tail Calls</h3>
                    <p class="lang-zh" style="font-size: 0.95rem; margin-top: 10px;">
                        受限于单一程序 4096 条指令的限制，尾调用允许 eBPF 程序像 <strong>“接力赛”</strong> 一样跳转到另一个程序运行，且不增加栈开销。
                    </p>
                    <p class="lang-en hidden" style="font-size: 0.95rem; margin-top: 10px;">
                        Tail calls allow eBPF programs to jump to another like a <strong>"relay race"</strong>,
                        bypassing instruction limits without stack overhead.
                    </p>
                    <div class="insight-card" style="margin: 15px 0 0; font-size: 0.85rem;">
                        <span class="lang-zh">核心优势：实现逻辑解耦、构建复杂的模块化处理管道（如 Cilium 的网络逻辑链路）。</span>
                        <span class="lang-en hidden">Core Benefit: Decoupled logic, builds complex modular processing
                            pipelines (e.g., Cilium's link).</span>
                    </div>
                </div>
            </div>

            <div class="card" style="margin-top: 30px; border-top-color: var(--cisco-green);">
                <h3 class="lang-zh">挂钩点全景观 (Hook Points)</h3>
                <h3 class="lang-en hidden">Hook Points Overview</h3>
                <p class="lang-zh" style="margin-bottom: 20px;">eBPF 通过在内核关键路径上设置“监听站”，在不改动源码的情况下注入自定义逻辑：</p>
                <p class="lang-en hidden" style="margin-bottom: 20px;">eBPF injects logic via ubiquitous "listening
                    posts" throughout core kernel paths:</p>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                    <ul class="hook-list">
                        <li class="hook-item">
                            <span class="hook-label">XDP</span>
                            <span class="hook-desc lang-zh"><strong>最早钩子：</strong>在网卡驱动层拦截包，适用于 DDoS 防护。</span>
                            <span class="hook-desc lang-en hidden"><strong>Earliest Hook:</strong> NIC driver layer
                                packet interception.</span>
                        </li>
                        <li class="hook-item">
                            <span class="hook-label">TC</span>
                            <span class="hook-desc lang-zh"><strong>流控层：</strong>在包整形阶段介入，支持 QoS 与包标记。</span>
                            <span class="hook-desc lang-en hidden"><strong>Traffic Control:</strong> Ingress/Egress
                                shaping and QoS marking.</span>
                        </li>
                        <li class="hook-item">
                            <span class="hook-label">LSM</span>
                            <span class="hook-desc lang-zh"><strong>安全模块：</strong>扩展 Linux 安全框架，实现内核级权限实时控制。</span>
                            <span class="hook-desc lang-en hidden"><strong>Security:</strong> Extends Linux Security
                                Modules for real-time enforcement.</span>
                        </li>
                    </ul>
                    <ul class="hook-list">
                        <li class="hook-item">
                            <span class="hook-label">Kprobes</span>
                            <span class="hook-desc lang-zh"><strong>动态探针：</strong>钩住任意内核函数，深入诊断性能瓶颈。</span>
                            <span class="hook-desc lang-en hidden"><strong>Dynamic:</strong> Probes any kernel function
                                for bottleneck diagnosis.</span>
                        </li>
                        <li class="hook-item">
                            <span class="hook-label">Uprobes</span>
                            <span class="hook-desc lang-zh"><strong>用户探针：</strong>针对应用程序（如 libc）实现无侵入追踪。</span>
                            <span class="hook-desc lang-en hidden"><strong>Userspace:</strong> Traces app functions
                                without code modification.</span>
                        </li>
                        <li class="hook-item">
                            <span class="hook-label">Tracepts</span>
                            <span class="hook-desc lang-zh"><strong>静态追踪：</strong>由开发者预定义的稳定追踪点，开销极低。</span>
                            <span class="hook-desc lang-en hidden"><strong>Tracepoints:</strong> Static, pre-defined
                                events with minimal overhead.</span>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="insight-card">
                <span class="lang-zh"><strong>架构深度：</strong> eBPF 是 Linux 内核的“乐高化”。它将原本封闭、需要数年开发周期的内核功能，通过 Verifier
                    转换成了可以像乐高积木一样按需动态挂载的安全插件。</span>
                <span class="lang-en hidden"><strong>Architecture View:</strong> eBPF transforms the monolithic kernel
                    into a "Lego-like" modular system, where features can be dynamically and safely plugged in.</span>
            </div>
        </div>
    </section>

    <!-- Code Examples Section -->
    <section style="background: #fdfdfd;">
        <div class="container">
            <span class="golden-badge lang-zh">代码实操 / POLYGLOT EBPF</span>
            <span class="golden-badge lang-en hidden">CODE EXAMPLES</span>
            <h2 class="section-title lang-zh">多语言开发实战</h2>
            <h2 class="section-title lang-en hidden">eBPF in Action: Polyglot Snippets</h2>

            <div class="code-tabs">
                <div class="tabs-header">
                    <button class="tab-btn active" onclick="switchTab('c-kernel')">C (网络防火墙)</button>
                    <button class="tab-btn" onclick="switchTab('python-bcc')">Python (性能诊断)</button>
                    <button class="tab-btn" onclick="switchTab('go-libbpf')">Go (安全监测看板)</button>
                </div>
                <div id="c-kernel" class="code-content">
                    <span class="code-comment">// 内核态：极速拦截非 80/443 端口的非法包</span>
                    SEC(<span class="code-string">"xdp"</span>)
                    <span class="code-keyword">int</span> <span class="code-func">xdp_drop_illegal</span>(<span
                        class="code-keyword">struct</span> xdp_md *ctx) {
                    <span class="code-keyword">if</span> (parse_port(ctx) != 80 && parse_port(ctx) != 443) {
                    <span class="code-keyword">return</span> XDP_DROP; <span class="code-comment">// 硬件级丢弃，不占 CPU</span>
                    }
                    <span class="code-keyword">return</span> XDP_PASS;
                    }
                </div>
                <div id="python-bcc" class="code-content hidden">
                    <span class="code-comment"># 用户态：实时统计系统调用延迟直方图</span>
                    <span class="code-keyword">from</span> bcc <span class="code-keyword">import</span> BPF
                    b = BPF(text=<span class="code-string">"TRACE_SYSCALL_LATENCY_CODE"</span>)
                    <span class="code-keyword">print</span>(<span class="code-string">"正在实时收集内核函数 [do_sys_openat2]
                        耗时分布..."</span>)
                    b[<span class="code-string">"dist"</span>].print_log2_hist(<span class="code-string">"usecs"</span>)
                    <span class="code-comment"># 0 侵入生成的性能火焰图数据</span>
                </div>
                <div id="go-libbpf" class="code-content hidden">
                    <span class="code-comment">// 用户态：将内核 Maps 中的攻击数据同步至仪表盘</span>
                    <span class="code-keyword">func</span> <span class="code-func">pollAuditEvents</span>() {
                    events := bpfModule.GetMap(<span class="code-string">"attack_map"</span>)
                    <span class="code-keyword">for</span> {
                    data := events.Poll() <span class="code-comment">// 毫秒级同步：内核态沙盒 -> 用户态大屏</span>
                    updateDashboard(data)
                    }
                    }
                </div>
            </div>
        </div>
    </section>

    <!-- Why it matters: Three Pillars -->
    <section class="features">
        <div class="container">
            <span class="golden-badge lang-zh">核心价值 / VALUE PROPOSITION</span>
            <span class="golden-badge lang-en hidden">THREE PILLARS</span>
            <h2 class="section-title lang-zh" style="margin-top:0;">为什么这很重要？三大应用支柱</h2>
            <h2 class="section-title lang-en hidden" style="margin-top:0;">The Three Pillars of eBPF</h2>

            <!-- Winston 原则：Salience (强化核心价值的显著性) -->
            <div class="winston-callout lang-zh"
                style="background: rgba(255,255,255,0.05); color: white; border-left-color: var(--cisco-sky-blue);">
                <strong>价值锚点 / THE VALUE ANCHOR</strong>
                eBPF 并不是为了替代现有的网络或安全工具，而是为了赋予它们 <strong>“动态进化的生命力”</strong>。
            </div>

            <div class="pillars-grid">
                <!-- Security Pillar -->
                <div class="feature-card" style="border-top-color: var(--cisco-red);">
                    <div class="feature-icon-box" style="background: rgba(226, 35, 26, 0.1);">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="var(--cisco-red)"
                            stroke-width="2">
                            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
                            <path d="M12 8v4M12 16h.01" stroke-linecap="round" />
                        </svg>
                    </div>
                    <h3 class="lang-zh">下一代安全架构</h3>
                    <h3 class="lang-en hidden">Next-Gen Security</h3>
                    <p class="lang-zh"><strong>核心痛点：</strong> 传统安全软件位于用户态，黑客一旦进入内核便完全失效。且传统审计工具容易绕过。<br><br><strong>eBPF
                            解法：</strong> 具备 <strong>不可绕过性 (Unbypassable)</strong>。直接在内核入口处监控。不仅感知进程行为，更能即时拦截恶意文件打开或容器逃逸，符合 CISSP
                        纵深防御原则。</p>
                </div>

                <!-- Observability Pillar -->
                <div class="feature-card" style="border-top-color: var(--cisco-blue);">
                    <div class="feature-icon-box" style="background: rgba(4, 159, 217, 0.1);">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="var(--cisco-blue)"
                            stroke-width="2">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
                            <circle cx="12" cy="12" r="3" />
                            <path d="M12 5V3M12 21v-2M5 12H3M21 12h-2" stroke-linecap="round" />
                        </svg>
                    </div>
                    <h3 class="lang-zh">极致可观测性</h3>
                    <h3 class="lang-en hidden">Extreme Observability</h3>
                    <p class="lang-zh"><strong>核心痛点：</strong> 业务排障通常需插入日志，带来性能损耗，且无法观测内核层抖动。<br><br><strong>eBPF
                            解法：</strong>
                        无需修改应用代码，透视整个软件栈。生成高精度火焰图，捕获被加密之前的原始请求数据包，提供上帝视角般的系统可见性。<br><br><strong>技术前沿：</strong> 开启
                        <strong>持续剖析 (Continuous Profiling)</strong> 时代。利用 eBPF 的极低开销，实现全量集群的 24/7
                        性能采样，精准定位生产环境中的“毫秒级”性能抖动。</p>
                </div>

                <!-- Networking Pillar -->
                <div class="feature-card" style="border-top-color: var(--cisco-green);">
                    <div class="feature-icon-box" style="background: rgba(108, 194, 74, 0.1);">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="var(--cisco-green)"
                            stroke-width="2">
                            <rect x="2" y="2" width="20" height="8" rx="2" ry="2"></rect>
                            <rect x="2" y="14" width="20" height="8" rx="2" ry="2"></rect>
                            <path d="M6 6h.01M6 18h.01" stroke-linecap="round" />
                        </svg>
                    </div>
                    <h3 class="lang-zh">云原生网络加速</h3>
                    <h3 class="lang-en hidden">Networking Acceleration</h3>
                    <p class="lang-zh"><strong>核心痛点：</strong> Kubernetes 依赖的 `iptables`
                        会随着节点增加而变得极其臃肿，导致转发延迟。<br><br><strong>eBPF 解法：</strong> 通过
                        XDP，在协议栈分配缓冲区前即转发包。绕过复杂的通用路径，实现近乎线速的负载均衡，支撑超大规模云原生集群。</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Interactive Demo Section -->
    <section class="demo-section container" id="demo">
        <span class="golden-badge lang-zh">实验演示 / SIMULATION</span>
        <span class="golden-badge lang-en hidden">KERNEL TERMINAL</span>
        <h2 class="section-title lang-zh">内核终端：深度交互模拟</h2>
        <h2 class="section-title lang-en hidden">Terminal: eBPF Interactive Demo</h2>

        <div class="control-panel" style="max-width: 900px;">
            <p class="lang-zh" style="margin-bottom: 25px; color: #444; font-size: 1.05rem;">点击下方的实验场景，亲历 eBPF
                如何在毫秒间改变系统的运行规则与观测深度。</p>
            <p class="lang-en hidden" style="margin-bottom: 25px; color: #444; font-size: 1.05rem;">Select a scenario to
                witness how eBPF changes system rules and observation depth.</p>

            <div class="terminal-wrapper" id="kernel-terminal">
                <div class="terminal-line"><span class="terminal-prompt">root@linux-kernel:~#</span> <span
                        class="terminal-cursor"></span></div>
            </div>

            <div class="controls">
                <button class="btn btn-primary" onclick="runXDPNetworkSimulation()" id="ping-btn">
                    <span class="lang-zh">XDP 极速拦截 (网络层)</span>
                </button>
                <button class="btn btn-primary" onclick="runKprobeSecuritySimulation()" id="sec-btn"
                    style="background-color: var(--cisco-red);">
                    <span class="lang-zh">Kprobe 动态防护 (安全层)</span>
                </button>
                <button class="btn" onclick="resetTerminal()" style="background: #666; color: white;">
                    <span class="lang-zh">重置终端</span>
                </button>
            </div>
        </div>

        <div style="display: flex; gap: 20px; margin-top: 50px; flex-wrap: wrap; justify-content: center;">

            <div class="pipeline-container" style="flex: 1; min-width: 300px; margin: 0;">
                <div class="kernel-zone">VIRTUAL RACETRACK RUNTIME</div>
                <div style="position: absolute; left: 10%; height: 60%; border-left: 2px dashed rgba(255,255,255,0.2);">
                    <span class="checkpoint-tag">XDP Hook</span>
                </div>
                <div style="position: absolute; left: 50%; height: 80%; border-left: 2px dashed rgba(255,255,255,0.2);">
                    <span class="checkpoint-tag">Kprobes</span>
                </div>
                <div id="packet-track" style="position: absolute; width: 100%; height: 100%; top:0; left:0;"></div>
                <div class="ebpf-program">
                    <span class="lang-zh" style="font-weight: 800; font-size: 0.7rem;">KERNEL SANDBOX</span>
                </div>
            </div>

            <div class="map-dashboard">
                <div class="map-title">Live Map Telemetry (BPF Maps)</div>
                <div class="map-stat">
                    <span>Dropped (XDP):</span>
                    <span id="xdp-count" class="stat-value">0</span>
                </div>
                <div class="map-stat">
                    <span>Violations (Kprobe):</span>
                    <span id="kprobe-count" class="stat-value">0</span>
                </div>
                <div class="map-stat">
                    <span>Sync Latency:</span>
                    <span class="stat-value">&lt;1ms</span>
                </div>
                <div
                    style="font-size: 0.65rem; color: #666; margin-top: 10px; border-top: 1px solid #333; padding-top: 5px;">
                    内核态与用户态共享内存实时更新
                </div>
            </div>
        </div>
    </section>

    <!-- Ecosystem Section -->
    <section style="background: var(--cisco-midnight); color: white;">
        <div class="container">
            <span class="golden-badge lang-zh">明星项目 / ECOSYSTEM</span>
            <span class="golden-badge lang-en hidden">INDUSTRY LEADERS</span>
            <h2 class="section-title lang-zh" style="color:white;">eBPF 明星项目全景观</h2>
            <h2 class="section-title lang-en hidden" style="color:white;">The eBPF Ecosystem</h2>

            <div class="feature-grid-eco">
                <div class="feature-card">
                    <h4 style="color:var(--cisco-blue); margin-bottom:15px; font-size: 1.3rem;">Cilium</h4>
                    <p style="font-size:0.95rem; opacity:0.9;"><strong>定义：</strong>
                        云原生网络的事实标准。<br><strong>核心竞争力：</strong> 基于 eBPF 的高性能网络。它不仅实现了极速负载均衡，更能深入 L7 协议进行细粒度的安全控制。</p>
                </div>
                <div class="feature-card">
                    <h4 style="color:var(--cisco-red); margin-bottom:15px; font-size: 1.3rem;">Tetragon</h4>
                    <p style="font-size:0.95rem; opacity:0.9;"><strong>定义：</strong>
                        实时内核检测与拦截引擎。<br><strong>核心竞争力：</strong> 它的强大在于“Enforcement”。在黑客触发敏感系统调用的瞬间，直接从内核层切断进程。</p>
                </div>
                <div class="feature-card">
                    <h4 style="color:var(--cisco-green); margin-bottom:15px; font-size: 1.3rem;">BPFtrace</h4>
                    <p style="font-size:0.95rem; opacity:0.9;"><strong>定义：</strong> 内核版 AWK。<br><strong>核心竞争力：</strong>
                        脚本化探针编写。可以在 10 秒钟内编写一个监控磁盘延迟或函数执行次数的探针，无需复杂编译。</p>
                </div>
                <div class="feature-card">
                    <h4 style="color:#56CCF2; margin-bottom:15px; font-size: 1.3rem;">SkyWalking</h4>
                    <p style="font-size:0.95rem; opacity:0.9;"><strong>定义：</strong> 应用性能管理 (APM)
                        领航者。<br><strong>核心竞争力：</strong> 无侵入跨服务追踪。即使没有嵌入 SDK，也能通过内核探针自动绘制出复杂的调用拓扑图。</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Isovalent Section -->
    <section style="background: #ffffff;">
        <div class="container">
            <span class="golden-badge lang-zh">产业先驱 / LEADERSHIP</span>
            <span class="golden-badge lang-en hidden">ISOVALENT & CISCO</span>
            <h2 class="section-title lang-zh">Isovalent 的工业化贡献：开启 eBPF 的“即战力”时代</h2>
            <h2 class="section-title lang-en hidden">Isovalent's Industrial Contribution</h2>

            <!-- Winston 原则：Chunking (分块化信息提升可读性) -->
            <div class="card isovalent-main-card"
                style="border-left-width: 8px; border-left-color: var(--cisco-blue); background: #fdfdfd; padding: 50px;">
                <div class="isovalent-header-box"
                    style="display: flex; align-items: center; gap: 25px; margin-bottom: 35px;">
                    <div style="background: var(--cisco-midnight); padding: 18px; border-radius: 14px;">
                        <svg width="45" height="45" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2">
                            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5" />
                        </svg>
                    </div>
                    <div>
                        <h3 class="lang-zh" style="color: var(--cisco-midnight); font-size: 2rem;">Isovalent：eBPF 的灵魂推动者
                        </h3>
                        <h3 class="lang-en hidden" style="color: var(--cisco-midnight); font-size: 2rem;">Isovalent: The
                            Soul of eBPF</h3>
                    </div>
                </div>

                <div class="detail-grid" style="margin-bottom: 50px;">
                    <div>
                        <h4 class="lang-zh" style="color: var(--cisco-blue); margin-bottom: 15px; font-size: 1.25rem;">
                            1. 开源引领与内核深耕</h4>
                        <p class="lang-zh" style="font-size: 1rem; color: #555; margin-bottom: 15px;">Isovalent 是
                            **Cilium** 的创建者，成功推动其成为 CNCF 毕业项目。他们通过 **Tetragon** 扩展了安全边界，同时持续贡献 Linux 内核上游代码，使 eBPF
                            从简单的网络过滤演进为全栈安全/观测引擎。</p>
                    </div>
                    <div>
                        <h4 class="lang-zh" style="color: var(--cisco-green); margin-bottom: 15px; font-size: 1.25rem;">
                            2. 标准制定与社区教育</h4>
                        <p class="lang-zh" style="font-size: 1rem; color: #555; margin-bottom: 15px;">2021 年，Isovalent
                            联合 Meta、Google 等成立 **eBPF 基金会**。他们维护核心文档项目并发布权威报告，将 eBPF 定位为重定义网络、安全、追踪的变革性技术。</p>
                    </div>
                </div>

                <h3 class="lang-zh"
                    style="color: var(--cisco-midnight); font-size: 1.6rem; margin-bottom: 25px; border-bottom: 2px solid #eee; padding-bottom: 10px;">
                    降低门槛：从“写代码”到“用方案”</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px;">
                    <div class="feature-box" style="padding: 20px; box-shadow: none; border-color: #eee;">
                        <h5 class="lang-zh" style="color: var(--cisco-blue); margin-bottom: 10px;">简化开发与部署</h5>
                        <p class="lang-zh" style="font-size: 0.9rem;"><strong>BPF CO-RE：</strong> 彻底解决了传统 eBPF
                            必须在目标机器重编译的痛点，实现“一次编译，到处运行”。<br><strong>无 Sidecar 服务网格：</strong>
                            摒弃传统复杂的代理模型，直接在内核处理网络逻辑，极大降低了资源消耗。</p>
                    </div>
                    <div class="feature-box" style="padding: 20px; box-shadow: none; border-color: #eee;">
                        <h5 class="lang-zh" style="color: var(--cisco-green); margin-bottom: 10px;">提升性能与观测</h5>
                        <p class="lang-zh" style="font-size: 0.9rem;"><strong>原生高效：</strong> 通过 eBPF 替换传统的
                            iptables，人们无需再深入内核源码即可获得极速网络转发能力。<br><strong>全栈洞察：</strong> 提供现成的内核级遥测看板，将原本晦涩的内核数据转化为易懂的指标。
                        </p>
                    </div>
                    <div class="feature-box"
                        style="padding: 20px; box-shadow: none; border-color: var(--cisco-blue); background: rgba(4, 159, 217, 0.02);">
                        <h5 class="lang-zh" style="color: var(--cisco-blue); margin-bottom: 10px;">技术深研：Sidecar-less 革命
                        </h5>
                        <p class="lang-zh" style="font-size: 0.85rem; color: #555;">
                            <strong>传统模式：</strong>每个 Pod 需运行一个 Envoy 代理（Sidecar），网络包在用户态和内核态之间反复跳转，产生巨大的 CPU
                            和延迟开销。<br><br>
                            <strong>eBPF 模式：</strong>程序直接驻留在内核协议栈。流量拦截与可观测性在内核层“一跳直达”，不再需要 Sidecar 进程，资源消耗降低
                            <strong>70%</strong> 以上。
                        </p>
                    </div>
                    <div class="feature-box" style="padding: 20px; box-shadow: none; border-color: #eee;">
                        <h5 class="lang-zh" style="color: var(--cisco-red); margin-bottom: 10px;">企业级即战平台</h5>
                        <p class="lang-zh" style="font-size: 0.9rem;"><strong>零信任方案：</strong> 将复杂的安全拦截包装成易用的策略引擎。Cisco
                            收购 Isovalent 后，eBPF 正式成为 **Security Cloud** 的底层核心，让内核级超能力变为企业现成的安全防线。</p>
                    </div>
                </div>

                <div class="insight-card" style="margin-top: 40px; background: rgba(4, 159, 217, 0.03);">
                    <span class="lang-zh"><strong>架构师视角：</strong> Isovalent 的核心价值在于<strong>抽象了 eBPF
                            的底层复杂性</strong>。随着他们加入 Cisco 战略版图，原本需要顶级 C 程序员手写数百行代码实现的内核逻辑，现在只需一套现成的企业级方案即可轻松部署，这标志着 eBPF
                        真正走向了工业主流化。</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Global Tech Giants Case Studies -->
    <section style="background: #fdfdfd; border-top: 1px solid #eee;">
        <div class="container">
            <span class="golden-badge lang-zh">实战案例 / CASE STUDIES</span>
            <span class="golden-badge lang-en hidden">GLOBAL ADOPTION</span>
            <h2 class="section-title lang-zh">全球技术巨头的 eBPF 实战</h2>
            <h2 class="section-title lang-en hidden">Case Studies: Global Tech Giants</h2>

            <p class="lang-zh" style="text-align: center; max-width: 800px; margin: -20px auto 40px;">eBPF
                不再停留在实验室。从硅谷到杭州，它已成为驱动下一代超大规模基础设施的核心引擎。</p>

            <div class="case-study-grid">
                <div class="case-study-card">
                    <div class="case-study-meta">Google <span>Cloud Native</span></div>
                    <p class="lang-zh">Google 选择 <strong>Cilium</strong> 作为 GKE Dataplane V2 的默认数据平面。通过 eBPF，GKE
                        实现了高性能的网络策略执行与透明的服务观测。</p>
                </div>
                <div class="case-study-card">
                    <div class="case-study-meta">Meta (Facebook) <span>Infrastructure</span></div>
                    <p class="lang-zh">Meta 开发并开源了 <strong>Katran</strong>，一个基于 eBPF 的高性能四层负载均衡器。它支撑了 Facebook
                        全球海量的入站流量分发。部署 <strong>Strobelight</strong> 剖析引擎，实现全量服务器的 CPU 周期削减，等效于为 Meta 的核心业务节省了
                        <strong>10-20%</strong> 的服务器需求。</p>
                </div>
                <div class="case-study-card">
                    <div class="case-study-meta">Netflix <span>Performance</span></div>
                    <p class="lang-zh">Netflix 的性能工程团队利用 <strong>bpftrace</strong> 监控数万台服务器。eBPF 帮助他们实时定位云端资源竞争与磁盘 IO
                        瓶颈。</p>
                </div>
                <div class="case-study-card">
                    <div class="case-study-meta">Microsoft <span>Cross-Platform</span></div>
                    <p class="lang-zh">Microsoft 正将 eBPF 引入 <strong>Windows 内核</strong>，并广泛应用于 Azure 安全防御。这意味着 eBPF
                        正在成为通用的操作系统编程范式。
                    </p>
                </div>
                <div class="case-study-card">
                    <div class="case-study-meta">Alibaba <span>Cloud Efficiency</span></div>
                    <p class="lang-zh">阿里巴巴在 <strong>云原生容器网络</strong> 中大规模采用 eBPF。通过优化 Linux 协议栈路径，显著降低了电商双 11
                        巅峰期间的请求延迟。利用 eBPF 实现自适应 L7 负载均衡，将单位基础设施成本显著降低了 <strong>19%</strong>。</p>
                </div>
                <div class="case-study-card">
                    <div class="case-study-meta">ByteDance (TikTok) <span>Observability</span></div>
                    <p class="lang-zh">字节跳动利用 eBPF 构建了**统一的可观测性底座**。在海量微服务场景下，无需重启应用即可实现秒级的链路追踪与异常告警。</p>
                </div>
                <div class="case-study-card">
                    <div class="case-study-meta">Datadog <span>CPU -35%</span></div>
                    <p class="lang-zh">通过 eBPF 自动发现和映射服务依赖，无需修改任何代码即可实现全栈监控，并使 CPU 占用率降低了 <strong>35%</strong>。</p>
                </div>
                <div class="case-study-card">
                    <div class="case-study-meta">Polar Signals <span>Cost -50%</span></div>
                    <p class="lang-zh">利用基于 eBPF 的持续剖析（Continuous Profiling）与观测，成功将内部 K8s 网络流量成本削减了
                        <strong>50%</strong>。</p>
                </div>
            </div>
        </div>
    </section>
    <section class="container" style="padding-top: 0;">
        <div class="report-highlight">
            <span class="golden-badge lang-zh">2025 行业白皮书摘要 / STRATEGIC INSIGHT</span>
            <h2 class="lang-zh" style="margin-bottom: 20px;">eBPF for the Infrastructure Platform</h2>
            <p class="lang-zh" style="color: #444; margin-bottom: 30px;">
                eBPF 已经跨越了早期采用者阶段，成为基础设施团队的<strong>战略平台首选</strong> 。它通过重塑内核可编程性，正在定义下一代基础设施平台。
            </p>

            <div class="metric-grid">
                <div class="metric-card">
                    <span class="value">4X</span>
                    <span class="label">网络包处理性能提升</span>
                </div>
                <div class="metric-card">
                    <span class="value">&lt;2%</span>
                    <span class="label">极致传感器 CPU 开销</span>
                </div>
                <div class="metric-card">
                    <span class="value">Zero</span>
                    <span class="label">代码侵入式可观测性</span>
                </div>
            </div>

            <div class="detail-grid" style="margin-top: 30px;">
                <div class="card" style="border-top-color: var(--cisco-midnight);">
                    <h4 class="lang-zh">虚拟化网络革命：Netkit</h4>
                    <p class="lang-zh" style="font-size: 0.9rem;">2025 核心技术：通过 eBPF 赋能的 <strong>Netkit</strong> 替换传统
                        veth 设备，消除了软件抽象开销，使虚拟网络吞吐量匹配物理主机性能 。</p>
                </div>
                <div class="card" style="border-top-color: var(--cisco-orange);">
                    <h4 class="lang-zh">AI 调度优化：Sched_ext</h4>
                    <p class="lang-zh" style="font-size: 0.9rem;">针对 AI 训练与 LLM 推理场景，利用 <strong>Sched_ext</strong> 编写定制化
                        CPU 调度策略，减少上下文切换，吞吐量可提升 5% 以上 。</p>
                </div>
                <div class="card" style="border-top-color: var(--cisco-blue);">
                    <h4 class="lang-zh">LLM 安全与可观测性</h4>
                    <p class="lang-zh" style="font-size: 0.9rem;">在网络层实时追踪应用与外部 LLM 的交互，捕获 API 请求数据与延迟，构建无感的生成式 AI 安全防线。
                    </p>
                </div>
            </div>

            <div class="winston-callout lang-zh"
                style="background: var(--cisco-blue); color: white; padding: 40px; text-align: center; border-radius: 12px; margin-top: 40px;">
                <h3 style="font-size: 1.8rem; margin-bottom: 15px;">倡议行动：开启内核编程新篇章</h3>
                <p style="opacity: 0.9; margin-bottom: 25px;">eBPF 正在成为现代基础设施的乐高积木。无论您是追求极致性能还是极致安全，现在就是拥抱 eBPF 平台的时刻。
                </p>
            </div>
        </div>
    </section>
    <!-- Winston 原则：The Empowering End (赋能式结尾) -->
    <section
        style="background: var(--cisco-dark-blue); color: white; padding: 80px 0; text-align: center; border-bottom: 2px solid var(--cisco-blue);">
        <div class="container">
            <h2 class="lang-zh" style="font-size: 2rem; margin-bottom: 20px;">技术深远影响：从“被动防御”到“主动可编程”</h2>
            <p class="lang-zh" style="max-width: 800px; margin: 0 auto; opacity: 0.8; line-height: 1.8;">
                掌握 eBPF 并不意味着您需要成为一名内核黑客，而是意味着您拥有了<strong>重塑基础设施边界的能力</strong>。在 Isovalent 与 Cisco 的共同推动下，这种超能力已触手可及。
            </p>
            <div style="margin-top: 40px;">
                <button class="btn btn-primary" onclick="scrollToDemo()">立即开启内核探索之旅</button>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section class="container" style="background: white; border-top: 1px solid #eee;">
        <h2 class="section-title lang-zh">常见问题解答 (FAQ)</h2>
        <h2 class="section-title lang-en hidden">FAQ</h2>

        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 30px;">
            <div class="card">
                <h4 class="lang-zh text-cisco-blue">eBPF 会让系统变慢吗？</h4>
                <h4 class="lang-en hidden text-cisco-blue">Will eBPF slow down my system?</h4>
                <p class="lang-zh" style="font-size: 0.95rem; color: #555; margin-top:10px;">**答案是否定的。** 现代 eBPF 通过
                    JIT（即时编译）转化为原生指令。事实上，由于避免了用户态轮询或庞大内核模块的开销，它往往比传统方案更快。</p>
            </div>
            <div class="card">
                <h4 class="lang-zh text-cisco-blue">验证器 (Verifier) 真的能保证系统不崩溃吗？</h4>
                <h4 class="lang-en hidden text-cisco-blue">Does the Verifier prevent crashes?</h4>
                <p class="lang-zh" style="font-size: 0.95rem; color: #555; margin-top:10px;">**是的。**
                    验证器会强制执行安全准则：代码必须是有限长度的、内存访问受限、指针合法。如果代码不符合“安全指纹”，内核会拒绝加载。</p>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div style="margin-bottom: 30px;">
                <svg viewBox="0 0 64 32" fill="none" xmlns="http://www.w3.org/2000/svg"
                    style="height: 35px; opacity: 0.9;">
                    <path d="M14 24V16" stroke="#fff" stroke-width="3" stroke-linecap="round" />
                    <path d="M22 24V10" stroke="#fff" stroke-width="3" stroke-linecap="round" />
                    <path d="M30 24V14" stroke="#fff" stroke-width="3" stroke-linecap="round" />
                    <path d="M38 24V8" stroke="#fff" stroke-width="3" stroke-linecap="round" />
                    <path d="M46 24V14" stroke="#fff" stroke-width="3" stroke-linecap="round" />
                    <path d="M54 24V19" stroke="#fff" stroke-width="3" stroke-linecap="round" />
                </svg>
            </div>
            <p class="lang-zh" style="font-size: 1.2rem; font-weight: 800; margin-bottom: 12px;">安全架构师技术分享系列</p>
            <p class="lang-en hidden" style="font-size: 1.2rem; font-weight: 800; margin-bottom: 12px;">Security
                Architect Tech Series</p>
            <p class="lang-zh" style="opacity: 0.6; font-size: 0.9rem;">基于 Cisco Live 架构准则 | 深度研究与转化成果</p>
            <div style="margin-top: 35px; opacity: 0.5;">
                <span style="margin: 0 10px;">CISSP</span> | <span style="margin: 0 10px;">CKA</span> | <span
                    style="margin: 0 10px;">SRE</span>
            </div>
        </div>
    </footer>

    <script>
        // 初始化 BPF Map 计数器（模拟内核态与用户态的共享内存）
        let stats = { xdp: 0, kprobe: 0 };
        function setLang(lang) {
            const zhElements = document.querySelectorAll('.lang-zh');
            const enElements = document.querySelectorAll('.lang-en');
            const btns = document.querySelectorAll('.lang-btn');
            if (lang === 'zh') {
                zhElements.forEach(el => el.classList.remove('hidden'));
                enElements.forEach(el => el.classList.add('hidden'));
                btns[0].classList.add('active');
                btns[1].classList.remove('active');
                document.documentElement.lang = 'zh-CN';
            } else {
                zhElements.forEach(el => el.classList.add('hidden'));
                enElements.forEach(el => el.classList.remove('hidden'));
                btns[0].classList.remove('active');
                btns[1].classList.add('active');
                document.documentElement.lang = 'en';
            }
        }

        function switchTab(tabId) {
            const contents = document.querySelectorAll('.code-content');
            const btns = document.querySelectorAll('.tab-btn');
            contents.forEach(c => c.classList.add('hidden'));
            btns.forEach(b => b.classList.remove('active'));
            document.getElementById(tabId).classList.remove('hidden');
            if (event) event.target.classList.add('active');
        }

        function scrollToDemo() {
            document.getElementById('demo').scrollIntoView({ behavior: 'smooth' });
        }

        // 模拟 XDP 检查站：网络层极速拦截
        function runXDPNetworkSimulation() {
            const btns = document.querySelectorAll('.controls .btn');
            btns.forEach(b => b.disabled = true);
            const lines = [
                { text: "root@engine:~# modprobe xdp_ddos_filter", delay: 0 },
                { text: "[  XDP INFO  ] Hook attached to eth0 (Driver Level).", delay: 600, color: "var(--cisco-blue)" },
                { text: "[  XDP DROP  ] Packet from Blacklisted IP: 192.168.1.100 intercepted!", delay: 1400, color: "var(--cisco-red)", bold: true },
                { text: "Result: Dropped BEFORE kernel stack allocation. Map updated.", delay: 2000 }
            ];
            animateTerminal(lines, btns);
            // 触发数据包动画：在入口 10% 处拦截
            sendCheckpointPacket('UDP', 'var(--cisco-red)', 10);
        }

        // 模拟 Kprobe 检查站：内核函数动态追踪
        function runKprobeSecuritySimulation() {
            const btns = document.querySelectorAll('.controls .btn');
            btns.forEach(b => b.disabled = true);
            const lines = [
                { text: "root@engine:~# bpftrace -e 'kprobe:sys_open { printf(\"%s\", comm); }'", delay: 0 },
                { text: "[  KPROBE    ] Attached to kernel function: do_sys_openat2", delay: 600, color: "var(--cisco-orange)" },
                { text: "[  ALERT     ] Unprivileged process 'attacker' accessed /etc/shadow!", delay: 1500, color: "var(--cisco-red)", bold: true },
                { text: "[  ACTION    ] SIGKILL sent via Helper Function. Map updated.", delay: 2200, color: "var(--cisco-red)" }
            ];
            animateTerminal(lines, btns);
            // 触发数据包动画：在内核核心 50% 处拦截
            sendCheckpointPacket('SYS', 'var(--cisco-orange)', 50);
        }

        /**
         * 现代异步延时辅助函数
         */
        const sleep = (ms) => new Promise(resolve => setTimeout(resolve, ms));

        /**
         * 重构后的终端动画逻辑：线性、安全、可读
         */
        async function animateTerminal(lines, btns) {
            const terminal = document.getElementById('kernel-terminal');
            terminal.innerHTML = ""; // 清空终端
            
            // 禁用按钮，防止竞态冲突
            btns.forEach(b => b.disabled = true);

            try {
                for (const line of lines) {
                    await sleep(line.delay); // 线性等待
                    
                    const div = document.createElement('div');
                    div.className = 'terminal-line';
                    if (line.color) div.style.color = line.color;
                    if (line.bold) div.style.fontWeight = 'bold';
                    
                    div.innerText = line.text;
                    terminal.appendChild(div);
                    terminal.scrollTop = terminal.scrollHeight;
                }

                // 动画结束，添加提示符
                const cursorLine = document.createElement('div');
                cursorLine.className = 'terminal-line';
                cursorLine.innerHTML = '<span class="terminal-prompt">root@linux-kernel:~#</span> <span class="terminal-cursor"></span>';
                terminal.appendChild(cursorLine);
                
            } catch (error) {
                console.error("Terminal animation failed:", error);
            } finally {
                btns.forEach(b => b.disabled = false); // 确保最后恢复按钮可用
            }
        }

        function resetTerminal() {
            const terminal = document.getElementById('kernel-terminal');
            terminal.innerHTML = '<div class="terminal-line"><span class="terminal-prompt">root@engine:~#</span> <span class="terminal-cursor"></span></div>';
            const btns = document.querySelectorAll('.controls .btn');
            btns.forEach(b => b.disabled = false);

            // 重置 Map 计数器
            stats = { xdp: 0, kprobe: 0 };
            document.getElementById('xdp-count').innerText = "0";
            document.getElementById('kprobe-count').innerText = "0";
        }

        // 核心动画：模拟检查站拦截与 Map 数据回传
        function sendCheckpointPacket(text, color, stopAtPercent) {
            const track = document.getElementById('packet-track');
            const packet = document.createElement('div');
            packet.className = 'packet';
            packet.style.backgroundColor = color;
            packet.style.color = 'white';
            packet.innerText = text;
            packet.style.left = '0%';
            track.appendChild(packet);

            // 第一步：数据流（车）移动到指定的 Hook 检查站
            setTimeout(() => { packet.style.left = stopAtPercent + '%'; }, 50);

            setTimeout(() => {
                // 第二步：触发 Hook，显示拦截效果
                packet.style.transform = 'translateY(-50%) scale(1.4)';
                packet.style.boxShadow = `0 0 30px ${color}`;

                setTimeout(() => {
                    // 第三步：拦截生效，数据包掉落（丢弃）
                    packet.style.top = '150%';
                    packet.style.opacity = '0';

                    // 第四步：同步更新数字化仪表盘 (BPF Maps)
                    updateMapStats(stopAtPercent);

                    setTimeout(() => { packet.remove(); }, 800);
                }, 1000);
            }, 1200);
        }

        // 模拟 Map 数据从内核态同步到用户态
        function updateMapStats(position) {
            if (position === 10) { // XDP 位置
                stats.xdp++;
                const el = document.getElementById('xdp-count');
                el.innerText = stats.xdp;
                el.classList.add('alert'); // 触发视觉跳动
                setTimeout(() => el.classList.remove('alert'), 500);
            } else if (position === 50) { // Kprobe 位置
                stats.kprobe++;
                const el = document.getElementById('kprobe-count');
                el.innerText = stats.kprobe;
                el.classList.add('alert');
                setTimeout(() => el.classList.remove('alert'), 500);
            }
        }
    </script>
</body>

</html>