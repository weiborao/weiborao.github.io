---
layout: false
---
<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cilium : eBPF 重塑云原生基础设施 | Reshaping Cloud-Native Infrastructure</title>
    <meta name="revised" content="Sunday, January 11th, 2026, 11:30 pm" />
    <meta property="og:updated_time" content="2026-01-11T11:30:00+08:00" />
    <meta name="keywords" content="Cilium, Kubernetes CNI, eBPF Networking, Service Mesh, OpenAI GPU Network, 2025 CNI">

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "TechArticle",
      "headline": "Cilium: eBPF 重塑云原生基础设施",
      "description": "深入解析 Cilium 架构：涵盖 kube-proxy 替换、Sidecar-less 服务网格及超大规模集群通信优化。",
      "datePublished": "2026-01-09T21:00:00+08:00",
      "dateModified": "2026-01-11T11:30:00+08:00",
      "proficiencyLevel": "Expert",
      "author": { "@type": "Person", "name": "Weibo Rao" }
    }
    </script>

    <style>
        /* --- 100% 还原原有 Cisco 品牌样式变量 --- */
        :root {
            --cisco-blue: #049FD9;
            --cisco-midnight: #0D274D;
            --cisco-sky: #6ABF4B;
            --cisco-slate: #58585B;
            --cisco-platinum: #E4E4E4;
            --cisco-red: #E2231A;
            --cisco-orange: #F58025;
            --white: #FFFFFF;
            --shadow-card: 0 12px 40px rgba(13, 39, 77, 0.08);
            --shadow-hover: 0 20px 50px rgba(13, 39, 77, 0.15);
            --radius-lg: 16px;
        }

        /* --- 原有基础样式保留 --- */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-font-smoothing: antialiased;
        }

        body {
            font-family: "SF Pro Text", "Segoe UI", Roboto, sans-serif;
            color: var(--cisco-slate);
            background-color: #F8FAFC;
            line-height: 1.7;
            transition: opacity 0.3s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
        }

        h1,
        h2,
        h3,
        h4 {
            color: var(--cisco-midnight);
            font-weight: 700;
            letter-spacing: -0.02em;
        }

        /* --- 国际化控制核心 CSS --- */
        /* 默认隐藏逻辑 */
        body.lang-zh [lang="en"] {
            display: none !important;
        }

        body.lang-en [lang="zh"] {
            display: none !important;
        }

        /* --- 浮动玻璃切换按钮样式 (i18n Switcher) --- */
        .i18n-glass-btn {
            position: fixed;
            top: 25px;
            right: 25px;
            z-index: 9999;
            background: rgba(13, 39, 77, 0.6);
            /* 提升深色背景下的可见度 */
            backdrop-filter: blur(12px) saturate(180%);
            -webkit-backdrop-filter: blur(12px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50px;
            padding: 5px;
            display: flex;
            gap: 5px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .i18n-glass-btn:hover {
            transform: translateY(-2px);
            background: rgba(13, 39, 77, 0.75);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
        }

        .i18n-option {
            padding: 8px 18px;
            border-radius: 40px;
            font-size: 1.0rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            color: rgba(255, 255, 255, 0.7);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* 选中状态样式 */
        body.lang-zh .opt-zh,
        body.lang-en .opt-en {
            background: var(--cisco-blue);
            color: white;
            box-shadow: 0 4px 12px rgba(4, 159, 217, 0.4);
        }

        /* --- 核心布局样式 --- */
        header {
            background: linear-gradient(135deg, var(--cisco-midnight) 0%, #004466 100%);
            color: white;
            padding: 120px 0 140px;
            position: relative;
            clip-path: polygon(0 0, 100% 0, 100% 85%, 0 100%);
        }

        .hero-tag {
            background: rgba(255, 255, 255, 0.1);
            color: #61C6E2;
            padding: 6px 18px;
            border-radius: 20px;
            font-size: 1.0rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            display: inline-block;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        h1 {
            font-size: 3.5rem;
            margin-bottom: 24px;
            line-height: 1.1;
            color: white;
        }

        .hero-sub {
            font-size: 1.35rem;
            color: rgba(255, 255, 255, 0.85);
            max-width: 850px;
            margin-bottom: 40px;
        }

        .promise-box {
            background: var(--cisco-blue);
            padding: 35px;
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            gap: 25px;
            box-shadow: 0 20px 40px rgba(4, 159, 217, 0.25);
            margin-top: 40px;
            position: relative;
            z-index: 2;
        }

        .pulse {
            animation: pulse-blue 2s infinite;
        }

        @keyframes pulse-blue {
            0% {
                box-shadow: 0 0 0 0 rgba(4, 159, 217, 0.4);
            }

            70% {
                box-shadow: 0 0 0 15px rgba(4, 159, 217, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(4, 159, 217, 0);
            }
        }

        /* 新增内容区样式 */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            margin-top: -60px;
            position: relative;
            z-index: 10;
        }

        .card {
            background: white;
            padding: 40px;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-card);
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-hover);
        }

        .card h3 {
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .card-icon {
            font-size: 2.5rem;
            margin-bottom: 20px;
            display: block;
        }

        /* --- Global Container Base (彻底解决局促感) --- */
        .section-container {
            max-width: 1200px;
            margin: 80px auto;
            padding: 0 40px;
            /* 侧边增加固定内边距，确保小屏呼吸感 */
            box-sizing: border-box;
        }

        @media (max-width: 768px) {
            .section-container {
                padding: 0 25px;
                margin: 40px auto;
            }
        }
/* --- 垂直节奏与空白统一优化 (Vertical Rhythm Optimization) --- */
:root {
    --section-vertical-padding: 50px; /* 一级章节上下间距 */
    --subsection-vertical-padding: 25px; /* 二级子模块上下间距 */
    --card-internal-padding: 15px;      /* 卡片内部内边距 */
    --content-element-margin: 15px;     /* 段落、图表间的下边距 */
}

/* 统一一级章节间距 */
.section-container, 
header, 
footer,
#case-studies,
.lab-section,
.implementation-section,
.sec-dive-wrapper {
    padding-top: var(--section-vertical-padding) !important;
    padding-bottom: var(--section-vertical-padding) !important;
    margin-top: 0 !important;
    margin-bottom: 0 !important;
}

/* 统一子章节/模块间距 */
.arch-sub-section,
.perf-container,
.sec-sub-section,
.obs-sub-section {
    padding-top: var(--subsection-vertical-padding) !important;
    padding-bottom: 0 !important;
    margin-bottom: 0 !important;
}

/* 统一内部元素间距 */
p.section-lead, 
.story-grid, 
.philosophy-banner, 
.hive-concept-grid,
.metric-grid,
.metaphor-grid,
.hubble-metaphor-grid,
.maglev-analogy-box {
    margin-bottom: var(--content-element-margin) !important;
}

/* 特殊处理：消除首尾元素的额外间距以确保视觉对称 */
.section-container > *:first-child { margin-top: 0 !important; }
.section-container > *:last-child { margin-bottom: 0 !important; }

/* 修正卡片内部填充 */
.card, .analogy-card-refined, .pain-vertical-row, .zt-pillar, .success-story {
    padding: var(--card-internal-padding) !important;
}
        /* --- Chapter 01: Story Section Styles --- */
        .story-grid {
            display: grid;
            grid-template-columns: 1.25fr 0.75fr;
            gap: 60px;
            align-items: start;
        }

        .narrative-p p {
            font-size: 1.15rem;
            line-height: 1.85;
            color: #333;
            margin-bottom: 25px;
        }

        /* Analogy Card Refined */
        .analogy-card-refined {
            background: #ffffff;
            border: 1px solid #eef0f2;
            border-left: 6px solid #e74c3c;
            padding: 35px;
            border-radius: 4px 12px 12px 4px;
            margin: 40px 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.04);
        }

        .analogy-card-refined h4 {
            color: #002d54;
            font-size: 1.4rem;
            margin-top: 0;
            margin-bottom: 20px;
        }

        .analogy-features {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .analogy-features li {
            margin-bottom: 18px;
            padding-left: 25px;
            position: relative;
            line-height: 1.6;
        }

        .analogy-features li::before {
            content: "→";
            position: absolute;
            left: 0;
            color: #e74c3c;
            font-weight: bold;
        }

        .analogy-features li strong {
            color: #002d54;
            display: block;
            margin-bottom: 4px;
        }

        /* Swiss Fog Insight */
        .swiss-fog-insight {
            background: #eef5fc;
            padding: 20px 25px;
            border-radius: 8px;
            color: #003a6b;
            font-size: 1rem;
            border-left: 4px solid #0070d2;
            line-height: 1.6;
        }

        /* Visual Components Side-Bar */
        .story-aside {
            position: sticky;
            top: 100px;
        }

        .visual-component-card {
            background: #ffffff;
            border: 1px solid #e0e6ed;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 15px 35px rgba(0, 45, 84, 0.06);
        }

        .evo-header,
        .viz-header {
            text-align: center;
            font-weight: 800;
            color: #002d54;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 20px;
            font-size: 1.0rem;
        }

        /* Evolution Visual */
        .evo-visual-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .evo-box {
            width: 100%;
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: #f8fbff;
            border-radius: 12px;
            border: 1px solid #e0e6ed;
        }

        .evo-box.modern {
            background: #ffffff;
            border: 2px solid #0070d2;
        }

        .evo-icon {
            font-size: 1.8rem;
        }

        .evo-label span {
            font-weight: 700;
            color: #002d54;
            display: block;
        }

        .complexity {
            background: #002d54;
            color: #fff;
            padding: 1px 6px;
            border-radius: 4px;
            font-size: 1.0rem;
            font-family: 'Courier New', Courier, monospace;
        }

        .evo-connector {
            margin: 5px 0;
            line-height: 1;
        }

        /* Performance Viz (The Graph) */
        .performance-viz {
            width: 100%;
            height: auto;
        }

        .pulse-dot {
            animation: pulse-red 2s infinite;
        }

        @keyframes pulse-red {
            0% {
                r: 4;
                opacity: 1;
            }

            50% {
                r: 7;
                opacity: 0.5;
            }

            100% {
                r: 4;
                opacity: 1;
            }
        }

        .viz-caption {
            text-align: center;
            font-size: 1.0rem;
            color: #999;
            margin-top: 15px;
        }

        /* --- Responsive Layout --- */
        @media (max-width: 992px) {
            .story-grid {
                grid-template-columns: 1fr;
                gap: 40px;
            }

            .story-aside {
                position: static;
            }
        }


        /* --- Chapter 02: Pain Points Layout --- */
        .section-lead {
            font-size: 1.15rem;
            line-height: 1.8;
            color: #666;
            max-width: 900px;
            margin-bottom: 50px;
        }

        .pain-vertical-row {
            background: #ffffff;
            border: 1px solid #eef0f2;
            border-radius: 12px;
            padding: 40px;
            margin-bottom: 40px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.03);
        }

        .pain-vertical-row:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 45, 84, 0.1);
            border-color: #0070d2;
        }

        .pain-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
            border-bottom: 1px solid #f0f0f0;
            padding-bottom: 20px;
        }

        .pain-icon-circle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f4f7f9;
        }

        .performance .pain-icon-circle {
            background: #fdeaea;
        }

        .security .pain-icon-circle {
            background: #fff5e6;
        }

        .visibility .pain-icon-circle {
            background: #eef5fc;
        }

        .pain-header h3 {
            font-size: 1.7rem;
            color: #002d54;
            margin: 0;
        }

        .detail-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-bottom: 30px;
        }

        .detail-text strong {
            display: block;
            color: #0070d2;
            font-size: 1.1rem;
            margin-bottom: 12px;
        }

        .detail-text p {
            color: #444;
            line-height: 1.7;
            font-size: 1rem;
            margin: 0;
        }

        /* Deep Dive Boxes */
        .deep-dive-box {
            padding: 24px;
            border-radius: 8px;
            border-left: 5px solid #ccc;
        }

        .ai {
            border-left-color: #e74c3c;
            background: #fff8f8;
        }

        .zero-trust {
            border-left-color: #f39c12;
            background: #fffcf5;
        }

        .fingerprint {
            border-left-color: #0070d2;
            background: #f0f7ff;
        }

        .tag-label {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 4px;
            font-weight: 800;
            font-size: 1.0rem;
            text-transform: uppercase;
            margin-bottom: 12px;
        }

        .ai .tag-label {
            background: #fee2e2;
            color: #b91c1c;
        }

        .zero-trust .tag-label {
            background: #fef3c7;
            color: #92400e;
        }

        .fingerprint .tag-label {
            background: #e0f2fe;
            color: #0369a1;
        }

        /* Analogy Metaphor */
        .analogy-summary-box {
            margin-top: 60px;
            background: #f4f7f9;
            border-radius: 16px;
            padding: 40px;
            border: 1px dashed #0070d2;
        }

        .analogy-main-title {
            color: #002d54;
            font-size: 1.5rem;
            margin-bottom: 30px;
            text-align: center;
        }

        .analogy-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
        }

        .analogy-card {
            background: #ffffff;
            padding: 25px;
            border-radius: 12px;
            display: flex;
            gap: 15px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.02);
        }

        .analogy-icon {
            font-size: 2rem;
            line-height: 1;
        }

        .analogy-content h4 {
            margin: 0 0 10px 0;
            color: #0070d2;
            font-size: 1.1rem;
        }

        .analogy-content p {
            margin: 0;
            font-size: 1.0rem;
            color: #555;
            line-height: 1.5;
        }

        /* Responsive Adjustments */
        @media (max-width: 992px) {
            .detail-grid {
                grid-template-columns: 1fr;
                gap: 25px;
            }
        }

        @media (max-width: 768px) {
            .pain-vertical-row {
                padding: 30px;
            }

            .pain-header h3 {
                font-size: 1.4rem;
            }

            .analogy-card {
                flex-direction: column;
                text-align: center;
            }
        }

        /* --- 第 02 章：云原生哲学与帝国标准化底座 专属样式 --- */

        /* 3.1 哲学 Banner：深色背景适配 */
        .philosophy-banner {
            background: linear-gradient(135deg, var(--cisco-midnight) 0%, #004070 100%);
            color: #ffffff;
            /* 确保全局文字为白色 */
            padding: 60px;
            border-radius: 12px;
            margin-bottom: 80px;
            box-shadow: 0 20px 40px rgba(0, 33, 71, 0.15);
        }

        .philosophy-banner h2,
        .philosophy-banner h4 {
            color: #ffffff;
            /* 强制标题为白色 */
        }

        .philosophy-banner p {
            color: rgba(255, 255, 255, 0.9);
            /* 轻微透明的白色增加层级感 */
        }

        .philosophy-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 40px;
            margin-top: 40px;
        }

        .philo-item {
            border-left: 3px solid var(--cisco-blue);
            padding-left: 24px;
        }

        .philo-item h4 {
            color: var(--cisco-blue) !important;
            /* 核心关键字使用思科蓝 */
            margin-bottom: 12px;
            font-size: 1.3rem;
        }

        /* 3.2 标准化流水线样式 */
        .pipeline-track {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            margin: 30px 0;
        }

        .pipeline-node {
            flex: 1;
            background: #f8fafd;
            padding: 20px 20px;
            border-radius: 8px;
            text-align: center;
            position: relative;
            border: 1px solid #e1e8ed;
            transition: all 0.3s ease;
        }

        .pipeline-node:hover {
            border-color: var(--cisco-blue);
            transform: translateY(-5px);
        }

        .pipeline-node:not(:last-child)::after {
            content: "→";
            position: absolute;
            right: -15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--cisco-blue);
            font-weight: bold;
            font-size: 1.5rem;
        }

        /* 3.3 深度解析卡片 */
        .insight-highlight {
            background: #fffaf5;
            border-left: 6px solid #ff8c00;
            padding: 40px;
            margin: 60px 0;
        }

        /* 3.4 CNI 工作流时间轴 */
        .workflow-timeline {
            background: #f8fafd;
            padding: 60px;
            border-radius: 12px;
            margin-top: 80px;
        }

        .step-container {
            position: relative;
            padding-left: 50px;
            margin-bottom: 50px;
        }

        .step-container::before {
            content: '';
            position: absolute;
            left: -1px;
            top: 5px;
            width: 22px;
            height: 22px;
            background: white;
            border: 4px solid var(--cisco-blue);
            border-radius: 50%;
            z-index: 2;
        }

        .step-container:not(:last-child)::after {
            content: '';
            position: absolute;
            left: 8px;
            top: 30px;
            bottom: -30px;
            width: 2px;
            background: #ddd;
        }

        /* 响应式调整 */
        @media (max-width: 992px) {
            .pipeline-track {
                flex-direction: column;
            }

            .pipeline-node:not(:last-child)::after {
                content: "↓";
                right: 50%;
                top: auto;
                bottom: -25px;
                transform: translateX(50%);
            }

            .philosophy-banner {
                padding: 40px 25px;
            }
        }



        /* --- Chapter 4: Architecture - Section 4.1 Styles --- */
        .architecture-hero {
            padding: 80px 0;
            background-color: #ffffff;
        }

        .hive-concept-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            align-items: center;
            margin-top: 40px;
        }

        .hive-visual-container {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .definition-card {
            background: var(--cisco-gray);
            border-left: 6px solid var(--cisco-blue);
            padding: 40px;
            border-radius: 0 8px 8px 0;
        }

        .analogy-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 60px;
        }

        .analogy-box {
            border: 1px solid var(--cisco-border);
            padding: 30px;
            border-radius: 12px;
            transition: transform 0.3s ease;
        }

        .analogy-box:hover {
            transform: translateY(-5px);
            border-color: var(--cisco-blue);
        }

        .analogy-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            color: var(--cisco-midnight);
            font-weight: 700;
        }

        .highlight-text {
            color: var(--cisco-blue);
            font-weight: 700;
        }

        @media (max-width: 768px) {

            .hive-concept-grid,
            .analogy-comparison {
                grid-template-columns: 1fr;
            }
        }

        /* 局部样式控制：确保与主页面风格统一且克制 */
        .arch-sub-container {
            padding: 40px 0;
            color: #333;
        }

        .cisco-sub-header {
            font-size: 1.8rem;
            color: var(--cisco-midnight);
            margin-bottom: 20px;
            padding-left: 15px;
            border-left: 4px solid var(--cisco-blue);
        }

        .arch-diagram-box {
            background: #fff;
            border: 1px solid var(--cisco-border);
            border-radius: 12px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
        }

        .space-label {
            font-size: 1.0rem;
            font-weight: 800;
            text-transform: uppercase;
            color: var(--cisco-midnight);
            padding: 8px 12px;
            background: #f0f4f8;
            border-bottom: 3px solid var(--cisco-blue);
            display: inline-block;
            margin-bottom: 20px;
            letter-spacing: 1px;
        }

        .component-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .comp-card {
            background: #fff;
            border: 1px solid #e1e8ed;
            padding: 20px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .comp-card:hover {
            border-color: var(--cisco-blue);
            transform: translateY(-3px);
        }

        .ebpf-engine {
            background: var(--cisco-midnight);
            color: #fff;
            padding: 12px;
            border-radius: 6px;
            text-align: center;
            font-family: 'Courier New', monospace;
            font-size: 1.0rem;
            margin-bottom: 20px;
        }

        .bridge-separator {
            text-align: center;
            color: var(--cisco-blue);
            margin: 40px 0;
            position: relative;
        }

        .bridge-line {
            border-left: 2px dashed var(--cisco-blue);
            height: 40px;
            position: absolute;
            left: 50%;
            top: -35px;
        }

        .analogy-callout {
            background: rgba(0, 188, 235, 0.05);
            border-left: 5px solid var(--cisco-blue);
            padding: 25px;
            margin-top: 30px;
            border-radius: 0 8px 8px 0;
        }

        /* 响应式 */
        @media (max-width: 768px) {
            .component-grid {
                grid-template-columns: 1fr;
            }
        }

        /* 局部微调：确保在大屏和移动端都有极佳表现 */
        .feynman-visual-wrapper svg {
            max-height: 400px;
            transition: all 0.3s ease;
        }

        .pillar-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .pillar-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 188, 235, 0.1) !important;
        }

        @media (max-width: 768px) {
            .feynman-visual-wrapper {
                padding: 20px;
            }

            .sub-section-header h3 {
                font-size: 1.5rem;
            }
        }


/* 针对 04 章节模块化调整的增量样式 */
.arch-sub-section {
    padding: 40px 0;
    animation: fadeInUp 0.8s ease-out;
}

.cisco-sub-header {
    font-size: 1.8rem;
    color: var(--cisco-midnight);
    margin-bottom: 30px;
    padding-left: 20px;
    border-left: 5px solid var(--cisco-blue);
}

/* 增强分割线的品牌感 */
hr {
    opacity: 0.5;
    position: relative;
}

hr::after {
    content: "CILIUM ARCHITECTURE";
    position: absolute;
    top: -10px;
    right: 0;
    background: #F8FAFC; /* 匹配 body 背景 */
    padding: 0 15px;
    font-size: 1.0rem;
    color: var(--cisco-slate);
    letter-spacing: 2px;
    font-weight: bold;
}

@keyframes fadeInUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

/* 针对 Chapter 05 的细节增强 */
#core-values .value-block {
    padding: 30px;
    background: rgba(255, 255, 255, 0.4);
    border-radius: 12px;
    transition: background 0.3s ease;
}

#core-values .value-block:hover {
    background: rgba(255, 255, 255, 0.8);
}

#core-values span[style*="font-weight: 800"] {
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    letter-spacing: 1px;
}

        /* Deep Dive Performance 专属样式：保持克制，复用主色调 */
        .perf-container {
            padding: 40px 0;
            color: #333;
        }

        .cisco-sub-header {
            font-size: 1.85rem;
            color: var(--cisco-midnight);
            margin-bottom: 25px;
            padding-left: 15px;
            border-left: 5px solid var(--cisco-blue);
        }

        /* 性能指标卡片 */
        .metric-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }

        .metric-card {
            background: #fff;
            border: 1px solid var(--cisco-border);
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .metric-card:hover {
            transform: translateY(-5px);
            border-color: var(--cisco-blue);
        }

        .metric-value {
            font-size: 2rem;
            font-weight: 800;
            color: var(--cisco-blue);
            display: block;
        }

        .metric-label {
            font-size: 1.0rem;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* 性能对比表 */
        .perf-table-wrapper {
            overflow-x: auto;
            background: #fff;
            border-radius: 8px;
            border: 1px solid #e1e8ed;
            margin: 30px 0;
        }

        .perf-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 1.0rem;
        }

        .perf-table th {
            background: #f8fafd;
            padding: 15px;
            text-align: left;
            border-bottom: 2px solid #eef2f6;
        }

        .perf-table td {
            padding: 15px;
            border-bottom: 1px solid #eef2f6;
        }

        .perf-highlight {
            font-weight: bold;
            color: var(--cisco-blue);
        }

        /* 逻辑说明块 */
        .logic-box {
            background: #fdfdfd;
            border: 1px solid #eee;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 40px;
        }

        .algorithm-tag {
            display: inline-block;
            padding: 4px 10px;
            background: var(--cisco-midnight);
            color: #fff;
            font-size: 1.0rem;
            border-radius: 4px;
            margin-bottom: 10px;
        }


/* 针对 Chapter 06 性能数据的微调 */
#performance-dive .metric-card {
    background: linear-gradient(to bottom, #ffffff, #f0f7ff);
    border: 1px solid rgba(4, 159, 217, 0.2);
}

#performance-dive .perf-table th {
    color: var(--cisco-midnight);
    font-weight: 800;
}

#performance-dive .algorithm-tag {
    box-shadow: 0 2px 6px rgba(13, 39, 77, 0.15);
}

/* --- 第 07 章：身份感知安全 专属深度样式 --- */
.sec-dive-wrapper { padding: 80px 0; background-color: #ffffff; color: #333; }
.sec-dive-container { max-width: 1200px; margin: 0 auto; padding: 0 24px; }

/* 费曼类比卡片 */
.metaphor-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin: 50px 0; }
.metaphor-card {
    padding: 40px; border-radius: 12px; position: relative; transition: all 0.3s ease; border-top: 5px solid transparent;
}
.metaphor-card.legacy { border-top-color: #e63946; background: #fffafb; }
.metaphor-card.cilium { border-top-color: var(--cisco-blue); background: #f0faff; }

/* 零信任支柱网格 */
.zt-pillar-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 30px; margin: 50px 0; }
.zt-pillar {
    background: white; border: 1px solid var(--cisco-border); padding: 35px;
    border-radius: 12px; border-bottom: 4px solid var(--cisco-blue); transition: transform 0.3s ease;
}
.zt-pillar:hover { transform: translateY(-5px); box-shadow: 0 15px 40px rgba(0,0,0,0.08); }

/* YAML 编辑器样式 */
.code-block-wrapper {
    background: #1e1e1e; border-radius: 8px; margin: 25px 0; border: 1px solid #333;
    overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.2);
}
.code-header { background: #2d2d2d; padding: 10px 20px; font-family: monospace; font-size: 1.0rem; color: #aaa; border-bottom: 1px solid #3d3d3d; }
.code-content { padding: 25px; font-family: 'Consolas', 'Monaco', monospace; font-size: 1.0rem; line-height: 1.6; color: #d4d4d4; white-space: pre-wrap; }
.k { color: #569cd6; } /* 关键字 */
.v { color: #ce9178; } /* 值 */
.c { color: #6a9955; font-style: italic; } /* 注释 */

/* 技术路线图步骤 */
.tech-roadmap { background: var(--cisco-midnight); color: white; padding: 60px; border-radius: 16px; margin: 60px 0; }
.roadmap-step { margin-bottom: 40px; border-left: 3px solid rgba(0, 188, 235, 0.4); padding-left: 30px; position: relative; }
.roadmap-step::before {
    content: ''; position: absolute; left: -9px; top: 0; width: 15px; height: 15px;
    background: var(--cisco-blue); border-radius: 50%;
}

@media (max-width: 992px) { .metaphor-grid { grid-template-columns: 1fr; } }

/* 针对 Chapter 07 安全章节的视觉增强 */
#security-identity-chapter .metaphor-card {
    /* 增加卡片的深度感 */
    box-shadow: 0 10px 30px rgba(13, 39, 77, 0.05);
    border-radius: 16px;
}

#security-identity-chapter .tech-roadmap {
    /* 使用深蓝背景色块强调机制的严密性 */
    background: linear-gradient(135deg, var(--cisco-midnight) 0%, #0a1b33 100%);
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.2);
}

#security-identity-chapter .zt-pillar {
    /* 强化支柱卡片的边框感 */
    border: 1px solid rgba(4, 159, 217, 0.1);
    background: #ffffff;
}

/* --- Hubble Deep Dive: SRE & Observability Extended Styles --- */
.hubble-dive-content {
    margin-top: 80px;
    padding-top: 60px;
    border-top: 1px solid var(--cisco-border);
}

/* 费曼类比卡片 */
.hubble-metaphor-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 30px;
    margin: 40px 0 60px;
}
.hubble-metaphor-card {
    padding: 35px;
    border-radius: 12px;
    border: 1px solid var(--cisco-border);
}
.hubble-metaphor-card.legacy { background: #fdfdfd; border-left: 6px solid #a0aec0; }
.hubble-metaphor-card.smart { background: #f0faff; border-left: 6px solid var(--cisco-blue); }

/* SRE 黄金信号增强布局 */
.golden-signals-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
    gap: 30px;
    margin: 40px 0;
}
.signal-card-v2 {
    background: #fff;
    border: 1px solid #e1e8ed;
    padding: 30px;
    border-radius: 12px;
    transition: all 0.3s ease;
}
.signal-card-v2:hover { border-color: var(--cisco-blue); transform: translateY(-3px); box-shadow: 0 10px 25px rgba(0,0,0,0.05); }

.signal-card-header {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 1px solid #eee;
}
.signal-card-header .signal-icon { font-size: 1.8rem; }
.signal-card-header .signal-title { font-size: 1.4rem; font-weight: 800; color: var(--cisco-midnight); }

.signal-detail-list { list-style: none; padding: 0; margin: 0; }
.signal-detail-list li { margin-bottom: 15px; }
.signal-detail-list .detail-label { display: block; font-weight: 700; color: var(--cisco-blue); margin-bottom: 4px; }
.signal-detail-list .detail-desc { font-size: 1.0rem; color: #555; line-height: 1.6; }

/* 深度修复的 JSON 采样区 */
.json-forensics-box {
    background: #1e1e1e;
    color: #d4d4d4;
    padding: 30px;
    border-radius: 8px;
    font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
    font-size: 1.0rem;
    line-height: 1.6;
    margin: 30px 0;
    border: 1px solid #333;
    overflow-x: auto;
    white-space: pre; /* 关键修复：保留缩进 */
}
.j-key { color: #9cdcfe; }
.j-str { color: #ce9178; }
.j-num { color: #b5cea8; }
.j-cmt { color: #6a9955; font-style: italic; }

@media (max-width: 992px) {
    .golden-signals-grid { grid-template-columns: 1fr; }
    .hubble-metaphor-grid { grid-template-columns: 1fr; }
}

/* 针对 Chapter 08 可观测性的视觉微调 */
#observability-hubble .signal-card-v2 {
    background: #ffffff;
    border: 1px solid #eef2f6;
    /* 增加一个微妙的左侧颜色条，增强信号感 */
}

#observability-hubble .json-forensics-box {
    box-shadow: inset 0 0 20px rgba(0,0,0,0.3);
    border: 1px solid #333;
    /* 模拟真实的 IDE 终端感 */
}

/* 信号图标呼吸灯效果 */
#observability-hubble .signal-icon {
    display: inline-block;
    animation: icon-float 3s ease-in-out infinite;
}

@keyframes icon-float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
}

/* --- Chapter : AI & Technological Frontiers Styles --- */
.ai-frontier-wrapper {
    padding: 80px 0;
    background-color: #fff;
    border-top: 1px solid var(--cisco-border);
}

/* 磁悬浮轨道类比视觉 */
.maglev-analogy-box {
    background: linear-gradient(135deg, var(--cisco-midnight) 0%, #004070 100%);
    color: white;
    padding: 50px;
    border-radius: 16px;
    margin: 50px 0;
    position: relative;
    overflow: hidden;
}
.maglev-analogy-box h4 { color: var(--cisco-blue); margin-bottom: 25px; }

/* 技术进展网格 */
.tech-prog-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 30px;
    margin: 40px 0;
}
.tech-prog-card {
    background: #f8fafd;
    border: 1px solid #eef2f6;
    padding: 30px;
    border-radius: 12px;
    border-top: 4px solid var(--cisco-blue);
}
.tech-prog-card code {
    background: rgba(4, 159, 217, 0.1);
    color: var(--cisco-blue);
    padding: 2px 6px;
    border-radius: 4px;
    font-weight: bold;
}

/* 引用样式 */
.executive-quote {
    background: #fff;
    border-left: 6px solid var(--cisco-sky);
    padding: 30px;
    margin: 40px 0;
    box-shadow: 0 10px 25px rgba(0,0,0,0.05);
    font-style: italic;
    position: relative;
}
.quote-author {
    display: block;
    margin-top: 15px;
    font-weight: bold;
    color: var(--cisco-midnight);
    font-style: normal;
}

/* 案例卡片 */
.case-study-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 25px;
    margin-top: 40px;
}
.case-card {
    background: white;
    border: 1px solid var(--cisco-border);
    padding: 25px;
    border-radius: 8px;
}

@media (max-width: 768px) {
    .maglev-analogy-box { padding: 30px; }
}

/* --- Chapter 09: Case Studies Styles --- */
#case-studies {
    padding: 100px 0;
    background-color: #f8fafd;
}

.success-story {
    background: var(--white);
    border: 1px solid var(--cisco-platinum);
    border-radius: var(--radius-lg);
    padding: 45px;
    margin-bottom: 40px;
    display: grid;
    grid-template-columns: 1.5fr 0.5fr;
    gap: 40px;
    box-shadow: var(--shadow-card);
    transition: all 0.3s ease;
}

.success-story:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-hover);
    border-color: var(--cisco-blue);
}

.story-content h3 {
    font-size: 1.6rem;
    color: var(--cisco-midnight);
}

.story-content p {
    line-height: 1.8;
    color: var(--cisco-slate);
}

/* 架构师点评框 */
.story-analysis {
    background: #f0f7ff;
    padding: 30px;
    border-radius: 12px;
    border-left: 5px solid var(--cisco-blue);
    font-size: 1.0rem;
    color: var(--cisco-midnight);
    height: fit-content;
}

.story-analysis strong {
    display: block;
    margin-bottom: 10px;
    color: var(--cisco-blue);
    text-transform: uppercase;
    letter-spacing: 1px;
}

.story-features {
    list-style: none;
    padding: 0;
    margin-top: 20px;
}

.story-features li {
    padding-left: 25px;
    position: relative;
    margin-bottom: 12px;
}

.story-features li::before {
    content: "✓";
    position: absolute;
    left: 0;
    color: var(--cisco-sky);
    font-weight: bold;
}

@media (max-width: 992px) {
    .success-story {
        grid-template-columns: 1fr;
        padding: 30px;
    }
    .story-analysis {
        border-left: none;
        border-top: 5px solid var(--cisco-blue);
    }
}

/* --- Chapter 08: Cluster Mesh Styles --- */
.mesh-section {
    padding: 80px 0;
    background-color: #fcfcfc;
}

/* 费曼类比：群岛 vs 大陆 */
.mesh-analogy-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 40px;
    margin: 40px 0;
}
.mesh-analogy-card {
    padding: 40px;
    border-radius: 12px;
    position: relative;
    border: 1px solid var(--cisco-border);
}
.mesh-analogy-card.island { background: #fdfdfd; border-top: 5px solid #a0aec0; }
.mesh-analogy-card.continent { background: #f0faff; border-top: 5px solid var(--cisco-blue); }

/* 功能特性网格 */
.mesh-feature-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 25px;
    margin: 40px 0;
}
.mesh-feature-item {
    background: white;
    border: 1px solid #e1e8ed;
    padding: 30px;
    border-radius: 12px;
    transition: all 0.3s ease;
}
.mesh-feature-item:hover { border-color: var(--cisco-blue); transform: translateY(-5px); }
.mesh-feature-item h5 { color: var(--cisco-midnight); margin-bottom: 15px; font-size: 1.5rem; }

/* 商业红利看板 */
.mesh-roi-box {
    background: var(--cisco-midnight);
    color: white;
    padding: 50px;
    border-radius: 16px;
    margin-top: 60px;
}
.mesh-stat-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 30px;
    margin-top: 30px;
    text-align: center;
}
.mesh-stat-val { font-size: 2.5rem; font-weight: 800; color: var(--cisco-blue); display: block; }

/* --- Chapter 09: Interactive Lab Styles --- */
.lab-section {
    padding: 100px 0;
    background-color: #f8fafd;
    border-bottom: 1px solid var(--cisco-platinum);
}

.lab-terminal {
    background: #0d1117;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 40px 80px rgba(0, 0, 0, 0.4);
    margin-top: 40px;
    border: 1px solid #30363d;
}

.term-bar {
    background: #161b22;
    padding: 12px 20px;
    display: flex;
    gap: 8px;
    align-items: center;
    border-bottom: 1px solid #30363d;
}

.term-dot { width: 12px; height: 12px; border-radius: 50%; }
.dot-red { background: #ff5f56; }
.dot-yellow { background: #ffbd2e; }
.dot-green { background: #27c93f; }

.term-body {
    padding: 30px;
    font-family: 'SF Mono', 'Fira Code', 'Consolas', monospace;
    min-height: 480px;
    display: grid;
    grid-template-columns: 1.6fr 1fr;
    gap: 30px;
}

.log-stream {
    color: #3fb950;
    font-size: 1.0rem;
    line-height: 1.6;
    border-right: 1px solid #30363d;
    padding-right: 20px;
    height: 380px;
    overflow-y: auto;
    white-space: pre-wrap;
}

.status-map {
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    padding-left: 10px;
}

.status-display-box {
    background: #161b22;
    padding: 25px;
    border-radius: 8px;
    border: 1px solid #30363d;
}

.status-item {
    margin-bottom: 20px;
    font-size: 1.0rem;
}

.status-label {
    display: block;
    color: #8b949e;
    font-size: 1.0rem;
    text-transform: uppercase;
    margin-bottom: 5px;
}

.status-value {
    font-weight: bold;
    color: #58a6ff;
}

/* 实验室控制按钮 */
.lab-controls {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 15px;
    margin-top: 30px;
}

.lab-btn {
    background: white;
    border: 1px solid var(--cisco-platinum);
    padding: 15px 20px;
    border-radius: 8px;
    text-align: left;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
}

.lab-btn:hover {
    border-color: var(--cisco-blue);
    transform: translateY(-3px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
}

.lab-btn .step-num {
    font-size: 1.0rem;
    font-weight: 800;
    color: var(--cisco-blue);
    margin-bottom: 5px;
}

.lab-btn span {
    font-size: 1.0rem;
    font-weight: 600;
    color: var(--cisco-midnight);
}

@media (max-width: 992px) {
    .term-body { grid-template-columns: 1fr; }
    .log-stream { border-right: none; border-bottom: 1px solid #30363d; padding-bottom: 20px; height: 250px; }
}

/* --- Chapter 10: Implementation & Troubleshooting Styles --- */
.implementation-section {
    padding: 80px 0;
    background-color: #ffffff;
}

/* 兼容性矩阵表格 */
.compat-matrix {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    margin: 30px 0;
    border-radius: 8px;
    overflow: hidden;
    border: 1px solid var(--cisco-platinum);
}
.compat-matrix th { background: var(--cisco-midnight); color: white; padding: 15px; text-align: left; }
.compat-matrix td { padding: 15px; border-bottom: 1px solid var(--cisco-platinum); background: #fdfdfd; }

/* 迁移路径时间轴 */
.migration-path {
    position: relative;
    padding: 20px 0;
    margin: 40px 0;
}
.migration-step {
    display: flex;
    gap: 25px;
    margin-bottom: 40px;
    position: relative;
}
.migration-step::before {
    content: ''; position: absolute; left: 17px; top: 35px; bottom: -25px;
    width: 2px; background: var(--cisco-platinum);
}
.migration-step:last-child::before { display: none; }
.step-icon {
    width: 36px; height: 36px; background: var(--cisco-blue); color: white;
    border-radius: 50%; display: flex; align-items: center; justify-content: center;
    font-weight: bold; flex-shrink: 0; z-index: 2;
}

/* 专家工具箱卡片 */
.expert-toolbox {
    background: #1a1a1a;
    color: #e4e4e4;
    border-radius: 12px;
    padding: 40px;
    margin-top: 50px;
    border: 1px solid #333;
}
.tool-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 25px;
    margin-top: 30px;
}
.tool-item {
    background: rgba(255,255,255,0.05);
    padding: 20px;
    border-radius: 8px;
    border-top: 3px solid var(--cisco-blue);
}
.tool-item code { color: var(--cisco-sky); font-weight: bold; }

.best-practice-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 30px;
    margin-top: 40px;
}

/* 统一卡片组件：支持 Hover 升起与阴影变换 */
.tech-card, 
.visual-component-card, 
.analogy-card {
    background: var(--white);
    border: 1px solid var(--cisco-platinum);
    border-radius: var(--radius-lg);
    padding: 30px;
    transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.3s ease;
    height: 100%;
    display: flex;
    flex-direction: column;
}

.tech-card:hover, 
.visual-component-card:hover, 
.analogy-card:hover {
    transform: translateY(-10px);
    box-shadow: var(--shadow-hover);
    border-color: var(--cisco-blue);
}

/* 基础设施网格布局容器 */
.tech-section-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr); /* 第一行两个等宽卡片 */
    gap: 30px;
    margin-top: 40px;
    margin-bottom: 40px;
}

/* 统一技术信息卡片 */
.tech-info-card {
    background: var(--white);
    border: 1px solid var(--cisco-platinum);
    border-radius: var(--radius-lg);
    padding: 30px;
    transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.3s ease;
}

.tech-info-card:hover {
    transform: translateY(-10px);
    box-shadow: var(--shadow-hover);
    border-color: var(--cisco-blue);
}

/* 占据 100% 宽度的特殊类 */
.grid-span-all {
    grid-column: 1 / -1; /* 跨越所有网格列 */
}

/* 标题样式：严格遵循不调小字号原则 */
.tech-info-card h4 {
    color: var(--cisco-midnight);
    margin-bottom: 20px;
    line-height: 1.4;
    font-size: 1.25rem; /* 稍微加强标题层级，不缩小 */
}

/* 正文样式 */
.tech-info-card p, 
.tech-info-card li {
    font-size: 1.0rem;
    line-height: 1.8;
    color: var(--cisco-slate);
}

/* 内部列表去标点 */
.tech-info-card ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

/* 改进的通信模型网格：横向排布以利用 100% 宽度 */
.model-flow-flex {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 40px; /* 增加间距消除拥挤感 */
    margin-top: 25px;
}

.flow-box {
    background: #f8fafd;
    padding: 30px; /* 增加内边距增强呼吸感 */
    border-radius: 12px;
}

/* 响应式调整 */
@media (max-width: 992px) {
    .tech-section-grid {
        grid-template-columns: 1fr;
    }
    .model-flow-flex {
        grid-template-columns: 1fr;
    }
}

/* 第二章节技术部分布局 */
.tech-sub-section {
    margin-top: 60px;
}

.tech-sub-section h3 {
    font-size: 1.8rem;
    color: var(--cisco-midnight);
    padding-left: 15px;
    margin-bottom: 25px;
}

.tech-info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 30px;
    margin-top: 30px;
}

/* 复用已有样式并确保 Hover 效果 */
.tech-info-card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    padding: 25px;
    border-radius: 12px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(0, 188, 235, 0.15);
}

.tech-info-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 15px 35px rgba(0, 80, 115, 0.2);
    border-color: var(--cisco-sky);
}

.tech-info-card h4 {
    margin-top: 0;
    color: var(--cisco-sky);
    font-size: 1.3rem;
    margin-bottom: 15px;
}

/* 响应式适配 */
@media (max-width: 768px) {
    .tech-info-grid {
        grid-template-columns: 1fr;
    }
}

/* --- 全量卡片交互动效增强 --- */
/* 统一目标：.card, .tech-info-card, .metric-card, .comp-card, .pipeline-node, 
   .zt-pillar, .signal-card-v2, .tech-prog-card, .success-story, .lab-btn, .metaphor-card */

.card,
.tech-info-card,
.metric-card,
.comp-card,
.pipeline-node,
.zt-pillar,
.signal-card-v2,
.tech-prog-card,
.success-story,
.lab-btn,
.metaphor-card,
.value-block,
.philo-item {
    transition: transform 0.4s cubic-bezier(0.165, 0.84, 0.44, 1), 
                box-shadow 0.4s ease, 
                border-color 0.3s ease !important;
    cursor: default;
}

/* 悬停升起与阴影扩散 */
.card:hover,
.tech-info-card:hover,
.metric-card:hover,
.comp-card:hover,
.pipeline-node:hover,
.zt-pillar:hover,
.signal-card-v2:hover,
.tech-prog-card:hover,
.success-story:hover,
.lab-btn:hover,
.metaphor-card:hover,
.value-block:hover {
    transform: translateY(-8px) !important;
    box-shadow: var(--shadow-hover) !important;
    border-color: var(--cisco-blue) !important;
}

/* 特殊处理：实验室按钮应有手型指针 */
.lab-btn {
    cursor: pointer !important;
}

/* 特殊处理：哲学条目作为侧边增强，采用平滑侧移 */
.philo-item:hover {
    background: rgba(4, 159, 217, 0.05);
    transform: translateX(8px);
    border-left-width: 5px;
}

/* 响应式微调：移动端减弱位移，防止布局跳动 */
@media (max-width: 768px) {
    .card:hover, .tech-info-card:hover, .value-block:hover {
        transform: translateY(-4px) !important;
    }
}

/* --- 第六章性能专题布局与交互 --- */
.perf-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 24px;
    margin: 30px 0;
}

/* 统一 tech-info-card 的 Hover 效果 */
.tech-info-card {
    transition: transform 0.4s cubic-bezier(0.165, 0.84, 0.44, 1), 
                box-shadow 0.4s ease, 
                border-color 0.3s ease;
    cursor: default;
}

.metric-highlight {
    font-size: 2.2rem;
    font-weight: 800;
    color: var(--cisco-blue);
    display: block;
    margin-bottom: 5px;
}

/* --- 移动端专项修复 (Mobile Responsive Fixes) --- */
@media (max-width: 768px) {
    /* 1. 修复 Chapter 04 Socket Hook 超出边界 */
    .kernel-engine > div:last-child {
        grid-template-columns: 1fr !important; /* 改为单列排列 */
        gap: 10px;
    }

    /* 2. 修复 Chapter 05 SVG 滑动功能 */
    .feynman-visual-wrapper {
        overflow-x: auto; /* 开启水平滑动 */
        -webkit-overflow-scrolling: touch;
        padding: 20px !important;
    }
    .feynman-visual-wrapper svg {
        min-width: 800px; /* 强制 SVG 保持可读大小，触发滑动 */
        height: auto;
    }

    /* 3, 7, 8, 9. 修复所有并列布局为上下排列 */
    /* 涵盖：重塑内核vs深度解析、YAML代码块、Mesh卡片、兼容性矩阵vs迁移路径 */
    .tech-sub-section > div[style*="display: grid"],
    #security-identity-chapter .content-wrapper > div[style*="display: grid"],
    #cluster-mesh .mesh-analogy-grid,
    #implementation-guide > .container > div[style*="display: grid"] {
        grid-template-columns: 1fr !important;
        gap: 20px !important;
    }

    /* 4. 修复 Chapter 05 三个核心价值卡片宽度 */
    #value-what div[style*="display: grid"] {
        grid-template-columns: 1fr !important;
    }

    /* 5. 修复 Chapter 06 Sidecar-free 卡片上下排列 */
    div[style*="display: flex"][style*="gap: 40px"] {
        flex-direction: column !important;
        gap: 20px !important;
    }

    /* 6. 修复 Chapter 06 表格滑动与 Maglev 布局 */
    .perf-table-wrapper {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        margin-bottom: 15px;
    }
    .perf-table {
        min-width: 600px; /* 确保表格不被挤压 */
    }
    /* 针对 Maglev LB 所在的 Grid 容器 */
    #perf-benchmarks div[style*="grid-template-columns"] {
        grid-template-columns: 1fr !important;
    }

    /* 通用：修正 section 内边距，增加呼吸感 */
    .section-container {
        padding: 0 20px !important;
    }
}

/* --- 响应式网格增强：解决并列排版在移动端的局限 --- */
.grid-adaptive-cols {
    display: grid;
    /* 核心逻辑：最小宽度 320px，否则自动塌陷为一列 */
    grid-template-columns: repeat(auto-fit, minmax(min(100%, 320px), 1fr));
    gap: 30px;
    margin-top: 25px;
}

/* 针对复杂布局（如 YAML 对比）的断点强制堆叠 */
@media (max-width: 992px) {
    .grid-adaptive-cols {
        grid-template-columns: 1fr !important;
        gap: 20px;
    }
}

/* --- 增强代码证据块的视觉呈现 --- */
.code-block-wrapper {
    background: #1e1e1e;
    border-radius: 8px;
    border: 1px solid var(--cisco-platinum);
    margin-top: 15px;
    overflow: hidden;
}

.code-header {
    background: #333;
    color: #eee;
    padding: 8px 15px;
    font-size: 0.8rem;
    font-weight: bold;
    font-family: var(--font-main);
    border-bottom: 1px solid #444;
}

.code-content {
    padding: 15px;
    font-family: 'Courier New', Courier, monospace;
    font-size: 0.85rem;
    line-height: 1.6;
    color: #d4d4d4;
    white-space: pre-wrap; /* 允许在移动端自动换行 */
    word-break: break-all;
    background: #1a1a1a;
}

/* 适配移动端的网格自适应 */
.grid-adaptive-cols {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(min(100%, 450px), 1fr));
    gap: 25px;
}

@media (max-width: 992px) {
    .grid-adaptive-cols {
        grid-template-columns: 1fr !important;
    }
}

/* --- Incremental CSS for 10-Year Timeline --- */
.timeline-section {
    position: relative;
    padding: 60px 0;
}
.timeline-container {
    position: relative;
}
.timeline-line {
    position: absolute;
    left: 20px;
    top: 0;
    bottom: 0;
    width: 2px;
    background: var(--cisco-platinum);
}
.timeline-item {
    position: relative;
    margin-bottom: 40px;
    padding-left: 60px;
}
.timeline-dot {
    position: absolute;
    left: 11px;
    top: 5px;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: var(--white);
    border: 4px solid var(--cisco-blue);
    z-index: 2;
}
.timeline-content {
    background: var(--white);
    padding: 20px;
    border-radius: 8px;
    border: 1px solid var(--cisco-platinum);
}
.timeline-date {
    font-weight: 800;
    color: var(--cisco-blue);
    margin-bottom: 5px;
    display: block;
}
@media (max-width: 768px) {
    .timeline-item { padding-left: 45px; }
    .timeline-line { left: 15px; }
    .timeline-dot { left: 6px; }
}

/* --- 修复深色卡片文字对比度 (Incremental CSS) --- */
.tech-info-card.dark-theme p,
.tech-info-card.dark-theme li {
    color: var(--white) !important; /* 强制调为白色 */
    opacity: 0.9; /* 保持轻微透明度以增加层级感 */
}

/* --- eBPF 三部曲导航栏通用样式 (Cisco 风格) --- */
.trilogy-footer-nav {
    margin: 80px auto 40px;
    padding: 40px 20px;
    background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
    border-top: 1px solid #e0e0e0;
    border-radius: 12px;
}

.trilogy-title {
    text-align: center;
    color: var(--cisco-midnight);
    margin-bottom: 30px;
    font-weight: 700;
}

/* 栅格布局：自动适应手机与桌面端 */
.trilogy-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
    max-width: 1100px;
    margin: 0 auto;
}

/* 卡片基础样式 */
.trilogy-card {
    background: #fff;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    padding: 24px;
    text-decoration: none;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 100%; /* 确保高度对齐 */
}

/* 悬停效果：向上浮动并加深 Cisco Blue 阴影 */
.trilogy-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 12px 24px rgba(0, 81, 186, 0.1);
    border-color: var(--cisco-blue);
}

.trilogy-card .part-tag {
    font-size: 0.75rem;
    font-weight: 800;
    color: var(--cisco-sky);
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 12px;
    display: block;
}

.trilogy-card h4 {
    margin: 0 0 12px 0;
    color: var(--cisco-midnight);
    font-size: 1.2rem;
    line-height: 1.4;
}

.trilogy-card p {
    font-size: 0.9rem;
    color: #666;
    line-height: 1.6;
    margin-bottom: 20px;
}

/* 底部链接指示器 */
.link-text {
    font-weight: 600;
    color: var(--cisco-blue);
    display: flex;
    align-items: center;
    font-size: 0.95rem;
}

.link-text::after {
    content: ' →';
    transition: margin-left 0.3s;
}

.trilogy-card:hover .link-text::after {
    margin-left: 8px;
}

/* --- Incremental CSS for K8s Model & Topo --- */
.k8s-const-box {
    background: #f0f4f8;
    border-left: 6px solid var(--cisco-midnight);
    padding: 25px;
    margin: 30px 0;
}
.k8s-const-box li {
    margin-bottom: 12px;
    color: var(--cisco-midnight) !important;
    font-weight: 500;
}
.topo-card {
    background: linear-gradient(135deg, #ffffff 0%, #f0fdf4 100%);
    border: 1px solid #bbf7d0;
}

    </style>
</head>

<body class="lang-zh">
    <nav class="i18n-glass-btn" role="navigation" aria-label="Language Selector">
        <div class="i18n-option opt-zh" onclick="setLanguage('zh')" role="button" tabindex="0">中文</div>
        <div class="i18n-option opt-en" onclick="setLanguage('en')" role="button" tabindex="0">EN</div>
    </nav>

    <main id="main-content">
        <header>
            <div class="container">
                <h1>
                    <span lang="zh">Cilium:<br>eBPF 重塑云原生基础设施</span>
                    <span lang="en">Cilium:<br>eBPF Reshaping Cloud-Native Infrastructure</span>
                </h1>

                <div class="post-meta" style="color: rgba(255,255,255,0.6); font-size: 0.9em; margin-bottom: 20px;">
                    <span lang="zh">发布日期：2026-01-09</span><span lang="en">Published: 2026-01-09</span>
                    <span style="margin: 0 10px; opacity: 0.5;">|</span>
                    <span lang="zh">最后更新：2026-01-11</span><span lang="en">Last Updated: 2026-01-11</span>
                </div>

                <p class="hero-sub">
                    <span lang="zh">连接、安全与可观测性的终极数据面。本白皮书融合了叙事洞察、底层架构解构及全球巨头的大规模落地经验。</span>
                    <span lang="en">The ultimate data plane for connectivity, security, and observability. This
                        whitepaper integrates narrative insights, architectural deconstruction, and large-scale
                        deployment experiences.</span>
                </p>

                <div class="promise-box pulse">
                    <div style="font-size: 3rem;" aria-hidden="true">🏛️</div>
                    <div>
                        <strong lang="zh" style="font-size: 1.2rem; display: block; margin-bottom: 5px;">今日承诺:</strong>
                        <strong lang="en" style="font-size: 1.2rem; display: block; margin-bottom: 5px;">Today's
                            Promise:</strong>
                        <p lang="zh">阅读本篇，你将掌握 ClusterMesh 跨云架构，获得量化的 ROI 模型以节省 30% 以上的云账单，并理解支撑 OpenAI 万级 GPU 算力的网络底座。
                        </p>
                        <p lang="en">By reading this, you will master ClusterMesh cross-cloud architecture, gain a
                            quantified ROI model to save 30%+ on cloud bills, and understand the foundation supporting
                            OpenAI's massive GPU clusters.</p>
                    </div>
                </div>
            </div>
        </header>

        <section id="story" class="section-container">
            <div class="content-wrapper">
                <h2 lang="zh" style="font-size: 2.5rem; margin-top: 10px; margin-bottom: 10px;">01. 快递员、纸条与一万个住址</h2>
                <h2 lang="en" style="font-size: 2.5rem; margin-top: 10px; margin-bottom: 10px;">01. Couriers, Slips, and 10,000 Addresses</h2>

                <div class="story-grid">
                    <div class="story-main-text">
                        <div class="narrative-p">
                            <p lang="zh">
                                想象你在经营一家巨大的快递公司（Kubernetes 集群）。最初，你只有 10 个快递员（Pod），你给每个快递员一张纸条，上面写着所有人的家庭住址（IP
                                路由表）。每增加一个新员工，你就给所有人发一张新纸条。
                            </p>
                            <p lang="en">
                                Imagine running a massive delivery company (K8s Cluster). Initially, you have 10
                                couriers (Pods). You give each courier a slip of paper with everyone's home address (IP
                                Routing Table). Every time a new employee joins, you issue a new slip to everyone.
                            </p>
                        </div>

                        <div class="analogy-card-refined">
                            <h4 lang="zh">当快递员增加到 10,000 名时...</h4>
                            <h4 lang="en">When the Couriers grow to 10,000...</h4>
                            <p lang="zh">
                                每次新入职一个人，你要做的分发工作量会发生爆炸：
                            </p>
                            <p lang="en">
                                Every time a new hire starts, the workload for distribution explodes:
                            </p>
                            <ul class="analogy-features">
                                <li>
                                    <strong lang="zh">分发风暴：</strong><span lang="zh">每次变动都要为 10,000
                                        人重发纸条。在大规模集群中，这会导致系统同步延迟数分钟甚至数小时。</span>
                                    <strong lang="en">Distribution Storm:</strong><span lang="en">Updating 10,000 slips
                                        for every change. In large clusters, this stalls synchronization for minutes or
                                        even hours.</span>
                                </li>
                                <li>
                                    <strong lang="zh">信息差：</strong><span
                                        lang="zh">新员工已上岗，但其他人拿的还是旧地址簿。这种“信息不同步”是导致网络连接超时的头号元凶。</span>
                                    <strong lang="en">Information Gap:</strong><span lang="en">New couriers start
                                        working while others hold outdated books, causing "Information Lag"—the #1 cause
                                        of connection timeouts.</span>
                                </li>
                            </ul>
                        </div>

                        <div class="narrative-p">
                            <p lang="zh">
                                在 Linux 内核中，传统的 <code>iptables</code> 就像这种效率低下的“查纸条”行为。
                            </p>
                            <p lang="en">
                                In the Linux kernel, traditional <code>iptables</code> acts exactly like this
                                inefficient "paper-checking" behavior.
                            </p>
                            <p lang="zh">
                                2015 年，Thomas Graf 意识到我们需要一种不再依赖“纸条”的技术。他利用 <b>eBPF</b> —— 这种被称为“内核
                                JavaScript”的黑科技，为快递公司安装了“刷脸识别”系统：数据包不再查看地址簿，而是通过<b>身份（Identity）</b>直接通行。
                            </p>
                            <p lang="en">
                                In 2015, Thomas Graf realized we needed a technology that moved beyond "slips." He
                                leveraged <b>eBPF</b> — the "JavaScript for the Kernel" — to install a "Face ID" system:
                                packets no longer check address books; they pass based on <b>Identity</b>.
                            </p>
                        </div>

                        <div class="swiss-fog-insight">
                            <p lang="zh">💡 <strong>历史瞬间：</strong>Cilium
                                团队在瑞士山间的浓雾中意识到，如果看不见前方的路（可观测性），再快的速度也毫无意义。这便有了后来的 Hubble。</p>
                            <p lang="en">💡 <strong>Historical Moment:</strong> In the thick fog of the Swiss mountains,
                                the Cilium team realized that without visibility (observability), speed is meaningless.
                                Thus, Hubble was born.</p>
                        </div>
                    </div>

                    <div class="story-aside">
                        <div class="visual-component-card">
                            <div class="evo-header" lang="zh">技术进化：从地址到身份</div>
                            <div class="evo-header" lang="en">Evolution: Address to Identity</div>

                            <div class="evo-visual-container">
                                <div class="evo-box legacy">
                                    <div class="evo-icon">📄</div>
                                    <div class="evo-label">
                                        <span lang="zh">传统：基于 IP 查表</span>
                                        <span lang="en">Legacy: IP Lookup</span>
                                        <code class="complexity">O(N)</code>
                                    </div>
                                </div>
                                <div class="evo-connector">
                                    <svg viewBox="0 0 24 24" width="24" height="24">
                                        <path d="M7 10l5 5 5-5" fill="none" stroke="#0070d2" stroke-width="2"
                                            stroke-linecap="round" />
                                    </svg>
                                </div>
                                <div class="evo-box modern">
                                    <div class="evo-icon">🆔</div>
                                    <div class="evo-label">
                                        <span lang="zh">Cilium：基于身份识别</span>
                                        <span lang="en">Modern: Identity Based</span>
                                        <code class="complexity">O(1)</code>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="visual-component-card" style="margin-top: 25px;">
                            <div class="viz-header">
                                <span lang="zh">网络编程延迟 (秒)</span>
                                <span lang="en">Network Programming Latency (s)</span>
                            </div>
                            <svg viewBox="0 0 400 280" class="performance-viz">
                                <line x1="40" y1="240" x2="380" y2="240" stroke="#ccc" stroke-width="1" />
                                <line x1="40" y1="240" x2="40" y2="40" stroke="#ccc" stroke-width="1" />

                                <path d="M 40 230 Q 150 220, 250 120 T 360 40" fill="none" stroke="#e74c3c"
                                    stroke-width="3" id="iptables-path" />
                                <circle cx="360" cy="40" r="4" fill="#e74c3c" class="pulse-dot" />

                                <line x1="40" y1="225" x2="380" y2="225" stroke="#0070d2" stroke-width="3" />

                                <text x="260" y="60" fill="#e74c3c" font-size="12" font-weight="600">iptables
                                    (O(N))</text>
                                <text x="260" y="215" fill="#0070d2" font-size="12" font-weight="600">Cilium eBPF
                                    (O(1))</text>

                                <text x="210" y="270" text-anchor="middle" font-size="10" fill="#999">
                                    <tspan lang="zh">Service/Pod 数量 (Scale)</tspan>
                                    <tspan lang="en">Number of Services/Pods</tspan>
                                </text>
                            </svg>
                            <div class="viz-caption">
                                <span lang="zh">图 1.1: 传统方案在规则膨胀时的性能断崖</span>
                                <span lang="en">Fig 1.1: Performance cliff of legacy solutions</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
<section id="evolution-timeline" class="section-container" style="background: #f8fafd; border-radius: 16px;">
    <div class="content-wrapper">
        <h2 lang="zh" style="font-size: 2rem; margin-bottom: 40px; text-align: center;">📜 Cilium 进化史：从内核插件到云网络基石 (2015-2025)</h2>
        <h2 lang="en" style="font-size: 2rem; margin-bottom: 40px; text-align: center;">📜 Evolution: From Kernel Plugin to Infrastructure Bedrock</h2>
        
        <div class="timeline-container">
            <div class="timeline-line"></div>
            
            <div class="timeline-item">
                <div class="timeline-dot"></div>
                <div class="timeline-content">
                    <span class="timeline-date">2015 - Origin</span>
                    <p lang="zh">Thomas Graf 在 Linux 内核峰会上展示了 eBPF 替代 iptables 的构想，Cilium 项目正式立项。</p>
                    <p lang="en">Thomas Graf introduced the vision of replacing iptables with eBPF; Cilium project was born.</p>
                </div>
            </div>

            <div class="timeline-item">
                <div class="timeline-dot"></div>
                <div class="timeline-content">
                    <span class="timeline-date">2017 - Cilium 1.0</span>
                    <p lang="zh">第一个稳定版发布，引入了身份感知（Identity-aware）安全策略，震惊 CNI 社区。</p>
                    <p lang="en">1.0 released, introducing Identity-aware security policies that redefined CNI standards.</p>
                </div>
            </div>

            <div class="timeline-item">
                <div class="timeline-dot" style="border-color: var(--cisco-sky);"></div>
                <div class="timeline-content" style="border-left: 5px solid var(--cisco-sky);">
                    <span class="timeline-date">2021 - The Cloud Standard</span>
                    <p lang="zh">Google Cloud 与 Azure 相继宣布采用 Cilium 作为托管 K8s (GKE/AKS) 的默认数据面。</p>
                    <p lang="en">Google Cloud and Azure adopted Cilium as the default dataplane for GKE and AKS.</p>
                </div>
            </div>

            <div class="timeline-item">
                <div class="timeline-dot"></div>
                <div class="timeline-content">
                    <span class="timeline-date">2023 - CNCF Graduation</span>
                    <p lang="zh">Cilium 正式从 CNCF 毕业，标志着其在大规模生产环境中的成熟度达到最高等级。</p>
                    <p lang="en">Cilium graduated from CNCF, signaling peak maturity for massive production environments.</p>
                </div>
            </div>

            <div class="timeline-item">
                <div class="timeline-dot" style="background: var(--cisco-blue);"></div>
                <div class="timeline-content" style="background: var(--cisco-midnight); color: white;">
                    <span class="timeline-date" style="color: var(--cisco-sky);">2025 - The AI Era</span>
                    <p lang="zh">发布十周年。Cilium 成为 OpenAI 等 AI 巨头支撑万级 GPU 集群的唯一网络选型。</p>
                    <p lang="en">10th Anniversary. Cilium becomes the backbone for 10k+ GPU clusters at AI giants like OpenAI.</p>
                </div>
            </div>
        </div>
    </div>
</section>
        <section id="common-ground" class="section-container">
            <div class="content-wrapper">
                <h2 lang="zh" style="font-size: 2.5rem; margin-top: 10px; margin-bottom: 10px;">02. 共同认知：云原生哲学与物流底座</h2>
                <h2 lang="en" style="font-size: 2.5rem; margin-top: 10px; margin-bottom: 10px;">02. Common Ground: Cloud Native
                        Philosophy & Foundations</h2>
                <div class="philosophy-banner">
                    <p lang="zh" style="font-size: 1.2rem; line-height: 1.8;">
                        云原生（Cloud
                        Native）本质上是一种利用云计算优势来设计、构建和运行应用程序的现代方法论。它不是简单地把传统应用搬到云上，而是从根本上重新思考软件如何在云环境中高效、可靠地工作。核心哲学可以总结为<b>“弹性、自动化和可移植性”</b>：应用程序应该像云一样，能自动扩展、快速恢复、自愈，并且不受底层硬件或环境的限制。
                    </p>
                    <p lang="en" style="font-size: 1.2rem; line-height: 1.8;">
                        Cloud Native is a modern methodology designed to leverage cloud advantages. It's a fundamental
                        rethinking of software efficiency and reliability. The core philosophy: <b>Elasticity,
                            Automation, and Portability</b>—allowing apps to scale, recover, and self-heal independently
                        of underlying hardware.
                    </p>

                    <div class="philosophy-grid">
                        <div class="philo-item">
                            <h4 lang="zh">弹性 (Elasticity)</h4>
                            <h4 lang="en">Elasticity</h4>
                            <p lang="zh">随包裹量（负载）自动增减快递员（Pod）数量，确保资源利用率最优化。</p>
                            <p lang="en">Auto-scale courier (Pod) counts based on package volume (load) for resource
                                optimization.</p>
                        </div>
                        <div class="philo-item">
                            <h4 lang="zh">自动化 (Automation)</h4>
                            <h4 lang="en">Automation</h4>
                            <p lang="zh">全流程机器决策与生命周期管理，彻底消除人工误操作引入的系统性风险。</p>
                            <p lang="en">Machine-driven lifecycle management, eliminating systemic risks from manual
                                errors.</p>
                        </div>
                        <div class="philo-item">
                            <h4 lang="zh">可移植性 (Portability)</h4>
                            <h4 lang="en">Portability</h4>
                            <p lang="zh">解耦底层硬件，一套标准架构无论在私有云还是公有云，表现始终如一。</p>
                            <p lang="en">Decoupled from hardware; consistent performance across private and public
                                clouds.</p>
                        </div>
                    </div>
                </div>

                <div >
                    <h3 lang="zh" style="color: var(--cisco-midnight); font-size: 2rem; margin-bottom: 10px;">标准化流水线
                        (The Pipeline)</h3>
                    <h3 lang="en" style="color: var(--cisco-midnight); font-size: 2rem; margin-bottom: 10px;">
                        Standardized Pipeline</h3>
                    <p lang="zh" style="color: #555; font-size: 1.1rem; line-height: 1.8;">
                        云原生应用通过精确、结构化的流程构建，就像搭乐高积木：每个部分模块化，确保了可重复性与可审计性。实际中，借助 Helm 或 Operator，整个过程从代码提交到上线只需几分钟。
                    </p>
                    <p lang="en" style="color: #555; font-size: 1.1rem; line-height: 1.8;">
                        Cloud Native apps are built via structured processes, much like Lego: every part is modular,
                        ensuring repeatability and auditability. With Helm or Operators, the entire path from commit to
                        live takes only minutes.
                    </p>



                    <div class="pipeline-track">
                        <div class="pipeline-node">
                            <span style="font-size: 2.2rem; display: block; margin-bottom: 10px;">🏗️</span>
                            <h4 lang="zh">构建 (Build)</h4>
                            <h4 lang="en">Build</h4>
                            <p style="font-size: 1.0rem; color: #666;" lang="zh">用 Docker 编写 Dockerfile<br>构建镜像并推送到仓库
                            </p>
                            <p style="font-size: 1.0rem; color: #666;" lang="en">Write Dockerfile<br>Build & Push
                                Images</p>
                        </div>
                        <div class="pipeline-node">
                            <span style="font-size: 2.2rem; display: block; margin-bottom: 10px;">📜</span>
                            <h4 lang="zh">配置 (Config)</h4>
                            <h4 lang="en">Config</h4>
                            <p style="font-size: 1.0rem; color: #666;" lang="zh">编写声明式 YAML 文件<br>定义网络与安全策略</p>
                            <p style="font-size: 1.0rem; color: #666;" lang="en">Declarative YAML<br>Define Network &
                                Security</p>
                        </div>
                        <div class="pipeline-node">
                            <span style="font-size: 2.2rem; display: block; margin-bottom: 10px;">🚀</span>
                            <h4 lang="zh">部署 (Deploy)</h4>
                            <h4 lang="en">Deploy</h4>
                            <p style="font-size: 1.0rem; color: #666;" lang="zh">CI/CD 自动化管道<br>测试并部署到环境</p>
                            <p style="font-size: 1.0rem; color: #666;" lang="en">CI/CD Pipelines<br>Test & Deploy to
                                Runtime</p>
                        </div>
                        <div class="pipeline-node" style="background: #eefbff; border-color: var(--cisco-blue);">
                            <span style="font-size: 2.2rem; display: block; margin-bottom: 10px;">⚙️</span>
                            <h4 lang="zh">运行 (Run)</h4>
                            <h4 lang="en">Run</h4>
                            <p style="font-size: 1.0rem; color: #666;" lang="zh">监控系统状态<br>实现自动扩缩与自愈</p>
                            <p style="font-size: 1.0rem; color: #666;" lang="en">Monitor Status<br>Auto-scale &
                                Self-heal</p>
                        </div>
                    </div>
                </div>

<div class="tech-sub-section">
        <h3 lang="zh">Kubernetes 与 Pod：分布式指挥系统</h3>
        <h3 lang="en">Kubernetes & Pods: The Distributed Orchestration System</h3>
        
        <p lang="zh">
            作为现代容器化工作负载的标准管理平台，<b>Kubernetes</b> 负责维护系统的期望状态。它通过控制平面（Control Plane）进行全局决策，并将任务分发给工作节点（Worker Nodes）。
        </p>
        <p lang="en">
            As the standard platform for containerized workloads, <b>Kubernetes</b> maintains the desired state of the system, making global decisions via the Control Plane and distributing tasks to Worker Nodes.
        </p>

        <div class="tech-info-grid">
            <div class="tech-info-card" style="border-top: 4px solid var(--cisco-sky);">
    <h4 lang="zh" style="color: var(--cisco-sky);">原子单元：Pod</h4>
    <h4 lang="en" style="color: var(--cisco-sky);">The Atomic Unit: Pod</h4>
                <p lang="zh">Pod 是 K8s 的最小调度单位，它封装了一个或多个容器并共享<b>网络命名空间（NetNS）</b>。这意味着 Pod 内的所有容器共用相同的 IP 和 MAC 地址，通过 <code>localhost</code> 即可高效通信。</p>
                <p lang="en">A Pod is the smallest unit in K8s, encapsulating containers that share a <b>Network Namespace (NetNS)</b>. All containers in a Pod share the same IP/MAC address and communicate via <code>localhost</code>.</p>
            </div>
<div class="tech-info-card" style="border-top: 4px solid var(--cisco-blue);">
    <h4 lang="zh" style="color: var(--cisco-blue);">易失性特征 (Ephemeral)</h4>
    <h4 lang="en" style="color: var(--cisco-blue);">Ephemeral Nature</h4>
                <p lang="zh">Pod 是临时的。它们随业务需求被频繁创建或销毁。由于每个 Pod 都会获得唯一的集群 IP，但重建后 IP 会发生变化，这种“易失性”对网络寻址提出了巨大挑战。</p>
                <p lang="en">Pods are temporary and rescheduled based on demand. While each gets a unique IP, this IP changes upon recreation, posing a significant challenge for stable network addressing.</p>
            </div>
        </div>
    </div>

    <div class="tech-sub-section">
        <h3 lang="zh">服务 (Service)：稳定的访问入口</h3>
        <h3 lang="en">Service: The Stable Access Portal</h3>
        <p lang="zh">
            为了应对 Pod IP 的不确定性，Kubernetes 引入了 <b>Service</b> 抽象层。它通过<b>标签选择器（Label Selectors）</b>动态关联一组后端 Pod，并对外暴露统一的入口。
        </p>
        <p lang="en">
            To handle Pod IP instability, Kubernetes uses the <b>Service</b> abstraction. It leverages <b>Label Selectors</b> to associate with a set of back-end Pods, providing a unified access point.
        </p>

        <div class="tech-info-grid">
<div class="tech-info-card" style="border-top: 4px solid var(--cisco-blue);">
    <h4 lang="zh" style="color: var(--cisco-blue);">负载均衡与虚拟 IP</h4>
    <h4 lang="en" style="color: var(--cisco-blue);">Load Balancing & VIP</h4>
                <p lang="zh">Service 提供长久稳定的虚拟 IP（ClusterIP）。无论后端 Pod 如何漂移，访问者的流量都会被均匀分发到健康的实例上，确保了服务发现的连续性。</p>
                <p lang="en">Services provide stable Virtual IPs (VIPs). Regardless of Pod rescheduling, traffic is evenly distributed to healthy instances, ensuring continuous service discovery.</p>
            </div>
<div class="tech-info-card" style="border-top: 4px solid var(--cisco-sky);">
    <h4 lang="zh" style="color: var(--cisco-sky);">暴露类型</h4>
    <h4 lang="en" style="color: var(--cisco-sky);">Exposure Types</h4>
                <p lang="zh">除了内部访问的 ClusterIP，还支持通过 <b>NodePort</b>（节点端口）或 <b>LoadBalancer</b>（云负载均衡器）将服务安全地公开给外部世界。</p>
                <p lang="en">Beyond internal ClusterIP, services can be exposed via <b>NodePort</b> or <b>LoadBalancer</b> to the external world securely.</p>
            </div>
        </div>
    </div>

    <div class="tech-sub-section">
        <h3 lang="zh">CNI：容器网络插件规范</h3>
        <h3 lang="en">CNI: Container Network Interface Specification</h3>
        <p lang="zh">
            Kubernetes 本身不提供网络连通性，而是通过 <b>CNI 规范</b> 赋予插件管理权。插件负责处理网络接口的建立、IP 分配及策略执行。
        </p>
        <p lang="en">
            Kubernetes itself doesn't provide networking; it relies on the <b>CNI specification</b> to allow plugins to manage interface establishment, IP allocation, and policy enforcement.
        </p>

        <div class="tech-info-grid">
<div class="tech-info-card" style="border-top: 4px solid var(--cisco-sky);">
    <h4 lang="zh" style="color: var(--cisco-sky);">连通性与 IPAM</h4>
    <h4 lang="en" style="color: var(--cisco-sky);">Connectivity & IPAM</h4>
                <p lang="zh">利用 <b>veth pair</b> 技术建立容器与宿主机的隧道。IPAM 机制充当“DHCP 服务器”，确保每个 Pod 在 <b>PodCIDR</b> 网段中拥有唯一的身份标识。</p>
                <p lang="en">Utilizing <b>veth pair</b> technology to tunnel containers to hosts. IPAM acts as a "DHCP server," ensuring each Pod has a unique identity within the <b>PodCIDR</b> range.</p>
            </div>
<div class="tech-info-card" style="border-top: 4px solid var(--cisco-blue);">
    <h4 lang="zh" style="color: var(--cisco-blue);">生命周期指令集</h4>
    <h4 lang="en" style="color: var(--cisco-blue);">Lifecycle Operations</h4>
                <p lang="zh">标准定义了四个核心动作：<b>ADD</b>（配置接口/IP）、<b>DEL</b>（释放资源）、<b>CHECK</b>（配置检查）及 <b>VERSION</b>（规范匹配）。</p>
                <p lang="en">The spec defines four core actions: <b>ADD</b> (setup interface/IP), <b>DEL</b> (release resources), <b>CHECK</b> (verification), and <b>VERSION</b> (compatibility).</p>
            </div>
        </div>
    </div>
<div class="k8s-const-box">
    <h4 lang="zh">📜 Kubernetes 网络模型：帝国的基本法</h4>
    <h4 lang="en">📜 The Kubernetes Network Model: The Constitution</h4>
    <p lang="zh" style="margin-bottom: 15px; font-size: 0.95rem;">
        在引入任何 CNI 插件之前，必须理解 Kubernetes 强制执行的三条核心原则，这确保了 Pod 像虚拟机或物理机一样易于管理：
    </p>
    <ul style="padding-left: 20px;">
        <li lang="zh"><b>IP 唯一性：</b>每个 Pod 拥有集群内唯一的 IP 地址。</li>
        <li lang="en"><b>IP Uniqueness:</b> Each Pod gets its own unique cluster-wide IP address.</li>
        <li lang="zh"><b>直接通信：</b>Pod 间通信无需经过地址转换 (NAT)。</li>
        <li lang="en"><b>Direct Communication:</b> Pods communicate without the use of proxies or NAT.</li>
        <li lang="zh"><b>节点互通：</b>宿主机上的 Agent (如 Kubelet) 必须能访问该节点的所有 Pod。</li>
        <li lang="en"><b>Node Connectivity:</b> Agents on a node can communicate with all pods on that node.</li>
    </ul>
</div>
    <div class="tech-sub-section">
        <h3 lang="zh">通信模型：网络任务的本质</h3>
        <h3 lang="en">Networking Model: The Essence of Tasks</h3>
        <p lang="zh">
            在任何系统中，网络的核心任务只有三点：<b>寻址（我要去哪）</b>、<b>转发（怎么过去）</b>以及<b>规则（我能去吗）</b>。根据通信边界，我们将其分为：
        </p>
        <p lang="en">
            In any system, networking revolves around <b>Addressing (Where?)</b>, <b>Forwarding (How?)</b>, and <b>Rules (Can I?)</b>. Based on boundaries, we categorize traffic as:
        </p>

        <div class="tech-info-grid">
<div class="tech-info-card" style="border-top: 4px solid var(--cisco-sky);">
    <h4 lang="zh" style="color: var(--cisco-sky);">⬅️ 东西向流量 (East-West)</h4>
    <h4 lang="en" style="color: var(--cisco-sky);">⬅️ East-West Traffic</h4>
                <p lang="zh">集群内部服务间的对话。这是微服务架构的基石，流量巨大且对延迟极度敏感，通常在扁平的二层或三层网络中直接寻址。</p>
                <p lang="en">Communication between services within the cluster. This foundation of microservices is high-volume and latency-sensitive, using direct addressing.</p>
            </div>
<div class="tech-info-card" style="border-top: 4px solid var(--cisco-blue);">
    <h4 lang="zh" style="color: var(--cisco-blue);">⬆️ 南北向流量 (North-South)</h4>
    <h4 lang="en" style="color: var(--cisco-blue);">⬆️ North-South Traffic</h4>
                <p lang="zh">外部用户与内部服务间的进出口通信。由 <b>Ingress</b> 管理入站流量的安全边界，<b>Egress</b> 负责服务访问外部资源的安全审计。</p>
                <p lang="en">Traffic between external users and internal services. <b>Ingress</b> manages security boundaries, while <b>Egress</b> handles outbound auditing.</p>
            </div>
        </div>
    </div>

    <div class="tech-sub-section">
    <h3 lang="zh">CNI 与 Kubernetes 的协作生命周期</h3>
    <h3 lang="en">CNI & Kubernetes Collaboration Lifecycle</h3>
    
    <p lang="zh">
        CNI 与 Kubernetes 的协作是一个高度标准化的自动化流程。由于系统本身不提供内置的网络实现，它通过 CNI 规范将网络配置的控制权委派给插件，确保每个 Pod 都能在瞬息万变的集群中获得唯一的身份标识，并构建全互联的通信平面。
    </p>
    <p lang="en">
        The collaboration between CNI and Kubernetes is a highly standardized automated process. Since the system does not provide built-in networking, it delegates configuration control to plugins via the CNI specification, ensuring every Pod receives a unique identity and forms a fully interconnected communication plane.
    </p>

    <div class="tech-info-grid">
<div class="tech-info-card" style="border-top: 4px solid var(--cisco-sky);">
    <h4 lang="zh" style="color: var(--cisco-sky);">1. 触发阶段 (Trigger)</h4>
    <h4 lang="en" style="color: var(--cisco-sky);">1. Trigger Phase</h4>
            <p lang="zh"><strong>调度与唤醒：</strong>当 Pod 被调度至特定节点后，该节点上的 <b>Kubelet</b> 进程会监听到调度事件。Kubelet 并不直接操作容器网络，而是通过 CRI（容器运行时接口）调用 <b>containerd</b> 或 <b>CRI-O</b> 来准备 Pod 的执行环境。</p>
            <p lang="en"><strong>Scheduling & Awakening:</strong> Once a Pod is assigned to a node, the local <b>Kubelet</b> detects the event. Instead of handling networking directly, it uses the CRI to invoke <b>containerd</b> or <b>CRI-O</b> to prepare the execution environment.</p>
        </div>

<div class="tech-info-card" style="border-top: 4px solid var(--cisco-blue);">
    <h4 lang="zh" style="color: var(--cisco-blue);">2. 调用阶段 (Invoke)</h4>
    <h4 lang="en" style="color: var(--cisco-blue);">2. Invoke Phase</h4>
            <p lang="zh"><strong>配置指令发送：</strong>在 Pod 基础设施层启动后，容器运行时会读取预设的 CNI 配置文件，并向相应的 CNI 插件发送 <b>ADD 指令</b>。指令中包含了 Pod 名称、命名空间以及至关重要的网络配置元数据。</p>
            <p lang="en"><strong>Configuration Command:</strong> After the infrastructure layer is up, the container runtime reads CNI config files and sends an <b>ADD command</b> to the plugin, carrying metadata like Pod name, namespace, and network specs.</p>
        </div>

<div class="tech-info-card" style="border-top: 4px solid var(--cisco-sky);">
    <h4 lang="zh" style="color: var(--cisco-sky);">3. 执行阶段 (Execution)</h4>
    <h4 lang="en" style="color: var(--cisco-sky);">3. Execution Phase</h4>
            <p lang="zh"><strong>链路构建与分配：</strong>这是最核心的步骤。插件会执行以下动作：
                <br>• 创建 <b>Network Namespace</b> 实现逻辑隔离。
                <br>• 建立 <b>veth pair</b> 打通数据链路。
                <br>• 调用 <b>IPAM</b> 模块分配唯一的 Pod IP。
                <br>• 在内核中加载 eBPF 程序或过滤规则执行策略。</p>
            <p lang="en"><strong>Link Building & Allocation:</strong> The core execution step:
                <br>• Creating <b>Network Namespaces</b> for isolation.
                <br>• Establishing <b>veth pairs</b> for the data link.
                <br>• Calling <b>IPAM</b> to allocate a unique Pod IP.
                <br>• Loading eBPF programs or filter rules in the kernel.</p>
        </div>

<div class="tech-info-card" style="border-top: 4px solid var(--cisco-blue);">
    <h4 lang="zh" style="color: var(--cisco-blue);">4. 反馈阶段 (Feedback)</h4>
    <h4 lang="en" style="color: var(--cisco-blue);">4. Feedback Phase</h4>
            <p lang="zh"><strong>状态同步上线：</strong>配置完成后，插件将包含 IP 地址和接口信息的 JSON 结果反馈给运行时。Kubelet 随后向 API Server 更新 Pod 状态。至此，Pod 状态由 Pending 转为 <b>Running</b>，正式接收业务流量。</p>
            <p lang="en"><strong>State Sync & Launch:</strong> Upon completion, the plugin returns a JSON result with IP and interface info. Kubelet then updates the API Server. The Pod transitions from Pending to <b>Running</b>, ready for traffic.</p>
        </div>

<div class="tech-info-card" style="border-top: 4px solid var(--cisco-sky);">
    <h4 lang="zh" style="color: var(--cisco-sky);">5. 销毁阶段 (Destroy)</h4>
    <h4 lang="en" style="color: var(--cisco-sky);">5. Destroy Phase</h4>
            <p lang="zh"><strong>资源回收清理：</strong>当 Pod 生命周期终结时，运行时会发送 <b>DELETE 指令</b>。CNI 插件随即执行反向操作：回收 IP 地址、删除宿主机上的虚拟接口，并清理内核中的转发规则，确保系统资源彻底释放。</p>
            <p lang="en"><strong>Resource Reclamation:</strong> At the end of the lifecycle, a <b>DELETE command</b> is sent. The CNI plugin performs reverse operations: reclaiming IPs, deleting virtual interfaces, and clearing kernel forwarding rules.</p>
        </div>
    </div>
</div>
            </div>
        </section>

        <section id="pain-points" class="section-container">
            <div class="content-wrapper">
                <h2 lang="zh" style="font-size: 2.5rem; margin-top: 10px; margin-bottom: 10px;">03. 传统容器网络的三大痛点</h2>
                <h2 lang="en" style="font-size: 2.5rem; margin-top: 10px; margin-bottom: 10px;">03. Three major pain points of traditional container networks</h2>
                <p class="section-lead" lang="zh">
                    在云原生架构普及的今天，基于 Linux 传统内核组件（如 iptables）的方案正面临前所未有的挑战。这些挑战不仅是技术瓶颈，更是业务增长的“隐形枷锁”。
                </p>
                <p class="section-lead" lang="en">
                    As cloud-native architectures become ubiquitous, legacy Linux kernel components (like iptables) face
                    unprecedented challenges, acting as "invisible shackles" on business growth.
                </p>

                <div class="pain-vertical-row performance">
                    <div class="pain-header">
                        <div class="pain-icon-circle">
                            <svg viewBox="0 0 24 24" width="32" height="32">
                                <path d="M13 3L4 14h7v7l9-11h-7z" fill="#E74C3C" />
                            </svg>
                        </div>
                        <h3 lang="zh">1. 大规模下的性能与扩展性瓶颈</h3>
                        <h3 lang="en">1. Performance & Scalability Bottlenecks</h3>
                    </div>
                    <div class="pain-body-content">
                        <div class="detail-grid">
                            <div class="detail-text">
                                <strong lang="zh">● 传统规则的线性延迟 O(n)</strong><strong lang="en">● Linear Latency
                                    O(n)</strong>
                                <p lang="zh">Kubernetes 依赖的 iptables 处理规则的复杂度为 $O(n)$。随着服务和 Pod
                                    数量增加，内核必须按顺序扫描成千上万条规则，导致网络延迟随规模线性增长。</p>
                                <p lang="en">Legacy K8s networking relies on iptables with $O(n)$ complexity. As
                                    Services/Pods grow, the kernel scans thousands of rules sequentially, causing
                                    latency to grow linearly.</p>
                            </div>
                            <div class="detail-text">
                                <strong lang="zh">● 高频变动的更新开销</strong><strong lang="en">● High-Churn Update
                                    Overhead</strong>
                                <p lang="zh">在“高流转”环境中，Pod 的状态变化要求规则在所有节点刷新。在大规模集群中这可能耗时数分钟，导致严重的网络状态不一致。</p>
                                <p lang="en">In high-churn environments, Pod changes force rule refreshes across all
                                    nodes. In large clusters, this can take minutes, causing severe network state
                                    inconsistency.</p>
                            </div>
                        </div>
                        <div class="deep-dive-box ai">
                            <span class="tag-label" lang="zh">AI/GPU 负载挑战</span><span class="tag-label" lang="en">AI/GPU
                                Impact</span>
                            <p lang="zh">现代 AI 训练集群要求极低延迟抖动 (Jitter)。即便几毫秒的波动，也会让数千张 GPU 在同步时集体停顿，极大浪费昂贵算力资源。</p>
                            <p lang="en">AI training clusters demand ultra-low Jitter. Millisecond fluctuations can
                                stall thousands of GPUs during sync, wasting expensive compute resources.</p>
                        </div>
                    </div>
                </div>

                <div class="pain-vertical-row security">
                    <div class="pain-header">
                        <div class="pain-icon-circle">
                            <svg viewBox="0 0 24 24" width="32" height="32">
                                <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"
                                    fill="#F39C12" />
                            </svg>
                        </div>
                        <h3 lang="zh">2. 动态环境下的安全与策略管理</h3>
                        <h3 lang="en">2. Security & Policy Management</h3>
                    </div>
                    <div class="pain-body-content">
                        <div class="detail-grid">
                            <div class="detail-text">
                                <strong lang="zh">● IP 地址的不可靠性</strong><strong lang="en">● Unreliability of IP
                                    Addresses</strong>
                                <p lang="zh">Pod 是瞬态的（Cattle 而非 Pets），IP 地址随重启频繁变动。传统的、基于 IP 地址的防火墙规则在云原生环境中几乎无效且难以维护。
                                </p>
                                <p lang="en">Pods are cattle, not pets; IPs change constantly. Traditional IP-based
                                    firewall rules are practically useless and unmaintainable in dynamic environments.
                                </p>
                            </div>
                            <div class="detail-text">
                                <strong lang="zh">● 应用层 (L7) 策略缺失</strong><strong lang="en">● Lack of L7
                                    Policies</strong>
                                <p lang="zh">传统工具只工作在 L3/L4。无法精细控制“仅允许前端调用后端的特定 API 路径”，东西向流量的访问控制成为巨大挑战。</p>
                                <p lang="en">Legacy tools only work at L3/L4. Implementing Zero Trust for East-West
                                    traffic (e.g., restricting specific API paths) is a major challenge.</p>
                            </div>
                        </div>
                        <div class="deep-dive-box zero-trust">
                            <span class="tag-label" lang="zh">零信任现状</span><span class="tag-label" lang="en">Zero Trust
                                Reality</span>
                            <p lang="zh">绝大多数流量发生在集群内部（东西向）。如何在不依赖 IP 的情况下实现细粒度访问控制，是传统边界防火墙的死角。</p>
                            <p lang="en">Most traffic is East-West. Achieving fine-grained access control without IP
                                reliance is a blind spot for edge firewalls.</p>
                        </div>
                    </div>
                </div>

                <div class="pain-vertical-row visibility">
                    <div class="pain-header">
                        <div class="pain-icon-circle">
                            <svg viewBox="0 0 24 24" width="32" height="32">
                                <path
                                    d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"
                                    fill="#0070D2" />
                            </svg>
                        </div>
                        <h3 lang="zh">3. 多层抽象带来的可观测性挑战</h3>
                        <h3 lang="en">3. Observability & Visibility Challenges</h3>
                    </div>
                    <div class="pain-body-content">
                        <div class="detail-grid">
                            <div class="detail-text">
                                <strong lang="zh">● “盲人摸象”的调试困境</strong><strong lang="en">● The "Finger-pointing"
                                    Problem</strong>
                                <p lang="zh">网络跨越物理、虚拟、容器多层，运维人员难以判断异常发生在哪一层，导致所谓的“指责游戏”。</p>
                                <p lang="en">Networking spans multiple layers. Isolating root causes is difficult,
                                    leading to the "finger-pointing" game between teams.</p>
                            </div>
                            <div class="detail-text">
                                <strong lang="zh">● 缺乏业务语境的监控</strong><strong lang="en">● Lack of Business
                                    Context</strong>
                                <p lang="zh">传统工具只看原始 IP，不知道流量代表哪个微服务。在万级 Pod 中，这种缺乏标识的数据产生严重的“信噪比”问题。</p>
                                <p lang="en">Legacy tools see raw IPs, not microservices. In massive clusters, data
                                    without identity leads to high noise and difficult troubleshooting.</p>
                            </div>
                        </div>
                        <div class="deep-dive-box fingerprint">
                            <span class="tag-label" lang="zh">SRE 深度视界</span><span class="tag-label" lang="en">SRE Deep
                                Vision</span>
                            <p lang="zh">17.4% 的用户因功能或性能 Bug 处于生产受阻状态。没有内核级的细粒度监控，我们就无法追踪跨微服务的“数字指纹”。</p>
                            <p lang="en">17.4% of users are production-blocked by performance bugs. Tracing digital
                                fingerprints across services requires deep kernel-level visibility.</p>
                        </div>
                    </div>
                </div>

                <div class="analogy-summary-box">
                    <h3 class="analogy-main-title">
                        <span lang="zh">💡 类比理解：当物流帝国陷入危机</span>
                        <span lang="en">💡 Analogy: When the Logistics Empire in Crisis</span>
                    </h3>
                    <div class="analogy-grid">
                        <div class="analogy-card">
                            <div class="analogy-icon">📄</div>
                            <div class="analogy-content">
                                <h4 lang="zh">性能：文书风暴</h4>
                                <h4 lang="en">Performance: Paperwork Storm</h4>
                                <p lang="zh">每增加一个员工，总部都要重印万份名单发给所有人。当人员流动过快，快递员忙于看名单而无暇送货，全城陷入停摆。</p>
                                <p lang="en">Each new hire forces the office to reprint 10k lists for everyone. High
                                    turnover means couriers spend more time reading lists than delivering.</p>
                            </div>
                        </div>
                        <div class="analogy-card">
                            <div class="analogy-icon">🪪</div>
                            <div class="analogy-content">
                                <h4 lang="zh">安全：消失的身份</h4>
                                <h4 lang="en">Security: Missing Identity</h4>
                                <p lang="zh">员工频繁更换制服与编号（IP），你无法通过“红衣服”来拦截禁运品。必须建立一套不可伪造的“刷脸”身份识别系统。</p>
                                <p lang="en">Staff change uniforms and numbers (IP) constantly. You can't block
                                    contraband by "red shirt"; you need an unforgeable "Face ID" system.</p>
                            </div>
                        </div>
                        <div class="analogy-card">
                            <div class="analogy-icon">📦</div>
                            <div class="analogy-content">
                                <h4 lang="zh">观测：分拣中心的黑盒</h4>
                                <h4 lang="en">Observability: Sorting Center Blackbox</h4>
                                <p lang="zh">包裹在复杂的传送带（网络层）里流转，一旦失踪，你根本看不见它卡在哪个环节，更不知道包裹里装的是什么。</p>
                                <p lang="en">Parcels flow through complex belts (layers). If lost, you can't see where
                                    it's stuck or what's inside the package.</p>
                            </div>
                        </div>
                    </div>
                </div>

<div class="tech-sub-section">
        <p lang="zh">
            在云原生架构普及的今天，传统的网络方案正面临前所未有的挑战。这些挑战并非源于设计失误，而是由于底层工具在面对动态、大规模集群时，触及了其设计的算法边界。
        </p>
        <p lang="en">
            As cloud-native architectures become ubiquitous, traditional networking solutions face unprecedented challenges. These are not due to design flaws but rather the underlying tools hitting their algorithmic limits in dynamic, large-scale clusters.
        </p>
    </div>

    <div class="tech-sub-section">
        <h3 lang="zh">为什么 Kubernetes 依赖 iptables 实现 Kube-proxy？</h3>
        <h3 lang="en">Why Kubernetes Relies on iptables for Kube-proxy?</h3>
        <p lang="zh">
            从系统设计的本质来看，Kubernetes 的 <b>Service</b> 机制是将一个稳定的虚拟 IP (ClusterIP) 映射到一组动态变化的 Pod IP。为了实现这种流量重定向，我们需要在内核层面引入一个高效的“拦截器”与“转换器”。
        </p>
        <p lang="en">
            Essentially, the Kubernetes <b>Service</b> mechanism maps a stable Virtual IP (ClusterIP) to a dynamic set of Pod IPs. To implement this traffic redirection, we need an efficient "interceptor" and "translator" at the kernel level.
        </p>

        <div class="tech-info-grid">
<div class="tech-info-card" style="border-top: 4px solid var(--cisco-blue);">
    <h4 lang="zh" style="color: var(--cisco-blue);">内核拦截与 DNAT</h4>
    <h4 lang="en" style="color: var(--cisco-blue);">Kernel Interception & DNAT</h4>
                <p lang="zh">Linux 内核的 <b>Netfilter</b> 框架是处理数据包最成熟的方案。当数据包发往虚拟的 ClusterIP 时，iptables 规则会拦截它并执行目标地址转换（DNAT），将其重定向到真实的 Pod IP。</p>
                <p lang="en">The <b>Netfilter</b> framework in the Linux kernel is the most mature packet handling solution. When a packet targets a Virtual IP, iptables rules intercept it and perform DNAT to redirect it to a real Pod IP.</p>
            </div>
<div class="tech-info-card" style="border-top: 4px solid var(--cisco-sky);">
    <h4 lang="zh" style="color: var(--cisco-sky);">历史权衡与兼容性</h4>
    <h4 lang="en" style="color: var(--cisco-sky);">Historical Trade-off & Compatibility</h4>
                <p lang="zh">在 K8s 早期，iptables 是唯一既能做 NAT 又能做包过滤，且随处可见的标准组件。尽管它不是为超大规模容器场景设计的，但在当时它是实现 Service 抽象最可靠的落地方案。</p>
                <p lang="en">In the early days of K8s, iptables was the only standard tool capable of both NAT and filtering available everywhere. While not designed for massive scale, it was the most reliable way to implement Service abstractions.</p>
            </div>
        </div>
    </div>

    <div class="tech-sub-section">
        <h3 lang="zh">iptables 运行机制与大规模集群的性能瓶颈</h3>
        <h3 lang="en">iptables Mechanisms & Large-Scale Performance Bottlenecks</h3>
        <p lang="zh">
            iptables 的本质是一个线性的规则链表。当集群规模从几十个节点增长到成千上万个节点时，这种结构会导致性能的崩塌。
        </p>
        <p lang="en">
            iptables is fundamentally a linear linked list of rules. When a cluster scales from dozens to thousands of nodes, this structure leads to a complete collapse in performance.
        </p>

        <div class="tech-info-grid">
<div class="tech-info-card" style="border-top: 4px solid var(--cisco-blue);">
    <h4 lang="zh" style="color: var(--cisco-blue);">线性匹配的代价：$O(N)$</h4>
    <h4 lang="en" style="color: var(--cisco-blue);">Linear Matching Cost: $O(N)$</h4>
                <p lang="zh">内核处理每个数据包时，必须从第一条规则开始逐一比对。在大规模集群中，规则可能多达数万条。这种<b>线性遍历</b>会导致 CPU 消耗激增，并直接推高请求的端到端延迟。</p>
                <p lang="en">The kernel must check every packet against rules one by one. In large clusters with tens of thousands of rules, this <b>linear traversal</b> spikes CPU usage and significantly increases end-to-end latency.</p>
            </div>
<div class="tech-info-card" style="border-top: 4px solid var(--cisco-sky);">
    <h4 lang="zh" style="color: var(--cisco-sky);">全量更新的开销</h4>
    <h4 lang="en" style="color: var(--cisco-sky);">Full Table Update Overhead</h4>
                <p lang="zh">每当 Pod 发生变动，整个 iptables 规则表都需要被全量读取、修改并写回。在动态调度的环境下，这种高频的原子更新操作会导致明显的网络抖动和系统响应变慢。</p>
                <p lang="en">Whenever a Pod changes, the entire iptables table must be read, modified, and rewritten. In dynamic environments, these frequent atomic updates cause noticeable network jitter and slower system response.</p>
            </div>
        </div>
    </div>
            </div>
        </section>

        <section id="arch-chapter" class="section-container">
            <div class="content-wrapper">
                <h2 lang="zh" style="font-size: 2.5rem; margin-top: 10px; margin-bottom: 10px;">04. Cilium 的内核革命：架构之美</h2>
                <h2 lang="en" style="font-size: 2.5rem; margin-top: 10px; margin-bottom: 10px;">04. The Kernel Revolution: The Beauty
                            of Architecture</h2>
                <div id="arch-4-1" class="arch-sub-section" style="margin-bottom: 100px;">
                    <div class="section-header"> 
                        <p lang="zh">从蜂巢的结构稳定性到 eBPF 的极致执行效率，探索 Cilium 如何重塑云原生边界。</p>
                        <p lang="en">From the structural stability of the honeycomb to the ultimate execution efficiency of
                            eBPF, explore how Cilium reshapes cloud-native boundaries.</p>
                    </div>
                    <div class="hive-concept-grid">
                        <div class="hive-visual-container">
                            <svg width="300" height="260" viewBox="0 0 300 260" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M75 10L125 10L150 53.3L125 96.6L75 96.6L50 53.3L75 10Z" fill="#00bceb"
                                    fill-opacity="0.1" stroke="#00bceb" stroke-width="2" />
                                <path d="M150 53.3L200 53.3L225 96.6L200 139.9L150 139.9L125 96.6L150 53.3Z" fill="#00bceb"
                                    fill-opacity="0.2" stroke="#00bceb" stroke-width="2" />
                                <path d="M75 96.6L125 96.6L150 139.9L125 183.2L75 183.2L50 139.9L75 96.6Z" fill="#00bceb"
                                    fill-opacity="0.15" stroke="#00bceb" stroke-width="2" />
                                <circle cx="150" cy="96.6" r="15" fill="#002147" />
                                <path d="M140 85C130 75 110 75 100 85C90 95 100 115 110 115" stroke="#002147" stroke-width="3"
                                    stroke-linecap="round" />
                                <path d="M160 85C170 75 190 75 200 85C210 95 200 115 190 115" stroke="#002147" stroke-width="3"
                                    stroke-linecap="round" />
                            </svg>
                        </div>
        
                        <div class="definition-card">
                            <h3 lang="zh" style="margin-bottom: 20px;">精准定义：不只是 CNI</h3>
                            <h3 lang="en" style="margin-bottom: 20px;">Precise Definition: More than just a CNI</h3>
                            <p lang="zh" style="line-height: 1.8;">
                                <span class="highlight-text">Cilium</span> 是一个开源的云原生解决方案，旨在通过革命性的内核技术 <span
                                    class="highlight-text">eBPF</span>，为工作负载提供安全防护并观察其网络连通性。它超越了传统的 CNI
                                插件范畴，构建了一个集成了网络、可观测性和安全性的综合平台，能够透明地保护 HTTP、gRPC、Kafka 等高级协议。
                            </p>
                            <p lang="en" style="line-height: 1.8;">
                                <span class="highlight-text">Cilium</span> is an open-source cloud-native solution designed
                                to secure and observe network connectivity between workloads using the revolutionary kernel
                                technology <span class="highlight-text">eBPF</span>. It goes beyond traditional CNI plugins,
                                building a comprehensive platform for networking, observability, and security that
                                transparently protects protocols like HTTP, gRPC, and Kafka.
                            </p>
                        </div>
                    </div>
        
                    <div class="analogy-comparison">
                        <div class="analogy-box">
                            <div class="analogy-header">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M20 7L12 3L4 7M20 7L12 11M20 7V17L12 21M12 11L4 7M12 11V21M4 7V17L12 21" />
                                </svg>
                                <span lang="zh">技术类比：内核界的 JavaScript</span>
                                <span lang="en">Analogy: The JS of the Kernel</span>
                            </div>
                            <p lang="zh" style="font-size: 1.0rem; color: #555;">
                                如果说 JavaScript 之于浏览器，使其从静态页面变为交互式应用；那么 eBPF 之于内核，则使其从固化的执行逻辑变为可编程的灵活底座。Cilium
                                正是利用这种“脚本化”能力，在不改变内核源码的情况下，动态注入网络逻辑。
                            </p>
                            <p lang="en" style="font-size: 1.0rem; color: #555;">
                                If JavaScript is to the browser, turning static pages into interactive apps; eBPF is to the
                                kernel, turning rigid execution into a programmable foundation. Cilium leverages this
                                "scripting" capability to dynamically inject network logic without modifying kernel source
                                code.
                            </p>
                        </div>
                        <div class="analogy-box">
                            <div class="analogy-header">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" />
                                </svg>
                                <span lang="zh">架构类比：从“检查站”到“直达专线”</span>
                                <span lang="en">Analogy: Checkpoints vs. Express Lane</span>
                            </div>
                            <p lang="zh" style="font-size: 1.0rem; color: #555;">
                                传统网络（iptables）像是在一条公路上设置了成千上万个检查站，包裹必须逐个排队核验；而 Cilium/eBPF
                                则为数据包开辟了“直达专线”，通过在内核挂钩点（Hooks）直接执行高效程序，实现极低延迟。
                            </p>
                            <p lang="en" style="font-size: 1.0rem; color: #555;">
                                Traditional networking (iptables) is like thousands of checkpoints on a highway; packets
                                must queue at each one. Cilium/eBPF creates an "Express Lane," executing efficient programs
                                directly at kernel hooks for ultra-low latency.
                            </p>
                        </div>
                    </div>
                </div>
        
                <div id="arch-4-2" class="arch-sub-section" style="margin-bottom: 100px;">
                    <h3 class="cisco-sub-header" lang="zh">组件全景：控制面与数据平面的交响乐</h3>
                    <h3 class="cisco-sub-header" lang="en">Landscape: Symphony of Control & Data Planes</h3>
        
                    <p lang="zh" style="margin-bottom: 30px; font-size: 1.05rem;">
                        Cilium
                        的架构设计严格遵循“控制与转发分离”的原则，围绕<strong>内核态加速</strong>与<strong>用户态编排</strong>的理念展开。这种解耦不仅保证了极高的运行效率，还通过模块化设计实现了集群级的可扩展性。
                    </p>
                    <p lang="en" style="margin-bottom: 30px; font-size: 1.05rem;">
                        Cilium's architecture strictly follows the "Control and Forwarding Separation" principle,
                        centered around <strong>Kernel Acceleration</strong> and <strong>User-Space
                            Orchestration</strong>. This decoupling ensures high efficiency and cluster-wide
                        scalability.
                    </p>
        
                    <div class="arch-visual"
                        style="background: #fdfdfd; border: 1px solid var(--cisco-border); border-radius: 12px; padding: 40px; margin-bottom: 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.05);">
                        <div style="text-align: center; margin-bottom: 20px;">
                            <span lang="zh"
                                style="background: var(--cisco-blue); color: white; padding: 4px 15px; border-radius: 20px; font-size: 1.0rem; font-weight: bold; text-transform: uppercase;">用户空间
                                (The Brain)</span>
                            <span lang="en"
                                style="background: var(--cisco-blue); color: white; padding: 4px 15px; border-radius: 20px; font-size: 1.0rem; font-weight: bold; text-transform: uppercase;">User
                                Space (The Brain)</span>
                        </div>
        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px;">
                            <div style="background: white; border: 1px solid #e1e8ed; padding: 25px; border-radius: 8px;">
                                <div
                                    style="display: flex; align-items: center; gap: 10px; margin-bottom: 12px; color: var(--cisco-blue);">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path
                                            d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z" />
                                    </svg>
                                    <strong lang="zh">Cilium Agent</strong><strong lang="en">Cilium Agent</strong>
                                </div>
                                <p lang="zh" style="font-size: 1.0rem; color: #555;">
                                    运行于每个节点的核心守护进程。负责监听 Kubernetes 事件，管理 eBPF 程序的整个生命周期，并将策略实时编译为内核字节码。
                                </p>
                                <p lang="en" style="font-size: 1.0rem; color: #555;">
                                    The core daemon on each node. Listens to K8s events, manages the eBPF lifecycle,
                                    and compiles policies into kernel bytecode.
                                </p>
                            </div>
                            <div style="background: white; border: 1px solid #e1e8ed; padding: 25px; border-radius: 8px;">
                                <div
                                    style="display: flex; align-items: center; gap: 10px; margin-bottom: 12px; color: var(--cisco-blue);">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path d="M22 13h-8v-2h8v2zm-2-6h-6v2h6V7zm0 10h-6v2h6v-2zM12 7H2v10h10V7z" />
                                    </svg>
                                    <strong lang="zh">Cilium Operator</strong><strong lang="en">Cilium
                                        Operator</strong>
                                </div>
                                <p lang="zh" style="font-size: 1.0rem; color: #555;">
                                    集群级控制器，负责 IP 地址管理 (IPAM)、身份分配、证书轮换等全局任务。默认使用 Kubernetes CRD 存储集群状态。
                                </p>
                                <p lang="en" style="font-size: 1.0rem; color: #555;">
                                    Cluster-wide controller. Handles global tasks like IPAM, identity allocation,
                                    and certificate rotation using Kubernetes CRDs.
                                </p>
                            </div>
                            <div style="background: white; border: 1px solid #e1e8ed; padding: 25px; border-radius: 8px;">
                                <div
                                    style="display: flex; align-items: center; gap: 10px; margin-bottom: 12px; color: var(--cisco-blue);">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path
                                            d="M21 16.5C21 16.88 20.79 17.21 20.47 17.38L12.57 21.82C12.41 21.94 12.21 22 12 22C11.79 22 11.59 21.94 11.43 21.82L3.53 17.38C3.21 17.21 3 16.88 3 16.5V7.5C3 7.12 3.21 6.79 3.53 6.62L11.43 2.18C11.59 2.06 11.79 2 12 2C12.21 2 12.41 2.06 12.57 2.18L20.47 6.62C20.79 6.79 21 7.12 21 7.5V16.5Z" />
                                    </svg>
                                    <strong>Hubble & Envoy</strong>
                                </div>
                                <p lang="zh" style="font-size: 1.0rem; color: #555;">
                                    观测层。Hubble 提供实时流量可视化；Envoy 作为辅助高性能代理，用于执行复杂的 Layer 7 (应用层) 策略。
                                </p>
                                <p lang="en" style="font-size: 1.0rem; color: #555;">
                                    Observability layer. Hubble provides flow visibility, while Envoy acts as a
                                    high-performance proxy for L7 policies.
                                </p>
                            </div>
                        </div>
        
                        <div style="text-align: center; color: var(--cisco-blue); margin: 35px 0; position: relative;">
                            <div
                                style="border-left: 2px dashed var(--cisco-blue); height: 40px; position: absolute; left: 50%; top: -30px;">
                            </div>
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"
                                style="background: white; position: relative; z-index: 2;">
                                <path d="M7 13l5 5 5-5M7 6l5 5 5-5" />
                            </svg>
                            <div lang="zh"
                                style="font-size: 13px; font-weight: bold; margin-top: 10px; color: var(--cisco-midnight);">
                                桥梁：eBPF Maps (O(1) 效率)
                            </div>
                            <div lang="en"
                                style="font-size: 13px; font-weight: bold; margin-top: 10px; color: var(--cisco-midnight);">
                                Bridge: eBPF Maps (O(1) Efficiency)
                            </div>
                        </div>
        
                        <div style="text-align: center; margin-bottom: 20px;">
                            <span lang="zh"
                                style="background: var(--cisco-midnight); color: white; padding: 4px 15px; border-radius: 20px; font-size: 1.0rem; font-weight: bold; text-transform: uppercase;">内核空间
                                (The Muscle)</span>
                            <span lang="en"
                                style="background: var(--cisco-midnight); color: white; padding: 4px 15px; border-radius: 20px; font-size: 1.0rem; font-weight: bold; text-transform: uppercase;">Kernel
                                Space (The Muscle)</span>
                        </div>
        
                        <div class="kernel-engine"
                            style="background: #f0f4f8; padding: 25px; border-radius: 8px; border-top: 4px solid var(--cisco-sky);">
                            <div lang="zh"
                                style="font-family: monospace; font-size: 1.0rem; text-align: center; margin-bottom: 15px;">
                                eBPF Datapath Execution Engine (JIT Compiled - 接近原生性能)
                            </div>
                            <div lang="en"
                                style="font-family: monospace; font-size: 1.0rem; text-align: center; margin-bottom: 15px;">
                                eBPF Datapath Execution Engine (JIT Compiled - Near-Native Performance)
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;">
                                <div
                                    style="background: white; padding: 15px; border-radius: 4px; text-align: center; font-weight: bold; font-size: 1.0rem;">
                                    XDP Hook</div>
                                <div
                                    style="background: white; padding: 15px; border-radius: 4px; text-align: center; font-weight: bold; font-size: 1.0rem;">
                                    Traffic Control</div>
                                <div
                                    style="background: white; padding: 15px; border-radius: 4px; text-align: center; font-weight: bold; font-size: 1.0rem;">
                                    Socket Hook</div>
                            </div>
                        </div>
                    </div>
        
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 30px;">
                        <div style="padding: 20px; background: #fafafa; border-radius: 8px;">
                            <h4 lang="zh" style="color: var(--cisco-blue); margin-bottom: 15px;">eBPF 程序：Cilium 的大脑
                            </h4>
                            <h4 lang="en" style="color: var(--cisco-blue); margin-bottom: 15px;">eBPF Program: The
                                Brain of Cilium</h4>
                            <p lang="zh" style="font-size: 1.0rem; color: #444;">
                                直接驻留在内核中处理网络包。通过 <strong>JIT (Just-In-Time)</strong>
                                编译，字节码被转换为机器码执行，效率接近原生内核模块。它支持多种战略级挂载点：
                            </p>
                            <p lang="en" style="font-size: 1.0rem; color: #444;">
                                Resides in the kernel to process packets. Bytecode is converted to machine code via
                                <strong>JIT</strong> compilation for near-native efficiency.
                            </p>
                            <ul style="font-size: 1.0rem; padding-left: 20px; color: #555; margin-top: 15px;">
                                <li lang="zh"><strong>XDP:</strong> 在网络驱动层最早阶段处理数据包，极速防御 DDoS。</li>
                                <li lang="en"><strong>XDP:</strong> Processes packets at the driver stage for
                                    ultra-fast DDoS protection.</li>
                                <li lang="zh"><strong>TC (Traffic Control):</strong> 用于容器间流量的精细化负载均衡与限速。</li>
                                <li lang="en"><strong>TC:</strong> Used for granular load balancing and
                                    rate-limiting between containers.</li>
                                <li lang="zh"><strong>Socket:</strong> 实现 Layer 7 应用层协议解析与加密策略。</li>
                                <li lang="en"><strong>Socket:</strong> Enables L7 protocol parsing and encryption
                                    policies.</li>
                            </ul>
                        </div>
                        <div style="padding: 20px; background: #fafafa; border-radius: 8px;">
                            <h4 lang="zh" style="color: var(--cisco-blue); margin-bottom: 15px;">跨集群互联：Cluster Mesh
                            </h4>
                            <h4 lang="en" style="color: var(--cisco-blue); margin-bottom: 15px;">Multi-Cluster:
                                Cluster Mesh</h4>
                            <p lang="zh" style="font-size: 1.0rem; color: #444;">
                                Cluster Mesh 是 Cilium 的跨集群方案。它通过加密隧道打破了物理边界，实现不同 Kubernetes 集群间 Pod 的直接安全通信。
                            </p>
                            <p lang="en" style="font-size: 1.0rem; color: #444;">
                                Cluster Mesh is the multi-cluster solution. It breaks physical boundaries via
                                encrypted tunnels for secure direct Pod-to-Pod communication.
                            </p>
                            <p lang="zh" style="font-size: 1.0rem; color: #444; margin-top: 10px;">
                                <strong>CNI 插件职责：</strong> 符合 CNI 标准，当 Pod 创建时，它就像“帝国工程队”，自动配置网络命名空间并挂载 eBPF
                                规则，确保“即插即用”。
                            </p>
                            <p lang="en" style="font-size: 1.0rem; color: #444; margin-top: 10px;">
                                <strong>CNI Plugin Role:</strong> Acts as the "Engineering Crew" to auto-configure
                                namespaces and BPF rules during Pod creation for plug-and-play networking.
                            </p>
                        </div>
                    </div>
                </div>
        
<div class="tech-sub-section">
    <h3 lang="zh">寻址革命：从 $O(N)$ 到 $O(1)$ 的算法跨越</h3>
    <h3 lang="en">Lookup Revolution: Scaling from $O(N)$ to $O(1)$ Complexity</h3>
    
    <p lang="zh">
        要彻底解决大规模集群的网络延迟，必须在算法复杂度上实现质的飞跃。传统的线性搜索机制在规则爆炸时必然导致性能崩塌，而 Cilium 通过引入内核原生的高效数据结构，实现了寻址效率的常量化。
    </p>
    <p lang="en">
        To fundamentally solve network latency in large-scale clusters, an algorithmic leap is required. While linear search mechanisms collapse under rule explosion, Cilium achieves constant-time lookup by leveraging kernel-native data structures.
    </p>

    <div class="tech-info-grid">
        <div class="tech-info-card" style="border-top: 4px solid var(--cisco-blue);">
            <h4 lang="zh" style="color: var(--cisco-blue);">BPF Map：内核态的“即时索引”</h4>
            <h4 lang="en" style="color: var(--cisco-blue);">BPF Map: Instant Kernel-Space Indexing</h4>
            <p lang="zh">BPF Map 是内核空间与用户空间共享的高效键值对存储。它充当了 Cilium 的动态数据库，存储着 Service IP 到后端 Pod IP 列表的映射关系。与静态规则不同，它是数据驱动的，且支持毫秒级的原子更新。</p>
            <p lang="en">BPF Maps act as efficient Key-Value stores shared between kernel and user space. Serving as Cilium's dynamic database, they map Service IPs to Pod IP lists, supporting millisecond-level atomic updates.</p>
        </div>

        <div class="tech-info-card" style="border-top: 4px solid var(--cisco-sky);">
            <h4 lang="zh" style="color: var(--cisco-sky);">转发机制对比：遍历 vs 寻址</h4>
            <h4 lang="en" style="color: var(--cisco-sky);">Mechanism Comparison: Traversal vs. Addressing</h4>
            <p lang="zh">
                <b>iptables 方式：</b> 内核必须逐行比对规则列表。如果有 10,000 条规则，数据包可能需要匹配 10,000 次，复杂度为 $O(N)$。<br>
                <b>Cilium 方式：</b> eBPF 程序直接将目标 IP 提取为 Key，在哈希表中进行单次精准查询，复杂度为 $O(1)$。
            </p>
            <p lang="en">
                <b>iptables:</b> The kernel traverses a rule list. With 10,000 rules, a packet might need 10,000 matches ($O(N)$).<br>
                <b>Cilium:</b> eBPF extracts the destination IP as a Key and performs a single hash lookup ($O(1)$).
            </p>
        </div>

        <div class="tech-info-card" style="border-top: 4px solid var(--cisco-blue);">
            <h4 lang="zh" style="color: var(--cisco-blue);">结果：与集群规模解耦</h4>
            <h4 lang="en" style="color: var(--cisco-blue);">Result: Decoupling from Cluster Scale</h4>
            <p lang="zh">在 $O(1)$ 模式下，无论集群中有 10 个 Service 还是 100,000 个 Service，哈希查找的时间开销几乎完全一致。这意味着网络延迟不再随节点数线性增长，为超大规模 AI 训练和微服务架构提供了稳定的底座。</p>
            <p lang="en">Under $O(1)$, lookup time remains constant whether there are 10 or 100,000 services. Network latency no longer scales with node count, providing a stable foundation for massive AI and microservice workloads.</p>
        </div>
    </div>
    
</div>

<div class="tech-sub-section">
            <h3 lang="zh">技术证据：iptables 规则链与 eBPF 映射表</h3>
            <h3 lang="en">Technical Evidence: iptables Rule Chains vs. eBPF Maps</h3>
            <p lang="zh">
                为了理解效率为何会发生代差级跃迁，我们需要对比观察 Linux 内核中两种截然不同的数据结构。
            </p>
            <p lang="en">
                To understand why efficiency undergoes a generational leap, we must compare two distinct data structures within the Linux kernel.
            </p>

            

            <div class="grid-adaptive-cols">
                <div class="tech-info-card" style="border-top: 4px solid var(--cisco-midnight);">
                    <h4 lang="zh" style="color: var(--cisco-midnight);">iptables：顺序匹配的“线性清单”</h4>
                    <h4 lang="en" style="color: var(--cisco-midnight);">iptables: Sequential "Linear Checklist"</h4>
                    <div class="code-block-wrapper">
                        <div lang="zh" class="code-header">iptables 负载均衡规则深度解析</div>
                        <div lang="en" class="code-header">Detailed iptables Load Balancing Rule Analysis</div>
                        <div class="code-content">
<span lang="zh" style="color: #6a9955;">/* * 当请求到达 Service 时，内核必须按顺序逐行比对概率。</span>
 <span lang="en" style="color: #6a9955;">* When a request hits a Service, the kernel must check probabilities line-by-line.
 */</span>
-A KUBE-SVC-ABC -m statistic --mode random --probability 0.33 -j KUBE-SEP-1
<span lang="zh" style="color: #6a9955;">/* 如果前 33% 没中，则判断下 50%... </span><span lang="en" style="color: #6a9955;">If first 33% miss, check next 50%... */</span>
-A KUBE-SVC-ABC -m statistic --mode random --probability 0.50 -j KUBE-SEP-2
-A KUBE-SVC-ABC -j KUBE-SEP-3

<span lang="zh" style="color: #6a9955;">/* * 复杂度 O(N)：规则条数与 Pod 副本数成正比。在大规模集群中，这种线性遍历会导致 CPU 剧烈震荡。</span>
<span lang="en" style="color: #6a9955;"></span>* Complexity O(N): The number of rules scales with Pod counts. In large clusters, this causes CPU spikes.</span>
                        </div>
                    </div>
                </div>

                <div class="tech-info-card" style="border-top: 4px solid var(--cisco-blue);">
                    <h4 lang="zh" style="color: var(--cisco-blue);">Cilium eBPF：基于哈希的“即时索引”</h4>
                    <h4 lang="en" style="color: var(--cisco-blue);">Cilium eBPF: Hash-based "Instant Index"</h4>
                    <div class="code-block-wrapper">
                        <div lang="zh" class="code-header">Cilium BPF Map 实时条目查看 (ipcache)</div>
                        <div lang="en" class="code-header">Real-time Cilium BPF Map Entry (ipcache)</div>
                        <div class="code-content">
<span style="color: #6a9955;"># cilium-dbg map get cilium_ipcache</span>
<span style="color: #569cd6;">Key (Destination IP)</span>    <span style="color: #569cd6;">Value (Metadata/Identity)</span>
172.16.1.158/32         identity=6   tunnel=10.75.59.82
172.16.2.156/32         identity=27858  tunnel=0.0.0.0

<span lang="zh" style="color: #6a9955;">/* * 复杂度 O(1)：内核直接将目标 IP 提取为 Key，在哈希表中进行单次精准查询。</span>
<span lang="en" style="color: #6a9955;">* Complexity O(1): The kernel extracts Dest IP as the Key and performs a single hash lookup.</span>
<span lang="zh" style="color: #6a9955;">* 无论条目有 20 条还是 20 万条，查找耗时几乎恒定。</span>
<span lang="en" style="color: #6a9955;">* Lookup time is constant whether there are 20 or 200,000 entries.</span>
 */</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="tech-info-card" style="margin-top: 25px; border-top: 4px solid var(--cisco-sky);">
                <h4 lang="zh" style="color: var(--cisco-sky);">内核中的 Map 管理全景 (bpftool 视角)</h4>
                <h4 lang="en" style="color: var(--cisco-sky);">In-Kernel Map Management (via bpftool)</h4>
                <p lang="zh">Cilium 通过多种专用 Map 维护集群状态。例如 <code>cilium_lb4_services_v2</code> 管理服务映射，<code>cilium_lxc</code> 管理本地端点。这种数据驱动的架构，让内核能够像高性能数据库一样瞬间完成决策。</p>
                <p lang="en">Cilium maintains state via specialized Maps. e.g., <code>cilium_lb4_services_v2</code> for services and <code>cilium_lxc</code> for local endpoints. This data-driven architecture lets the kernel make instant decisions like a high-perf database.</p>
            </div>
        </div>
            </div>
        </section>

        <section id="core-values" class="section-container">
            <div class="content-wrapper">
                <h2 lang="zh" style="font-size: 2.5rem; margin-top: 10px; margin-bottom: 10px;">05. 核心价值：eBPF 驱动的云原生进化</h2>
                <h2 lang="en" style="font-size: 2.5rem; margin-top: 10px; margin-bottom: 10px;">05. Core Value: eBPF-Driven Cloud-Native Evolution</h2>
        
                <div id="value-why" class="value-block" style="margin-bottom: 80px;">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 30px;">
                        <span
                            style="background: var(--cisco-red); color: white; padding: 6px 15px; border-radius: 4px; font-size: 1.1rem; font-weight: 800;">WHY</span>
                        <h3 lang="zh" style="font-size: 1.6rem; margin: 0;">传统模型正在撞上“规模之墙”</h3>
                        <h3 lang="en" style="font-size: 1.6rem; margin: 0;">Traditional Models Hitting the "Scalability Wall"
                        </h3>
                    </div>
                    <p lang="zh" style="margin-bottom: 20px; color: #555;">传统的 Kubernetes 网络依赖于
                        iptables，这在处理大规模、动态的云原生环境时已捉襟见肘：</p>
                    <p lang="en" style="margin-bottom: 20px; color: #555;">Legacy K8s networking relies on iptables,
                        which struggles in massive, dynamic cloud-native environments:</p>
                
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                        <div style="background: #fff5f5; border: 1px solid #feb2b2; padding: 25px; border-radius: 8px;">
                            <h4 lang="zh" style="color: #c53030; margin-bottom: 10px;">🚀 突破 $O(N)$ 性能瓶颈</h4>
                            <h4 lang="en" style="color: #c53030; margin-bottom: 10px;">🚀 Breaking $O(N)$
                                Bottlenecks</h4>
                            <p lang="zh" style="font-size: 1.0rem; color: #742a2a;">iptables
                                依赖线性规则扫描，规则越多延迟越高。Cilium 利用 <strong>eBPF 哈希表</strong> 实现了常数级查找时间 ($O(1)$)，无论集群有 10
                                个还是 10,000 个服务，性能始终如一。</p>
                            <p lang="en" style="font-size: 1.0rem; color: #742a2a;">iptables uses linear rule scans
                                (higher latency with more rules). Cilium leverages <strong>eBPF hash maps</strong>
                                for $O(1)$ lookup, ensuring consistent speed at any scale.</p>
                        </div>
                        <div style="background: #fffaf0; border: 1px solid #fbd38d; padding: 25px; border-radius: 8px;">
                            <h4 lang="zh" style="color: #975a16; margin-bottom: 10px;">🛡️ 弃用脆弱的 IP 策略</h4>
                            <h4 lang="en" style="color: #975a16; margin-bottom: 10px;">🛡️ Deprecating Fragile IP
                                Policies</h4>
                            <p lang="zh" style="font-size: 1.0rem; color: #744210;">Pod IP 随重启而变。Cilium
                                抛弃了不稳定的“易逝门牌号”，基于 <strong>身份 ID</strong> 进行策略匹配，实现了真正的逻辑身份隔离。</p>
                            <p lang="en" style="font-size: 1.0rem; color: #744210;">IPs are volatile. Cilium ditches
                                "ephemeral door numbers" in favor of stable <strong> identity IDs</strong> for
                                logic-based security enforcement.</p>
                        </div>
                        <div style="background: #f0fff4; border: 1px solid #9ae6b4; padding: 25px; border-radius: 8px;">
                            <h4 lang="zh" style="color: #2f855a; margin-bottom: 10px;">🔍 消除可观测性盲区</h4>
                            <h4 lang="en" style="color: #2f855a; margin-bottom: 10px;">🔍 Eliminating Observability
                                Blindspots</h4>
                            <p lang="zh" style="font-size: 1.0rem; color: #22543d;">传统工具无法解析微服务间的 L7 语义（如 gRPC
                                路径、Kafka 主题）。Cilium 提供了针对应用层协议的“X 光视野”，让一切透明化。</p>
                            <p lang="en" style="font-size: 1.0rem; color: #22543d;">Legacy tools miss L7 semantics
                                (gRPC, Kafka). Cilium provides "X-ray vision" for application protocols, making
                                cross-service calls fully visible.</p>
                        </div>
                    </div>
                
                </div>
                
                <div id="value-how" class="value-block" style="margin-bottom: 80px;">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 30px;">
                        <span
                            style="background: var(--cisco-blue); color: white; padding: 6px 15px; border-radius: 4px; font-size: 1.1rem; font-weight: 800;">HOW</span>
                        <h3 lang="zh" style="font-size: 1.6rem; margin: 0;">我们如何重塑内核？—— 内核态“硬加速”</h3>
                        <h3 lang="en" style="font-size: 1.6rem; margin: 0;">How we remake the kernel? — In-Kernel "Hard
                            Acceleration"</h3>
                    </div>
                    <div class="feynman-visual-wrapper"
                        style="background: #f8fafd; border: 1px solid var(--cisco-border); border-radius: 12px; padding: 40px; margin-bottom: 40px;">
                        <div style="text-align: center; margin-bottom: 30px;">
                            <h4 lang="zh" style="color: var(--cisco-midnight); font-weight: 800;">
                                类比：从“检查站排队”到“内核直达专线”</h4>
                            <h4 lang="en" style="color: var(--cisco-midnight); font-weight: 800;">Analogy: From
                                "Checkpoint Queues" to "Kernel Express Lane"</h4>
                        </div>
                
                        <svg viewBox="0 0 920 350" width="100%" height="auto" preserveAspectRatio="xMidYMid meet"
                            xmlns="http://www.w3.org/2000/svg">
                            <rect width="920" height="350" rx="12" fill="white" />
                
                            <path d="M50 120H850" stroke="#EDF2F7" stroke-width="1" stroke-dasharray="10 5" />
                            <path d="M50 240H850" stroke="#EDF2F7" stroke-width="1" stroke-dasharray="10 5" />
                
                            <g>
                                <text x="60" y="210" fill="#718096" font-size="15" font-weight="bold" lang="zh">传统路径：iptables 顺序核验
                                    (O(n))</text>
                                <text x="60" y="210" fill="#718096" font-size="15" font-weight="bold" lang="en">Legacy: iptables Linear
                                    Check (O(n))</text>
                
                                <path
                                    d="M100 280 L150 240 L200 280 L250 240 L300 280 L350 240 L400 280 L450 240 L500 280 L550 240 L600 280"
                                    stroke="#CBD5E0" stroke-width="3" fill="none" stroke-linejoin="round" />
                
                                <rect x="140" y="230" width="22" height="22" rx="3" fill="#E53E3E" />
                                <rect x="240" y="230" width="22" height="22" rx="3" fill="#E53E3E" />
                                <rect x="340" y="230" width="22" height="22" rx="3" fill="#E53E3E" />
                                <rect x="440" y="230" width="22" height="22" rx="3" fill="#E53E3E" />
                                <rect x="540" y="230" width="22" height="22" rx="3" fill="#E53E3E" />
                                <text x="620" y="285" fill="#E53E3E" font-size="14" font-weight="bold">Severe
                                    Latency!</text>
                            </g>
                
                            <g>
                                <text x="60" y="90" fill="var(--cisco-blue)" font-size="15" font-weight="bold" lang="zh">Cilium 路径：eBPF
                                    内核直达专线 (O(1))</text>
                                <text x="60" y="90" fill="var(--cisco-blue)" font-size="15" font-weight="bold" lang="en">Cilium: eBPF
                                    Kernel Express Lane (O(1))</text>
                
                                <path d="M100 135 H780" stroke="var(--cisco-blue)" stroke-width="10" stroke-linecap="round" fill="none">
                                    <animate attributeName="stroke-dasharray" from="0, 700" to="700, 0" dur="1.5s" fill="freeze" />
                                </path>
                                <circle cx="785" cy="135" r="12" fill="var(--cisco-blue)">
                                    <animate attributeName="r" values="12;16;12" dur="1s" repeatCount="indefinite" />
                                </circle>
                                <text x="810" y="142" fill="var(--cisco-blue)" font-size="16" font-weight="900">O(1)
                                    Ultra-Fast</text>
                            </g>
                
                            <g transform="translate(60, 30)">
                                <rect x="0" y="0" width="18" height="18" fill="#E53E3E" rx="3" />
                                <text x="25" y="14" font-size="12" fill="#4A5568">Rules/Checkpoints</text>
                                <rect x="200" y="5" width="40" height="8" fill="var(--cisco-blue)" rx="4" />
                                <text x="250" y="14" font-size="12" fill="#4A5568">Kernel Fast-Path</text>
                            </g>
                        </svg>
                        <div lang="zh" style="text-align: center; color: var(--cisco-blue); font-size: 0.8rem; margin-top: 10px;">( 💡 左右滑动查看完整路径 / Swipe to view full path )</div>
                    </div>
                
                    <div class="grid-adaptive-cols" style="gap: 40px;">
                        <div>
                            <h4 lang="zh" style="color: var(--cisco-midnight); margin-bottom: 15px;">🔍 我们如何重塑内核?
                            </h4>
                            <h4 lang="en" style="color: var(--cisco-midnight); margin-bottom: 15px;">🔍 How we
                                remake the kernel?</h4>
                            <ul style="padding-left: 20px; font-size: 1.0rem; line-height: 2;">
                                <li lang="zh"><strong>XDP (大门口门卫)：</strong>在网卡驱动层处理报文。坏人刚到门口就被踢出去，保护内核不受 DDoS 冲击。
                                </li>
                                <li lang="en"><strong>XDP:</strong> Handles packets at the driver stage. Malicious
                                    traffic is blocked at the "gate" before hitting the kernel stack.</li>
                                <li lang="zh"><strong>TC (玄关安检)：</strong>在进入协议栈前的玄关处检查报文内容，执行身份验证和负载均衡。</li>
                                <li lang="en"><strong>TC:</strong> Performs inspection and enforcement at the
                                    protocol entry point (ingress/egress).</li>
                                <li lang="zh"><strong>sockmap (暗门重定向)：</strong>利用 Socket 层重定向。本地 Pod
                                    通信像在两个相邻房间开了一扇暗门，数据直接闪传。</li>
                                <li lang="en"><strong>sockmap:</strong> Short-circuits local Pod communication via a
                                    "secret door" at the socket layer.</li>
                            </ul>
                        </div>
                        <div
                            style="background: rgba(0, 188, 235, 0.05); padding: 30px; border-radius: 8px; border-left: 5px solid var(--cisco-blue);">
                            <p lang="zh" style="font-size: 1.0rem; margin-bottom: 10px;"><strong>💡 深度解析：</strong>
                            </p>
                            <p lang="zh" style="font-size: 1.0rem;">Cilium 利用 eBPF 实现了 <strong>BIG TCP</strong>
                                支持，通过减少内核处理大包时的分片开销，将 IPv6 吞吐量提升了 40-50%，并显著降低了 CPU 占用。这不仅是查找效率的革命，更是数据链路层的一次全面重构。
                            </p>
                            <p lang="en" style="font-size: 1.0rem; margin-bottom: 10px;"><strong>💡 Deep
                                    Dive:</strong></p>
                            <p lang="en" style="font-size: 1.0rem;">Cilium supports <strong>BIG TCP</strong>,
                                boosting IPv6 throughput by 40-50% by reducing segmentation overhead. This isn't
                                just a lookup revolution; it's a complete rethink of the datapath.</p>
                        </div>
                    </div>
                </div>
                
                <div id="value-what" class="value-block">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 40px;">
                        <span
                            style="background: var(--cisco-midnight); color: white; padding: 6px 15px; border-radius: 4px; font-size: 1.1rem; font-weight: 800;">WHAT</span>
                        <h3 lang="zh" style="font-size: 1.6rem; margin: 0;">最终交付了什么？—— 统一的网络、安全与观测平面</h3>
                        <h3 lang="en" style="font-size: 1.6rem; margin: 0;">What is delivered? — Unified Network, Security &
                            Observability</h3>
                    </div>
                                <div
                            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 30px;">
                            <div
                                style="border-top: 4px solid var(--cisco-blue); background: white; padding: 25px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); border-radius: 4px;">
                                <h4 lang="zh" style="color: var(--cisco-midnight); margin-bottom: 15px;">🏎️ 高性能网络
                                    (Networking)</h4>
                                <h4 lang="en" style="color: var(--cisco-midnight); margin-bottom: 15px;">🏎️ High
                                    Performance Networking</h4>
                                <ul lang="zh" style="font-size: 1.0rem; color: #555; padding-left: 15px;">
                                    <li><strong>替代 kube-proxy：</strong>利用 Maglev 算法实现极速负载均衡。</li>
                                    <li><strong>BIG TCP：</strong>支持 IPv6 大包处理，将吞吐量提升 40-50%。</li>
                                    <li><strong>直通 Underlay：</strong>原生 BGP 支持，直接与物理核心交换机对话。</li>
                                </ul>
                                <ul lang="en" style="font-size: 1.0rem; color: #555; padding-left: 15px;">
                                    <li><strong>kube-proxy replacement:</strong> Instant LB via Maglev hash.</li>
                                    <li><strong>BIG TCP:</strong> Boosts IPv6 throughput by 40-50%.</li>
                                    <li><strong>Native BGP:</strong> Direct integration with physical core switches.
                                    </li>
                                </ul>
                            </div>

                            <div
                                style="border-top: 4px solid var(--cisco-midnight); background: white; padding: 25px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); border-radius: 4px;">
                                <h4 lang="zh" style="color: var(--cisco-midnight); margin-bottom: 15px;">🛡️ 零信任安全
                                    (Security)</h4>
                                <h4 lang="en" style="color: var(--cisco-midnight); margin-bottom: 15px;">🛡️ Zero-Trust
                                    Security</h4>
                                <ul lang="zh" style="font-size: 1.0rem; color: #555; padding-left: 15px;">
                                    <li><strong>L7 深层防御：</strong>拦截 gRPC 路径、HTTP 方法及 DNS 请求。</li>
                                    <li><strong>透明加密：</strong>内核级 WireGuard/IPsec 自动加密，零业务感知。</li>
                                    <li><strong>运行时安全 (Tetragon)：</strong>毫秒级响应风险，一旦违规直接 sigkill。</li>
                                </ul>
                                <ul lang="en" style="font-size: 1.0rem; color: #555; padding-left: 15px;">
                                    <li><strong>L7 Deep Defense:</strong> Filter gRPC, HTTP methods, and DNS.</li>
                                    <li><strong>Transparent Encryption:</strong> In-kernel WireGuard/IPsec protection.
                                    </li>
                                    <li><strong>Tetragon:</strong> Millisecond response with auto-sigkill for threats.
                                    </li>
                                </ul>
                            </div>

                            <div
                                style="border-top: 4px solid var(--cisco-sky); background: white; padding: 25px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); border-radius: 4px;">
                                <h4 lang="zh" style="color: var(--cisco-midnight); margin-bottom: 15px;">🔍 全栈可观测性
                                    (Observability)</h4>
                                <h4 lang="en" style="color: var(--cisco-midnight); margin-bottom: 15px;">🔍 Full-Stack
                                    Observability</h4>
                                <ul lang="zh" style="font-size: 1.0rem; color: #555; padding-left: 15px;">
                                    <li><strong>无代理观测：</strong>无需 Sidecar 即可抓取流量“黄金指标”。</li>
                                    <li><strong>依赖图谱：</strong>Hubble 自动生成实时的微服务拓扑地图。</li>
                                    <li><strong>精准排障：</strong>通过 eBPF 明确报告每个包的丢弃原因与具体内核位置。</li>
                                </ul>
                                <ul lang="en" style="font-size: 1.0rem; color: #555; padding-left: 15px;">
                                    <li><strong>Sidecar-less:</strong> Extract "Golden Signals" without proxies.</li>
                                    <li><strong>Service Maps:</strong> Hubble auto-generates real-time service
                                        topologies.</li>
                                    <li><strong>Drop Diagnosis:</strong> Pinpoints the exact reason and kernel point for
                                        drops.</li>
                                </ul>
                            </div>
                        </div>
                </div>

                <div class="tech-sub-section">
            <h3 lang="zh">现代流量治理：Gateway API</h3>
            <h3 lang="en">Modern Traffic Governance: Gateway API</h3>
            <p lang="zh">
                Cilium 不仅仅是一个连接插件，更是复杂的流量编排引擎。它原生支持 <b>Gateway API</b>，通过 eBPF 实现内核级的 HTTP 路由、Header 注入及权重分流。这解决了传统 Ingress 模式下，因规则更新导致 Proxy 频繁重载（Reload）而产生的长尾延迟问题。
            </p>
            <p lang="en">
                Cilium is more than a connectivity plugin; it's a sophisticated traffic orchestration engine. It natively supports the <b>Gateway API</b>, implementing kernel-level HTTP routing and header manipulation via eBPF. This eliminates the tail latency caused by frequent proxy reloads in traditional Ingress models during rule updates.
            </p>

            <div class="grid-adaptive-cols">
                <div class="tech-info-card" style="border-top: 4px solid var(--cisco-blue);">
                    <h4 lang="zh" style="color: var(--cisco-blue);">面向角色的资源模型</h4>
                    <h4 lang="en" style="color: var(--cisco-blue);">Role-oriented Resource Model</h4>
                    <p lang="zh">通过将配置拆分为 GatewayClass、Gateway 和 Route，实现了基础设施管理员与应用开发者的职责分离，极大降低了大规模集群中的配置冲突概率。</p>
                    <p lang="en">By splitting configs into GatewayClass, Gateway, and Routes, it separates duties between infrastructure admins and app developers, significantly reducing config conflicts in large clusters.</p>
                </div>
                <div class="tech-info-card" style="border-top: 4px solid var(--cisco-sky);">
                    <h4 lang="zh" style="color: var(--cisco-sky);">内核级无感知切换</h4>
                    <h4 lang="en" style="color: var(--cisco-sky);">In-Kernel Seamless Switching</h4>
                    <p lang="zh">流量调度逻辑直接注入 eBPF 程序中，无论是灰度发布还是 A/B 测试，流量切换都在内核中毫秒级完成，且不产生任何上下文拷贝开销。</p>
                    <p lang="en">Traffic scheduling logic is injected directly into eBPF programs. Whether canary releases or A/B testing, traffic switching happens in-kernel in milliseconds without any context-copying overhead.</p>
                </div>
            </div>
        </div>
            </div>
        </section>

        <section id="performance-dive" class="section-container">
            <div class="content-wrapper">
                <h2 lang="zh" style="font-size: 2.5rem; margin-top: 10px; margin-bottom: 10px;">06. 性能之巅：eBPF 的降维打击</h2>
                <h2 lang="en" style="font-size: 2.5rem; margin-top: 10px; margin-bottom: 10px;">06. Peak Performance: The eBPF Advantage</h2>
 <p lang="zh" class="section-lead">
            性能优化不仅仅是代码的精简，更是路径的重构。Cilium 通过将转发逻辑下沉至内核的最底端，彻底消除了数据包处理过程中的系统级冗余。
        </p>
        <p lang="en" class="section-lead">
            Performance optimization is more than code trimming; it's path restructuring. Cilium eliminates system-level redundancy by pushing forwarding logic to the lowest layers of the kernel.
        </p>
        <p lang="zh">
        为什么传统 CNI 慢？因为数据包每经过一个 <b>veth pair</b>，都要触发一次 Linux 内核的中断处理和协议栈完整遍历。
        <br>在万核 CPU 的今天，性能瓶颈不再是带宽，而是 <b>CPU 缓存失效 (Cache Miss)</b> 和 <b>内核/用户态切换</b>。Cilium 的优化就是：<b>让数据包在内核中“直接闪传”，不走回头路。它是在<b>减少 CPU 的无效做功</b>。这在 AI 训练等高频通信场景下，直接决定了 GPU 的有效利用率。</b>
    </p>
    <p lang="en">
        Why is traditional CNI slow? Each <b>veth pair</b> crossing triggers kernel interrupts and full stack traversals. 
        In the era of multi-core CPUs, the bottleneck is <b>Cache Misses</b> and <b>Context Switching</b>. Cilium's principle: <b>Let packets "teleport" within the kernel without retracing paths.It reduces the amount of wasted CPU work. In high-frequency communication scenarios such as AI training, this directly determines the effective utilization of the GPU.</b>
    </p>
                <div id="perf-mechanism" class="perf-container" style="margin-bottom: 80px;">
                    <h3 class="cisco-sub-header" lang="zh">构建“快速通道”：内核级的直接重定向</h3>
                    <h3 class="cisco-sub-header" lang="en">The Fast Track: Kernel-Level Redirection</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 30px;">
                        <div style="background: #fff; border: 1px solid #eef2f6; padding: 25px; border-radius: 8px;">
                            <span class="algorithm-tag">XDP</span>
                            <h4 lang="zh">硬件级线速处理</h4>
                            <h4 lang="en">Hardware-level Line Speed</h4>
                            <p lang="zh" style="font-size: 1.0rem; color: #555;">
                                通过 <strong>XDP (eXpress Data Path)</strong>，Cilium 在数据包甚至还没进入 Linux
                                内核协议栈之前就完成负载均衡。实验证明，CPU 负载可降低多达 <strong>72 倍</strong>。
                            </p>
                            <p lang="en" style="font-size: 1.0rem; color: #555;">
                                Using <strong>XDP</strong>, Cilium processes packets before they hit the kernel
                                stack. Studies show CPU load can be reduced by up to <strong>72x</strong>.
                            </p>
                        </div>
                        <div style="background: #fff; border: 1px solid #eef2f6; padding: 25px; border-radius: 8px;">
                            <span class="algorithm-tag">sockmap</span>
                            <h4 lang="zh">Socket 层级“短路”</h4>
                            <h4 lang="en">Socket-layer Short-circuit</h4>
                            <p lang="zh" style="font-size: 1.0rem; color: #555;">
                                对于同节点的 Pod 通信，Cilium 利用 <strong>sockmap</strong> 在 Socket 层面直接重定向报文，跳过了昂贵的内核上下文切换与每包
                                NAT 操作。
                            </p>
                            <p lang="en" style="font-size: 1.0rem; color: #555;">
                                For intra-node Pod comms, <strong>sockmap</strong> redirects traffic at the Socket
                                layer, bypassing expensive context switches and per-packet NAT.
                            </p>
                        </div>
                        <div style="background: #fff; border: 1px solid #eef2f6; padding: 25px; border-radius: 8px;">
                            <span class="algorithm-tag">BIG TCP</span>
                            <h4 lang="zh">高带宽吞吐增强</h4>
                            <h4 lang="en">High-Bandwidth Boosting</h4>
                            <p lang="zh" style="font-size: 1.0rem; color: #555;">
                                支持 IPv6 <strong>BIG TCP</strong>，允许内核处理超过 64KB 的超大报文，吞吐量提升
                                <strong>40-50%</strong>，完美适配 AI 训练等海量数据场景。
                            </p>
                            <p lang="en" style="font-size: 1.0rem; color: #555;">
                                Supports IPv6 <strong>BIG TCP</strong>, allowing the kernel to handle massive
                                packets over 64KB, boosting throughput by <strong>40-50%</strong> for AI workloads.
                            </p>
                        </div>
                    </div>
                </div>
        
                <div id="perf-roi" class="perf-container">
                    <h3 class="cisco-sub-header" lang="zh">架构红利：KPR 与 Sidecar-free</h3>
                    <h3 class="cisco-sub-header" lang="en">Architectural ROI: KPR & Sidecar-free</h3>
                    <h4 lang="zh" style="color: var(--cisco-midnight); font-size: 1.6rem; margin-bottom: 25px;">
                        KPR 是 Cilium 实现极致性能的秘密武器</h4>
                    <h4 lang="en" style="color: var(--cisco-midnight); font-size: 1.6rem; margin-bottom: 25px;">
                        KPR is Cilium's secret weapon for peak performance.</h4>

                    <p lang="zh" style="font-size: 1.05rem; line-height: 1.8; margin-bottom: 30px;">
                        Kube-proxy Replacement (KPR)的本质是利用 eBPF 在内核级别彻底替换传统的 <code>kube-proxy</code> 及其依赖的
                        <code>iptables</code> 规则。在帝国初期，iptables 是万能的，但随着快递员（Pod）规模的爆炸，这种“手动翻阅纸质名单”的模式已成为发展的最大枷锁。
                    </p>
                    <p lang="en" style="font-size: 1.05rem; line-height: 1.8; margin-bottom: 30px;">
                         It uses eBPF to replace the
                        traditional <code>kube-proxy</code> and its <code>iptables</code>-based logic at the
                        kernel level. While iptables served the empire well initially, it has become a
                        bottleneck as the number of couriers (Pods) exploded.
                    </p>
        
                    <div
                        style="background: #f0faff; border-left: 4px solid var(--cisco-blue); padding: 60px; border-radius: 4px;">
                        <h4 lang="zh" style="color: var(--cisco-blue); margin-bottom: 15px;">Cilium
                            方案：$O(1)$ 极速转发</h4>
                        <h4 lang="en" style="color: var(--cisco-blue); margin-bottom: 15px;">Cilium
                            Solution: $O(1)$ Fast-Path</h4>
                        <p lang="zh" style="font-size: 1.0rem; color: #555;">
                            <strong>哈希查找：</strong>利用 eBPF 哈希表。无论集群中有 10 个还是 10,000 个服务，查询耗时始终恒定，性能不随规模衰减。
                            <br><br>
                            <strong>Socket 级重定向：</strong>在应用发起 <code>connect()</code> 调用时，Cilium 就在 Socket
                            层面执行了重写。这意味着数据包在生成前就确定了目标，彻底消除了每包 NAT 的开销。
                        </p>
                        <p lang="en" style="font-size: 1.0rem; color: #555;">
                            <strong>Hash Tables:</strong> Uses eBPF maps for constant-time lookup.
                            Performance remains static regardless of the service count.
                            <br><br>
                            <strong>Socket-level Steering:</strong> Cilium rewrites at the
                            <code>connect()</code> syscall. Targets are determined before packet generation,
                            eliminating per-packet NAT overhead.
                        </p>
                    </div>
        
                    <div
                        style="background: var(--cisco-midnight); color: white; padding: 40px; border-radius: 12px; margin-bottom: 60px;">
                        <h4 lang="zh" style="color: var(--cisco-blue); margin-bottom: 20px;">KPR 部署模式对比</h4>
                        <h4 lang="en" style="color: var(--cisco-blue); margin-bottom: 20px;">KPR Deployment Mode
                            Comparison</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 30px;">
                            <div>
                                <strong lang="zh">Strict (严格模式)</strong><strong lang="en">Strict Mode</strong>
                                <p lang="zh" style="font-size: 1.0rem; opacity: 0.8; margin-top: 10px;">完全禁用
                                    kube-proxy，Cilium 接管所有负载均衡逻辑。性能最高，推荐生产首选。</p>
                                <p lang="en" style="font-size: 1.0rem; opacity: 0.8; margin-top: 10px;">
                                    Completely disables kube-proxy. Best performance, recommended for
                                    production.</p>
                            </div>
                            <div>
                                <strong lang="zh">Partial (部分模式)</strong><strong lang="en">Partial Mode</strong>
                                <p lang="zh" style="font-size: 1.0rem; opacity: 0.8; margin-top: 10px;">Cilium
                                    仅替换 NodePort 或 HostPort。与 kube-proxy 共存，适用于旧版内核。</p>
                                <p lang="en" style="font-size: 1.0rem; opacity: 0.8; margin-top: 10px;">
                                    Replaces only specific functions. Co-exists with kube-proxy for legacy
                                    kernels.</p>
                            </div>
                            <div style="opacity: 0.6;">
                                <strong lang="zh">Disabled (默认)</strong><strong lang="en">Disabled Mode</strong>
                                <p lang="zh" style="font-size: 1.0rem; margin-top: 10px;">完全依赖传统的 kube-proxy
                                    处理流量。</p>
                                <p lang="en" style="font-size: 1.0rem; margin-top: 10px;">Relies entirely on
                                    legacy iptables-based kube-proxy.</p>
                            </div>
                        </div>
                    </div>
        
                    <h4 lang="zh" style="color: var(--cisco-midnight); font-size: 1.6rem; margin-bottom: 25px;">
                        Sidecar-free Service Mesh：解脱“边车”的负重</h4>
                    <h4 lang="en" style="color: var(--cisco-midnight); font-size: 1.6rem; margin-bottom: 25px;">
                        Sidecar-free Service Mesh: Relieving the Burden</h4>
        
                    <div style="display: flex; gap: 40px; align-items: start; margin-bottom: 40px;">
                        <div style="flex: 1;">
                            <p lang="zh" style="line-height: 1.8;">
                                传统的服务网格（如 Istio）依赖 <strong>Sidecar（边车）</strong> 模式：每个 Pod 都必须配备一个私人保镖（Envoy 代理）。
                                这意味着任何一封快递包离开宿舍，都必须穿过三次协议栈：快递员 &rarr; 保镖 &rarr; 宿主机内核 &rarr; 网线。
                            </p>
                            <p lang="en" style="line-height: 1.8;">
                                Legacy Service Meshes (e.g., Istio) rely on <strong>Sidecars</strong>: every Pod
                                needs a private "guard" (Envoy proxy).
                                Any packet must traverse the stack 3 times: App &rarr; Sidecar &rarr; Kernel
                                &rarr; Network.
                            </p>
                        </div>
                        <div
                            style="background: rgba(0, 188, 235, 0.05); padding: 25px; border-radius: 8px; flex: 1; border: 1px solid rgba(0, 188, 235, 0.1);">
                            <p lang="zh" style="font-size: 1.0rem;">
                                <strong>Cilium 的革命：</strong>将网格功能直接植入内核。L3/L4 任务（路由、加密、LB）由 eBPF 零开销完成；只有复杂的 L7
                                解析才按需重定向到节点级共享代理（Per-node Envoy）。
                            </p>
                            <p lang="en" style="font-size: 1.0rem;">
                                <strong>Cilium's Revolution:</strong> Mesh logic baked into the kernel. L3/L4
                                tasks are handled by eBPF with near-zero overhead; L7 parsing is redirected to a
                                shared Per-node Envoy on-demand.
                            </p>
                        </div>
                    </div>
        
                    <div style="margin-top: 60px;">
                        <h4 lang="zh"
                            style="text-align: center; color: var(--cisco-midnight); margin-bottom: 40px; font-size: 1.3rem;">
                            消灭边车后的“商业红利”</h4>
                        <h4 lang="en"
                            style="text-align: center; color: var(--cisco-midnight); margin-bottom: 40px; font-size: 1.3rem;">
                            Economic ROI of Sidecar-free Architecture</h4>
        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 30px;">
                            <div
                                style="background: white; border: 1px solid #e1e8ed; padding: 30px; border-radius: 8px; position: relative;">
                                <div
                                    style="position: absolute; top: -15px; left: 20px; background: var(--cisco-blue); color: white; padding: 4px 12px; border-radius: 4px; font-weight: bold; font-size: 1.0rem;">
                                    AVG. SAVINGS</div>
                                <div style="font-size: 2.5rem; font-weight: 800; color: var(--cisco-blue); margin: 15px 0;">
                                    32% +</div>
                                <p lang="zh" style="font-size: 1.0rem; color: #666;">基于 1000 节点规模测算，大幅削减云端计算成本。
                                </p>
                                <p lang="en" style="font-size: 1.0rem; color: #666;">Based on a 1000-node
                                    cluster, significantly cutting cloud bills.</p>
                            </div>
        
                            <div style="background: #f8fafd; border: 1px solid #e1e8ed; padding: 30px; border-radius: 8px;">
                                <h4 lang="zh" style="margin-bottom: 15px; color: var(--cisco-midnight); font-weight: 700;">
                                    为什么能省钱？ (The Economic Breakdown)</h4>
                                <h4 lang="en" style="margin-bottom: 15px; color: var(--cisco-midnight); font-weight: 700;">
                                    Why Save Money?</h4>
                                <ul style="font-size: 1.0rem; color: #555; padding-left: 20px; line-height: 1.8;">
                                    <li lang="zh"><strong>内存冗余消除：</strong> 10,000 Pod = 500GB Envoy 浪费。Cilium
                                        仅需微量 Node-level 内存。</li>
                                    <li lang="en"><strong>Memory Redundancy:</strong> 10k Pods = 500GB Envoy
                                        waste. Cilium uses minimal node-level memory.</li>
                                    <li lang="zh"><strong>指令路径缩减：</strong> 报文不再频繁跨越用户/内核边界，减少上下文切换。</li>
                                    <li lang="en"><strong>Path Reduction:</strong> Packets no longer frequent
                                        User/Kernel boundary crossings.</li>
                                    <li lang="zh"><strong>网关整合：</strong> Gateway API 替代了 F5/Nginx 南北向网关，削减 15%
                                        硬件成本。</li>
                                    <li lang="en"><strong>Gateway Consolidation:</strong> Replaces external
                                        gateways, cutting infra costs by 15%.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                        <div id="perf-benchmarks" class="perf-container" style="margin-bottom: 80px;">
                    <div
                        style="background: #F8FAFC; padding: 40px; border-radius: 20px; border: 1px solid var(--cisco-platinum);">
                        <h4 lang="zh" style="text-align: center; margin-bottom: 30px; color: var(--cisco-midnight);">Cilium
                            性能基准测试量化数据</h4>
                        <h4 lang="en" style="text-align: center; margin-bottom: 30px; color: var(--cisco-midnight);">Cilium
                            Benchmark Metrics</h4>
                        <div class="metric-grid">
                            <div class="metric-card">
                                <span class="metric-value">9.62 Gbps</span>
                                <span lang="zh" class="metric-label">TCP 性能</span>
                                <span lang="en" class="metric-label">TCP Throughput (Direct)</span>
                            </div>
                            <div class="metric-card">
                                <span class="metric-value">-35%</span>
                                <span lang="zh" class="metric-label">P99 延迟降低</span>
                                <span lang="en" class="metric-label">P99 Latency reduction</span>
                            </div>
                            <div class="metric-card">
                                <span class="metric-value">Unlimited</span>
                                <span lang="zh" class="metric-label">Service 扩展规模</span>
                                <span lang="en" class="metric-label">Service Scalability</span>
                            </div>
                            <div class="metric-card">
                                <span class="metric-value">72x</span>
                                <span lang="zh" class="metric-label">CPU 效率提升</span>
                                <span lang="en" class="metric-label">CPU Efficiency Gain</span>
                            </div>
                        </div>
        
                        <div
                            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 30px; margin-top: 30px;">
                            <div class="perf-table-wrapper">
                                <table class="perf-table">
                                    <thead>
                                        <tr>
                                            <th lang="zh">网络模式</th>
                                            <th lang="en">Networking Mode</th>
                                            <th lang="zh">MTU 1500 (Gbps)</th>
                                            <th lang="en">Gbps (MTU 1500)</th>
                                            <th lang="zh">CPU 消耗</th>
                                            <th lang="en">CPU Cost</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Cilium (Direct Routing)</td>
                                            <td class="perf-highlight">9.62</td>
                                            <td style="color: #4fba6f; font-weight: bold;">极低 (Minimal)</td>
                                        </tr>
                                        <tr>
                                            <td>Calico (IPIP)</td>
                                            <td>8.45</td>
                                            <td>中 (Medium)</td>
                                        </tr>
                                        <tr>
                                            <td>Flannel (VXLAN)</td>
                                            <td>7.41</td>
                                            <td style="color: #e63946;">高 (Heavy)</td>
                                        </tr>
                                    </tbody>
                                </table>
                                <p lang="zh" style="font-size: 1.0rem; color: #888; padding: 10px 15px;">* 数据源自 2021 CNI
                                    基准测试。封装（Overlay）是性能损耗的元凶。</p>
                                <p lang="en" style="font-size: 1.0rem; color: #888; padding: 10px 15px;">* Data sourced from 2021 CNI benchmarks. Overlay is a major cause of performance degradation.</p>
                                <div lang="zh" style="text-align: center; color: var(--cisco-blue); font-size: 0.8rem; margin-top: 5px;">( 💡 左右滑动查看完整数据 / Swipe for data )</div>
                            </div>
        
                            <div style="background: white; padding: 30px; border-radius: 8px; border: 1px solid #e1e8ed;">
                                <span class="algorithm-tag" style="background: var(--cisco-blue);">Maglev LB</span>
                                <h4 lang="zh">谷歌级 Maglev 负载均衡算法</h4>
                                <h4 lang="en">Google-class Maglev LB Algorithm</h4>
                                <p lang="zh" style="font-size: 1.0rem; color: #555; line-height: 1.8;">
                                    在大规模集群中，节点重启或漂移会导致传统 LB 丢失连接状态。Cilium 引入了谷歌研发的 <strong>Maglev 一致性哈希算法</strong>。
                                    <br><strong>价值：</strong>即使后端节点频繁变化，Maglev 也能确保已有连接始终命中相同的后端，实现极致的连接一致性与极低的 CPU 查询开销。
                                </p>
                                <p lang="en" style="font-size: 1.0rem; color: #555; line-height: 1.8;">
                                    Cilium implements Google's <strong>Maglev Consistent Hashing</strong>. It ensures
                                    connection stickiness and consistent backend targeting even during massive node
                                    churns, with minimal CPU overhead.
                                </p>
                            </div>
                        </div>
                        <div
                            style="background: var(--cisco-midnight); color: white; padding: 35px; border-radius: 12px; margin-top: 50px; text-align: center;">
                            <p lang="zh" style="font-size: 1.1rem; opacity: 0.9;">
                                <strong>性能结语：</strong>Cilium 通过 eBPF 实现了网络处理从“软件定义”向“硬件加速感”的飞跃。这种优势在支撑 <strong>OpenAI 7,500
                                    节点</strong> 的 GPU 集群时，已转化为实实在在的算力红利。
                            </p>
                            <p lang="en" style="font-size: 1.1rem; opacity: 0.9;">
                                <strong>Performance Verdict:</strong> Cilium evolves networking from "software-defined" to
                                "hardware-accelerated" feel. At <strong>OpenAI's 7,500-node</strong> scale, this efficiency
                                directly translates into computational ROI.
                            </p>
                        </div>
                    </div>
                </div>

        
                </div>
            </div>
        </section>

        <section id="security-identity-chapter" class="section-container">
            <div class="content-wrapper">
                <h2 lang="zh" style="font-size: 2.5rem; margin-top: 10px; margin-bottom: 10px;">07. 身份感知安全：终结 IP 的“数字迷宫”</h2>
                <h2 lang="en" style="font-size: 2.5rem; margin-top: 10px; margin-bottom: 10px;">07. Identity-based Security: Ending the IP "Digital Maze"</h2>

                <div id="sec-7-1" class="sec-sub-section" style="margin-bottom: 80px;">
                    <p class="section-lead" lang="zh">
                        在云原生环境中，IP 地址已演变为“瞬态消耗品”。我们需要一套与底层网络拓扑完全解耦的<strong>零信任安全架构</strong>。
                    </p>
                    <p class="section-lead" lang="en">
                        In cloud-native, IPs are ephemeral. We need a <strong>Zero Trust architecture</strong> decoupled from
                        network topology.
                    </p>
                    <div class="metaphor-grid">
                        <div class="metaphor-card legacy">
                            <div style="font-size: 2.5rem; margin-bottom: 20px;">💺</div>
                            <h3 lang="zh" style="color: #c53030;">传统网络：看座位号 (IP)</h3>
                            <h3 lang="en" style="color: #c53030;">Legacy: The Seat Number</h3>
                            <p lang="zh" style="font-size: 1rem; color: #555;">
                                乘客（Pod）在机舱内频繁换座。空乘（防火墙）必须时刻盯着谁坐在哪。每当有人换座，空乘就得重写上万条规则。
                                <br><br>
                                <strong>痛点：</strong>这种基于“座位号”的核验不仅缓慢（$O(n)$ 线性损耗），且极易在换座瞬间出现安全真空。
                            </p>
                            <p lang="en" style="font-size: 1rem; color: #555;">
                                Passengers change seats frequently. Flight attendants (Firewalls) must track every move. Every
                                swap requires rewriting 10k+ rules.
                                <br><br>
                                <strong>Pain:</strong> This "Seat-based" check is slow ($O(n)$ drain) and creates security gaps
                                during the swap moment.
                            </p>
                        </div>
                        <div class="metaphor-card cilium">
                            <div style="font-size: 2.5rem; margin-bottom: 20px;">🎫</div>
                            <h3 lang="zh" style="color: var(--cisco-blue);">Cilium：验登机牌 (Identity)</h3>
                            <h3 lang="en" style="color: var(--cisco-blue);">Cilium: The Boarding Pass</h3>
                            <p lang="zh" style="font-size: 1rem; color: #555;">
                                无论你坐在哪个位置（IP），你手里握着的“登机牌”（身份标签）是唯一的。内核只认牌子不认座，只要你是“VIP”，任何位置都能获得对应权限。
                                <br><br>
                                <strong>红利：</strong>规则判定不随 IP 变化，集群扩容 100 倍，安全判定的延迟依然维持在常数级 <strong>$O(1)$</strong>。
                            </p>
                            <p lang="en" style="font-size: 1rem; color: #555;">
                                No matter where you sit (IP), your "Boarding Pass" (Identity ID) is persistent. The kernel
                                checks the pass privileges.
                                <br><br>
                                <strong>Bonus:</strong> Rules don't shift with IPs. Even with 100x cluster growth, check latency
                                remains constant at <strong>$O(1)$</strong>.
                            </p>
                        </div>
                    </div>
                </div>

                <hr style="border: 0; border-top: 1px solid var(--cisco-platinum); margin: 60px 0;">

                <div id="sec-7-2" class="sec-sub-section" style="margin-bottom: 80px;">
                    <h3 class="cisco-sub-header" lang="zh">深度机制：身份标识的内核生命周期</h3>
                    <h3 class="cisco-sub-header" lang="en">Mechanism: The Lifecycle of Identity</h3>
<div class="roadmap-step">
    <strong lang="zh" style="font-size: 1.1rem; display: block; margin-bottom: 8px;">1. 数字化身份分层分配 (Layered Allocation)</strong>
    <strong lang="en" style="font-size: 1.1rem; display: block; margin-bottom: 8px;">1. Layered Digital Identity Allocation</strong>
    <p lang="zh" style="opacity: 0.9; font-size: 1.0rem;">
        Cilium 将标签哈希为 <code>uint32</code> 数值索引。为了兼顾效率与兼容性，身份被严格划分为不同段位：
        <strong>Cluster-local</strong>（16位空间）确保单集群极速性能；
        <strong>ClusterMesh</strong>（24位空间）利用高 8 位作为 <code>cluster-id</code> 实现跨集群寻址。
        此外，<strong>Identity 0</strong> 具有特殊语义，在 Hubble 中代表未知，而在 eBPF 路径中作为通配符（Wildcard）存在。
    </p>
    <p lang="en" style="opacity: 0.9; font-size: 1.0rem;">
        Cilium hashes labels into <code>uint32</code> indices. Identities are segmented for efficiency: 
        <strong>Cluster-local</strong> (16-bit) for intra-cluster speed; 
        <strong>ClusterMesh</strong> (24-bit) using high 8-bits as <code>cluster-id</code>. 
        Note that <strong>Identity 0</strong> acts as a wildcard in eBPF datapath and represents "not found" in Hubble.
    </p>
</div>

                    <div class="roadmap-step">
                        <strong lang="zh" style="font-size: 1.1rem; display: block; margin-bottom: 8px;">2. 全程报文标记与透传
                            (Tagging)</strong>
                        <strong lang="en" style="font-size: 1.1rem; display: block; margin-bottom: 8px;">2. Packet Tagging &
                            Transparency</strong>
                        <p lang="zh" style="opacity: 0.9; font-size: 1.0rem;">
                            该 ID 会被无感知地注入 <strong>VXLAN 封装头部</strong> 或在内核数据结构（skb）中携带。报文从此自带“逻辑身份证”，跨节点通信时接收端内核能瞬间提取源身份。
                        </p>
                        <p lang="en" style="opacity: 0.9; font-size: 1.0rem;">
                            The ID is transparently injected into <strong>VXLAN headers</strong> or carried in kernel structures
                            (skb). Every packet carries a "logical ID card," allowing receivers to identify the source instantly
                            across nodes.
                        </p>
                    </div>

                    <div class="roadmap-step">
                        <strong lang="zh" style="font-size: 1.1rem; display: block; margin-bottom: 8px;">3. 常数级 $O(1)$ 判定
                            (Enforcement)</strong>
                        <strong lang="en" style="font-size: 1.1rem; display: block; margin-bottom: 8px;">3. Constant-time $O(1)$
                            Enforcement</strong>
                        <p lang="zh" style="opacity: 0.9; font-size: 1.0rem;">
                            接收端内核 eBPF 程序将 <code>Source Identity</code> 作为 Key，直接在 <strong>BPF Policy
                                Map</strong>（哈希表）中执行单次检索。这种机制从根本上解决了规则多、延迟高的行业痼疾。
                        </p>
                        <p lang="en" style="opacity: 0.9; font-size: 1.0rem;">
                            The receiver's eBPF program uses the <code>Source Identity</code> as a Key to perform a single
                            lookup in the <strong>BPF Policy Map</strong>. This eliminates the latency scaling issue found in
                            legacy firewalls.
                        </p>
                    </div>
                </div>

                <hr style="border: 0; border-top: 1px solid var(--cisco-platinum); margin: 60px 0;">

                <div id="sec-7-3" class="sec-sub-section">
                    <h3 class="cisco-sub-header" lang="zh">零信任实践：从端口到 API 的深度控制</h3>
                    <h3 class="cisco-sub-header" lang="en">Zero Trust in Practice: Port to API Control</h3>
                    <div class="grid-adaptive-cols">
                        <div class="code-block-wrapper">
                            <div lang="zh" class="code-header">L3/L4 身份感知策略 (identity-aware.yaml)</div>
                            <div lang="en" class="code-header">L3/L4 Identity Aware Policy (identity-aware.yaml)</div>
                            <div class="code-content">
<span class="k">apiVersion</span>: <span class="v">"cilium.io/v2"</span>
<span class="k">kind</span>: <span class="v">CiliumNetworkPolicy</span>
<span class="k">metadata</span>:
  <span class="k">name</span>: <span class="v">"secure-payment-access"</span>
<span class="k">spec</span>:
  <span class="k">endpointSelector</span>:
    <span class="k">matchLabels</span>:
      <span class="k">app</span>: <span class="v">payment-db</span>
  <span class="k">ingress</span>:
  - <span class="k">fromEndpoints</span>:
    - <span class="k">matchLabels</span>:
        <span class="k">app</span>: <span class="v">payment-service</span> <span lang="zh" class="c"># 基于逻辑标签而非 IP</span><span lang="en" class="c"># Based on Logical Tags not IP</span>
        <span class="k">env</span>: <span class="v">prod</span>
    <span class="k">toPorts</span>:
    - <span class="k">ports</span>:
      - <span class="k">port</span>: <span class="v">"6379"</span>
        <span class="k">protocol</span>: <span class="v">TCP</span>
                            </div>
                        </div>

                        <div class="code-block-wrapper">
                            <div lang="zh" class="code-header">L7 API 级深层策略 (l7-api-aware.yaml)</div>
                            <div lang="en" class="code-header">L7 API level deep policy (l7-api-aware.yaml)</div>
                            <div class="code-content">
<span class="k">ingress</span>:
- <span class="k">fromEndpoints</span>:
  - <span class="k">matchLabels</span>:
      <span class="k">app</span>: <span class="v">frontend</span>
  <span class="k">toPorts</span>:
  - <span class="k">ports</span>:
    - <span class="k">port</span>: <span class="v">"80"</span>
      <span class="k">protocol</span>: <span class="v">TCP</span>
    <span class="k">rules</span>:
      <span class="k">http</span>:
      - <span class="k">method</span>: <span class="v">"GET"</span>
        <span class="k">path</span>: <span class="v">"/v1/public/.*"</span> <span lang="zh" class="c"># 允许 GET 公开路径</span><span lang="en" class="c"># Permit GET /public</span>
      - <span class="k">method</span>: <span class="v">"POST"</span>
        <span class="k">path</span>: <span class="v">"/admin"</span>
        <span class="k">deny</span>: <span class="v">true</span> <span lang="zh" class="c"># 拒绝敏感操作</span><span lang="en" class="c"># Deny sensitive operations.</span>
                            </div>
                        </div>
                    </div>
                    <h3 lang="zh" style="color: var(--cisco-midnight); text-align: center; margin: 60px 0 40px;">零信任网络的三大支柱</h3>
                    <h3 lang="en" style="color: var(--cisco-midnight); text-align: center; margin: 60px 0 40px;">Three Pillars
                        of Zero Trust Networking</h3>
                    <div class="zt-pillar-grid">
                        <div class="zt-pillar">
                            <h4 lang="zh" style="color: var(--cisco-midnight);">1. API 级 (L7) 深层防御</h4>
                            <h4 lang="en" style="color: var(--cisco-midnight);">1. L7 API-Aware Security</h4>
                            <p lang="zh" style="font-size: 1.0rem; color: #666; margin-top: 15px;">
                                传统方案止步于端口。Cilium 能够理解 <strong>gRPC、HTTP、Kafka、DNS</strong>。
                                <br><br>
                                <strong>示例：</strong>你可以通过 eBPF + Envoy 声明：“仅允许前端服务通过 GET 方法访问后端的 <code>/v1/public/*</code>，拒绝所有对
                                <code>/admin</code> 的尝试。”
                            </p>
                            <p lang="en" style="font-size: 1.0rem; color: #666; margin-top: 15px;">
                                Legacy stops at ports. Cilium understands <strong>gRPC, HTTP, Kafka, and DNS</strong>.
                                <br><br>
                                <strong>Example:</strong> Allow only GET requests to <code>/v1/public/*</code> from frontend,
                                while blocking any attempts to <code>/admin</code>.
                            </p>
                        </div>

                        <div class="zt-pillar">
                            <h4 lang="zh" style="color: var(--cisco-midnight);">2. 内核级透明加密</h4>
                            <h4 lang="en" style="color: var(--cisco-midnight);">2. Transparent Encryption</h4>
                            <p lang="zh" style="font-size: 1.0rem; color: #666; margin-top: 15px;">
                                无需修改一行业务代码，无需笨重的 Sidecar。Cilium 在内核中集成 <strong>WireGuard</strong> 或 <strong>IPsec</strong>。
                                <br><br>
                                <strong>商业价值：</strong>为金融、医疗等严监管行业提供开箱即用的 <strong>mTLS</strong> 替代方案，实现数据传输的机密性与完整性。
                            </p>
                            <p lang="en" style="font-size: 1.0rem; color: #666; margin-top: 15px;">
                                Zero code changes, zero sidecars. Cilium integrates <strong>WireGuard</strong> or
                                <strong>IPsec</strong> directly in the kernel.
                                <br><br>
                                <strong>ROI:</strong> Out-of-the-box <strong>mTLS</strong> alternative for highly regulated
                                industries like FinTech and Healthcare.
                            </p>
                        </div>

                        <div class="zt-pillar">
                            <h4 lang="zh" style="color: var(--cisco-midnight);">3. 纵深防御：运行时安全</h4>
                            <h4 lang="en" style="color: var(--cisco-midnight);">3. Defense-in-Depth: Runtime Security</h4>
                            <p lang="zh" style="font-size: 1.0rem; color: #666; margin-top: 15px;">
                                利用 Cilium 的子项目 <strong>Tetragon</strong>，监控内核系统调用与文件访问。
                                <br><br>
                                <strong>实时阻断：</strong>一旦发现 Pod 试图非法读取敏感文件（如 <code>/etc/shadow</code>），内核会在毫秒内发送
                                <strong>sigkill</strong>，将威胁扼杀在萌芽状态。
                            </p>
                            <p lang="en" style="font-size: 1.0rem; color: #666; margin-top: 15px;">
                                Powered by <strong>Tetragon</strong>, monitoring kernel syscalls and file access.
                                <br><br>
                                <strong>Real-time Kill:</strong> If a Pod tries to illegally read <code>/etc/shadow</code>, the
                                kernel sends a <strong>sigkill</strong> in milliseconds.
                            </p>
                        </div>
                    </div>

                    <div style="margin-top: 60px; padding: 40px; background: #f8fafd; border-radius: 12px; text-align: center;">
                        <p lang="zh" style="font-size: 1.1rem; color: var(--cisco-midnight); font-weight: bold;">
                            “IP 是临时的座位号，Identity 才是永久的身份证。Cilium 让安全边界真正推到了每个 Pod 的内核入口处。”
                        </p>
                        <p lang="en" style="font-size: 1.1rem; color: var(--cisco-midnight); font-weight: bold;">
                            "IP is a temporary seat; Identity is a permanent passport. Cilium pushes the security boundary to
                            the kernel entrance of every Pod."
                        </p>
                    </div>

                </div>
            </div>
        </section>

        <section id="observability-hubble" class="section-container">
    <div class="content-wrapper">
                <h2 lang="zh" style="font-size: 2.5rem; margin-top: 10px; margin-bottom: 10px;">08. 拨云见日：Hubble 全栈可观测性</h2>
                <h2 lang="en" style="font-size: 2.5rem; margin-top: 10px; margin-bottom: 10px;">08. Breaking the Fog: Hubble Full-Stack Observability</h2>
        <div id="obs-8-1" class="obs-sub-section" style="margin-bottom: 80px;">
            <p lang="zh" style="font-size: 1.2rem; color: #555; line-height: 1.8;">
                Hubble 是 Cilium 环境下的分布式网络和安全可观测性平台。它利用 eBPF 技术，以完全透明的方式提供对微服务及网络基础设施行为的深度洞察，实现了无需侵入应用代码（Sidecar-less）即可获取全量监控数据的跨越。
            </p>
            <p lang="en" style="font-size: 1.2rem; color: #555; line-height: 1.8;">
                Hubble is a distributed observability platform for Cilium. Powered by eBPF, it provides deep, transparent insights into microservices and infrastructure behavior, achieving a leap to sidecar-less monitoring without modifying application code.
            </p>
    <div class="hubble-metaphor-grid">
        <div class="hubble-metaphor-card legacy">
            <h3 lang="zh" style="color: #4a5568;">老式闭路电视 (Legacy tcpdump)</h3>
            <h3 lang="en" style="color: #4a5568;">Legacy CCTV (Legacy tcpdump)</h3>
            <p lang="zh" style="font-size: 1rem; color: #666; margin-top: 15px;">
                传统监控像是每辆私家车里的行车记录仪，只有装了记录仪的车才能提供数据（需要代码埋点）。在屏幕上，你只能看到模糊的人影移动（IP 流量），无法确定身份。
            </p>
            <p lang="en" style="font-size: 1rem; color: #666; margin-top: 15px;">
                Legacy monitoring is like a dashcam in every car: only vehicles with sensors provide data. You see vague shadows (IP traffic) on screen but lack true identity and context.
            </p>
        </div>
        <div class="hubble-metaphor-card smart">
            <h3 lang="zh" style="color: var(--cisco-blue);">智能监控天眼 (Hubble)</h3>
            <h3 lang="en" style="color: var(--cisco-blue);">Smart AI Security (Hubble)</h3>
            <p lang="zh" style="font-size: 1rem; color: #444; margin-top: 15px;">
                Hubble 是安装在城市每个路口和立交桥上的智能摄像头系统。无论车里有没有装记录仪，它都能一眼识别出那是消防车还是私家车（身份感知），并实时统计流量、通过速度及违章行为。
            </p>
            <p lang="en" style="font-size: 1rem; color: #444; margin-top: 15px;">
                Hubble is an AI-powered smart city system. It identifies "Fire Trucks" vs. "Private Cars" (Identity-aware) at every intersection, tracking traffic flow, speed, and violations regardless of onboard tech.
            </p>
        </div>
    </div>
            </div>

        <hr style="border: 0; border-top: 1px solid var(--cisco-platinum); margin: 60px 0;">

        <div id="obs-8-2" class="obs-sub-section" style="margin-bottom: 80px;">
            <h3 class="cisco-sub-header" lang="zh">SRE 实践：四大黄金信号的内核量化</h3>
            <h3 class="cisco-sub-header" lang="en">SRE Practice: In-Kernel Golden Signals</h3>
            
        <p lang="zh" style="text-align: center; color: #666; margin-bottom: 50px;">
            在 SRE 方法论中，<b>延迟、流量、错误、饱和度</b>是衡量系统健康的基石。Hubble 通过内核级 eBPF 程序，直接提取并量化这些信号。
        </p>
        <p lang="en" style="text-align: center; color: #666; margin-bottom: 50px;">
            In SRE methodology, <b>Latency, Traffic, Errors, and Saturation</b> are the bedrock of health monitoring. Hubble quantifies these directly via in-kernel eBPF programs.
        </p>

        <div class="golden-signals-grid">
            <div class="signal-card-v2" style="border-top: 4px solid var(--cisco-blue);">
                <div class="signal-card-header">
                    <span class="signal-icon">⏱️</span>
                    <span class="signal-title" lang="zh">延迟 (Latency)</span>
                    <span class="signal-title" lang="en">Latency</span>
                </div>
                <ul class="signal-detail-list">
                    <li>
                        <span class="detail-label" lang="zh">应用层追踪 (App-layer Tracking)</span>
                        <span class="detail-label" lang="en">App-layer Tracking</span>
                        <span class="detail-desc" lang="zh">追踪 HTTP/gRPC 请求的 P95 和 P99 延迟，识别由于复杂业务逻辑导致的“长尾”性能瓶颈。</span>
                        <span class="detail-desc" lang="en">Track HTTP/gRPC P95/P99 latency to identify long-tail bottlenecks in complex business logic.</span>
                    </li>
                    <li>
                        <span class="detail-label" lang="zh">内核网络路径耗时 (Network Path Timing)</span>
                        <span class="detail-label" lang="en">Network Path Timing</span>
                        <span class="detail-desc" lang="zh">测量 TCP 往返时间 (RTT)，帮助 SRE 区分延迟是出在“路”上（网络链路）还是“店”里（应用进程）。</span>
                        <span class="detail-desc" lang="en">Measure TCP RTT to distinguish if latency occurs on the "road" (link) or in the "shop" (app process).</span>
                    </li>
                </ul>
            </div>

            <div class="signal-card-v2" style="border-top: 4px solid var(--cisco-midnight);">
                <div class="signal-card-header">
                    <span class="signal-icon">📊</span>
                    <span class="signal-title" lang="zh">流量 (Traffic)</span>
                    <span class="signal-title" lang="en">Traffic</span>
                </div>
                <ul class="signal-detail-list">
                    <li>
                        <span class="detail-label" lang="zh">基于身份的量化 (Identity-based Quant)</span>
                        <span class="detail-label" lang="en">Identity-based Quant</span>
                        <span class="detail-desc" lang="zh">不再只是统计字节，而是精准监控 HTTP 每秒请求数 (RPS) 或 Kafka 主题的生产/消费频率。</span>
                        <span class="detail-desc" lang="en">Beyond byte counts: Monitor HTTP RPS or Kafka topic production/consumption rates with business context.</span>
                    </li>
                    <li>
                        <span class="detail-label" lang="zh">多维服务拓扑 (Multi-dim Topology)</span>
                        <span class="detail-label" lang="en">Multi-dim Topology</span>
                        <span class="detail-desc" lang="zh">Hubble UI 自动生成实时服务依赖图，直观展示哪些微服务正在通信以及交互的频率。</span>
                        <span class="detail-desc" lang="en">Hubble UI auto-generates real-time service dependency maps, showing interaction frequency visually.</span>
                    </li>
                </ul>
            </div>

            <div class="signal-card-v2" style="border-top: 4px solid #e63946;">
                <div class="signal-card-header">
                    <span class="signal-icon">❌</span>
                    <span class="signal-title" lang="zh">错误 (Errors)</span>
                    <span class="signal-title" lang="en">Errors</span>
                </div>
                <ul class="signal-detail-list">
                    <li>
                        <span class="detail-label" lang="zh">协议级故障诊断 (Protocol Diagnostics)</span>
                        <span class="detail-label" lang="en">Protocol Diagnostics</span>
                        <span class="detail-desc" lang="zh">自动提取 HTTP 4xx/5xx 或 gRPC PERMISSION_DENIED 等错误码，无需修改任何应用代码。</span>
                        <span class="detail-desc" lang="en">Extract HTTP 4xx/5xx or gRPC codes like PERMISSION_DENIED automatically without app instrumentation.</span>
                    </li>
                    <li>
                        <span class="detail-label" lang="zh">透明丢包诊断 (Drop Diagnostics)</span>
                        <span class="detail-label" lang="en">Drop Diagnostics</span>
                        <span class="detail-desc" lang="zh">明确报告数据包被丢弃的原因（如被特定的 Network Policy 拦截或端口冲突导致）。</span>
                        <span class="detail-desc" lang="en">Explicitly report packet drop reasons, such as specific Network Policy blocks or port conflicts.</span>
                    </li>
                </ul>
            </div>

            <div class="signal-card-v2" style="border-top: 4px solid #ff8c00;">
                <div class="signal-card-header">
                    <span class="signal-icon">📈</span>
                    <span class="signal-title" lang="zh">饱和度 (Saturation)</span>
                    <span class="signal-title" lang="en">Saturation</span>
                </div>
                <ul class="signal-detail-list">
                    <li>
                        <span class="detail-label" lang="zh">网络路径饱和 (Path Saturation)</span>
                        <span class="detail-label" lang="en">Path Saturation</span>
                        <span class="detail-desc" lang="zh">通过监控 TCP 重传率 (Retransmissions) 来预警潜在的网络拥塞或带宽瓶颈。</span>
                        <span class="detail-desc" lang="en">Monitor TCP Retransmission rates to alert for potential network congestion or bandwidth bottlenecks.</span>
                    </li>
                    <li>
                        <span class="detail-label" lang="zh">内核平面饱和 (Datapath Saturation)</span>
                        <span class="detail-label" lang="en">Datapath Saturation</span>
                        <span class="detail-desc" lang="zh">监控 eBPF Map Pressure。当策略哈希表接近 100% 时，预警数据平面的处理能力达到上限。</span>
                        <span class="detail-desc" lang="en">Monitor eBPF Map Pressure. Alert when policy hash tables near 100% capacity to prevent bottlenecks.</span>
                    </li>
                </ul>
            </div>
        </div>

            </div>

        <div id="obs-8-3" class="obs-sub-section">
            <h3 class="cisco-sub-header" lang="zh">数字化取证：解析 Hubble Flow 的“身份指纹”</h3>
            <h3 class="cisco-sub-header" lang="en">Forensics: Parsing the Identity Fingerprint</h3>
            
        <p lang="zh" style="margin-top: 15px; color: #555;">传统的 tcpdump 只能看到 IP 地址。而在 Hubble 的视野中，流量记录是一份带有身份的可审计凭证：</p>
        <p lang="en" style="margin-top: 15px; color: #555;">tcpdump sees IPs; Hubble sees Identity. Flow data becomes an auditable, identity-aware credential:</p>

        <div class="json-forensics-box">
<span lang="zh" class="j-cmt">// 场景：来自联盟的 X-Wing 战机试图在 Death Star 着陆</span><span lang="en" class="j-cmt">// Scenario: Alliance X-Wing attempting to land on Death Star</span>
{
  <span class="j-key">"source"</span>: { 
    <span class="j-key">"pod_name"</span>: <span class="j-str">"xwing"</span>, 
    <span class="j-key">"identity"</span>: <span class="j-num">36770</span> 
  },
  <span class="j-key">"destination"</span>: { 
    <span class="j-key">"pod_name"</span>: <span class="j-str">"deathstar"</span>, 
    <span class="j-key">"identity"</span>: <span class="j-num">15153</span> 
  },
  <span class="j-key">"verdict"</span>: <span class="j-str">"FORWARDED"</span>,
  <span class="j-key">"summary"</span>: <span class="j-str">"TCP Flags: SYN"</span>,
  <span class="j-key">"l7"</span>: {
    <span class="j-key">"http"</span>: {
      <span class="j-key">"method"</span>: <span class="j-str">"POST"</span>,
      <span class="j-key">"url"</span>: <span class="j-str">"/v1/request-landing"</span>
    }
  }
}</div>

        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 20px; margin-top: 40px;">
            <div style="background: #f8fafd; padding: 25px; border-radius: 8px; text-align: center;">
                <strong lang="zh">服务依赖拓扑</strong><strong lang="en">Service Dependency Topology</strong>
                <p lang="zh" style="font-size: 1.0rem; color: #666;">基于身份识别的稳定架构图</p>
                <p lang="en" style="font-size: 1.0rem; color: #666;">Identity-Aware Stable Topology Map</p>
            </div>
            <div style="background: #f8fafd; padding: 25px; border-radius: 8px; text-align: center;">
                <strong lang="zh">网络监控告警</strong><strong lang="en">Network Monitoring and Alerting</strong>
                <p lang="zh" style="font-size: 1.0rem; color: #666;">精准定位 DNS/L4/L7 故障</p>
                <p lang="en" style="font-size: 1.0rem; color: #666;">Precise Diagnostics for DNS/L4/L7 Failures</p>
            </div>
            <div style="background: #f8fafd; padding: 25px; border-radius: 8px; text-align: center;">
                <strong lang="zh">应用性能监控</strong><strong lang="en">Application Performance Monitoring</strong>
                <p lang="zh" style="font-size: 1.0rem; color: #666;">0 侵入提取黄金信号指标</p>
                <p lang="en" style="font-size: 1.0rem; color: #666;">Zero-Instrumentation Golden Signal Extraction</p>
            </div>
            <div style="background: #f8fafd; padding: 25px; border-radius: 8px; text-align: center;">
                <strong lang="zh">安全可观测性</strong><strong lang="en">Security Observability</strong>
                <p lang="zh" style="font-size: 1.0rem; color: #666;">拦截原因与横向移动追踪</p>
                <p lang="en" style="font-size: 1.0rem; color: #666;">Drop Reason & Lateral Movement Tracking</p>
            </div>
        </div>

    <div style="background: rgba(0, 188, 235, 0.05); padding: 40px; border-radius: 12px; border-left: 8px solid var(--cisco-blue); margin-top: 60px;">
        <h4 lang="zh" style="color: var(--cisco-midnight); font-weight: 800;">💡 技术总结：从“埋点”到“天眼”的跨越</h4>
        <h4 lang="en" style="color: var(--cisco-midnight); font-weight: 800;">💡 Tech Summary: From Instrumentation to Omniscience</h4>
        <p lang="zh" style="font-size: 1.05rem; color: #444; line-height: 1.8; margin-top: 15px;">
            Hubble 的最大优势在于其<b>透明性</b>。传统 SRE 监控通常需要开发者在代码中埋点或部署代理，而 Hubble 利用 eBPF 直接从 Linux 内核获取信号，实现了<b>近乎零开销且 100% 覆盖</b>的可观测性。这是实现 <b>MTTR（平均故障恢复时间）缩短 40%</b> 的核心驱动力。
        </p>
        <p lang="en" style="font-size: 1.05rem; color: #444; line-height: 1.8; margin-top: 15px;">
            Hubble's greatest strength is its <b>transparency</b>. Traditional SRE monitoring requires manual instrumentation or sidecars; Hubble leverages eBPF to pull signals directly from the kernel, achieving <b>near-zero overhead and 100% coverage</b>. This transparency is the key driver in reducing <b>MTTR by 40%</b>.
        </p>
    </div>
        </div>
    </div>
</section>

        <section id="ai-revolution" class="section-container">
            <div class="content-wrapper">
                <h2 lang="zh" style="font-size: 2.5rem; margin-top: 10px; margin-bottom: 10px;">09. 技术前沿：Cilium 开启 AI 训练加速时代</h2>
                <h2 lang="en" style="font-size: 2.5rem; margin-top: 10px; margin-bottom: 10px;">09. Tech Frontier: Cilium Accelerating the AI
                        Era</h2>
                <p lang="zh" style="font-size: 1.2rem; color: #555; line-height: 1.8;">
                    AI 革命已经到来。从训练大规模语言模型到提供实时推理，AI 工作负载对基础设施提出了前所未有的吞吐量与延迟要求。Cilium 在 2025 年迎来了发布十周年，正通过 eBPF 技术重新定义 AI 训练的网络底座。
                </p>
                <p lang="en" style="font-size: 1.2rem; color: #555; line-height: 1.8;">
                    The AI revolution is here. From training LLMs to real-time inference, AI workloads demand unprecedented
                    throughput and low latency. Celebrating its 10th anniversary in 2025, Cilium is redefining AI networking
                    foundations via eBPF.
                </p>
        
                <h3 lang="zh"
                    style="color: var(--cisco-midnight); border-left: 5px solid var(--cisco-blue); padding-left: 15px;">一、
                    Cilium 最新技术进展 (v1.17 - v1.18)</h3>
                <h3 lang="en"
                    style="color: var(--cisco-midnight); border-left: 5px solid var(--cisco-blue); padding-left: 15px;">I.
                    Latest Technological Progress (v1.17 - v1.18)</h3>
        
                <div class="tech-prog-grid">
                    <div class="tech-prog-card">
                        <strong lang="zh">高性能 Netkit 设备模型</strong><strong lang="en">High-Perf Netkit Device Model</strong>
                        <p lang="zh" style="font-size: 1.0rem; color: #555; margin-top: 15px;">
                            这是最具突破性的进展。<code>Netkit</code> 旨在绕过传统的 Linux Bridge 和 veth
                            pair，为容器提供接近零开销的网络性能，使容器网络能够以接近宿主机的原生速度运行。
                        </p>
                        <p lang="en" style="font-size: 1.0rem; color: #555; margin-top: 15px;">
                            A breakthrough model. <code>Netkit</code> bypasses legacy Linux bridges and veth pairs, delivering
                            near-zero overhead and host-native speeds for containers.
                        </p>
                    </div>
                    <div class="tech-prog-card">
                        <strong lang="zh">BGP 控制平面 v2 与路由聚合</strong><strong lang="en">BGP Control Plane v2 &
                            Aggregation</strong>
                        <p lang="zh" style="font-size: 1.0rem; color: #555; margin-top: 15px;">
                            通过路由聚合（Route Aggregation），将分散的 Pod IP 汇总为大前缀，防止物理交换机耗尽 <b>TCAM 内存</b>，极大减少因 Pod 频繁扩缩容导致的路由震荡。
                        </p>
                        <p lang="en" style="font-size: 1.0rem; color: #555; margin-top: 15px;">
                            Implements Route Aggregation to prevent <b>TCAM exhaustion</b> on physical switches, mitigating
                            route flapping caused by high-churn Pod scaling.
                        </p>
                    </div>
                    <div class="tech-prog-card">
                        <strong lang="zh">IPv6 优先与 BIG TCP 支持</strong><strong lang="en">IPv6-First & BIG TCP Support</strong>
                        <p lang="zh" style="font-size: 1.0rem; color: #555; margin-top: 15px;">
                            利用 <code>BIG TCP</code> 技术，内核能处理超大报文包头，使 IPv6 吞吐量提升 <b>40-50%</b>，同时显著降低高带宽应用下的 CPU 使用率。
                        </p>
                        <p lang="en" style="font-size: 1.0rem; color: #555; margin-top: 15px;">
                            With <code>BIG TCP</code>, the kernel handles massive packet headers, boosting IPv6 throughput by
                            <b>40-50%</b> while reducing CPU load.
                        </p>
                    </div>
                </div>
        
                <div class="maglev-analogy-box">
                    <h3 lang="zh">💡 类比：算力工厂的“磁悬浮”进化</h3>
                    <h3 lang="en">💡 Analogy: The "Maglev" Evolution of Compute Factories</h3>
        
                    <p lang="zh" style="line-height: 1.8; opacity: 0.9;">
                        如果把 AI 训练集群比作一个超高速自动化工厂，那么传统的网络路径就像是工厂里拥挤的窄道和需要人工签字的关卡（iptables 线性审查）。
                        <br><br>
                        <b>Cilium 的进化：</b> 就像给工厂铺设了磁悬浮轨道 (<b>Netkit</b>)，并将关卡升级为人脸识别感应门 (<b>eBPF O(1)</b>)。<b>BIG TCP</b>
                        则是将小货车升级为重型卡车，让 GPU 算力不再因为等待数据（原材料）而停工。
                    </p>
                    <p lang="en" style="line-height: 1.8; opacity: 0.9;">
                        Think of an AI cluster as a high-speed factory. Legacy paths are narrow aisles with manual checkpoints
                        (iptables).
                        <br><br>
                        <b>Cilium's Evolution:</b> Installs magnetic levitation tracks (<b>Netkit</b>) and replaces checkpoints
                        with Face-ID gates (<b>eBPF O(1)</b>). <b>BIG TCP</b> upgrades small vans to heavy trucks, ensuring GPUs
                        never stall waiting for data.
                    </p>
        
        
                    <div
                        style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 40px; text-align: center;">
                        <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 8px;">
                            <span style="font-size: 1.5rem; font-weight: 800; display: block;">O(1)</span>
                            <span lang="zh">消除抖动</span><span lang="en">Zero Jitter</span>
                        </div>
                        <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 8px;">
                            <span style="font-size: 1.5rem; font-weight: 800; display: block;">72x</span>
                            <span lang="zh">CPU 开销缩减</span><span lang="en">CPU Reduction</span>
                        </div>
                        <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 8px;">
                            <span style="font-size: 1.5rem; font-weight: 800; display: block;">+50%</span>
                            <span lang="zh">吞吐量红利</span><span lang="en">Throughput Gain</span>
                        </div>
                    </div>
                </div>
        
                <div
                    style="background: #f8fafd; border: 1px dashed var(--cisco-blue); padding: 40px; border-radius: 12px; margin-top: 80px; text-align: center;">
                    <h3 lang="zh" style="color: var(--cisco-midnight); margin-bottom: 20px;">通往 2026：内核即服务</h3>
                    <h3 lang="en" style="color: var(--cisco-midnight); margin-bottom: 20px;">Towards 2026: Kernel-as-a-Service
                    </h3>
                    <p lang="zh" style="max-width: 850px; margin: 0 auto; color: #555;">
                        Cilium 不仅仅是一个 CNI 插件，它是 AI 时代的神经中枢。通过将复杂的逻辑从应用层下沉至内核层，它为算力基础设施提供了一层透明、高性能且不可逾越的安全屏障。
                    </p>
                    <p lang="en" style="max-width: 850px; margin: 0 auto; color: #555;">
                        Cilium is more than a CNI; it is the central nervous system for the AI era. By moving complexity from
                        the app to the kernel, it provides a transparent, high-performance security shield for compute infra.
                    </p>
                </div>
            </div>
        </section>


<section id="cluster-mesh" class="mesh-section">
    <div class="container">
                    <h2 lang="zh" style="font-size: 2.5rem; margin-top: 10px;">10. Cluster Mesh：跨越边界的“大一统”网络</h2>
            <h2 lang="en" style="font-size: 2.5rem; margin-top: 10px;">10. Cluster Mesh: Unified Networking Across Boundaries</h2>
        <div class="section-header" style="text-align: center; max-width: 900px; margin: 0 auto 60px;">

            <p lang="zh" style="font-size: 1.2rem; color: #666; margin-top: 15px;">
                多集群架构已成为故障隔离、地理分布和扩容的必然选择。但随之而来的网络复杂性，如跨集群发现、策略同步和负载均衡，正成为新的架构瓶颈。
            </p>
            <p lang="en" style="font-size: 1.2rem; color: #666; margin-top: 15px;">
                Multi-cluster is the choice for isolation and scale. However, networking complexities like cross-cluster discovery and policy sync have become the new architectural bottleneck.
            </p>
        </div>

        <div class="mesh-analogy-grid">
            <div class="mesh-analogy-card island">
                <div style="font-size: 2.5rem; margin-bottom: 20px;">🏝️</div>
                <h3 lang="zh" style="color: #4a5568;">传统模式：孤立的群岛</h3>
                <h3 lang="en" style="color: #4a5568;">Legacy: Isolated Islands</h3>
                <p lang="zh" style="font-size: 1.0rem; color: #666;">
                    每个集群都是一座孤岛。跨集群通信必须依赖繁琐的 Ingress 网关或复杂的 VPN 隧道。这不仅增加了延迟，更让全局安全策略的统一下发成为幻想。
                </p>
                <p lang="en" style="font-size: 1.0rem; color: #666;">
                    Each cluster is an island. Cross-cluster talk relies on heavy gateways or VPNs, increasing latency and making global security policies nearly impossible to manage.
                </p>
            </div>
            <div class="mesh-analogy-card continent">
                <div style="font-size: 2.5rem; margin-bottom: 20px;">🗺️</div>
                <h3 lang="zh" style="color: var(--cisco-blue);">Cluster Mesh：联合的大陆</h3>
                <h3 lang="en" style="color: var(--cisco-blue);">Cilium: The United Continent</h3>
                <p lang="zh" style="font-size: 1.0rem; color: #555;">
                    打破集群间的物理边界。只要运行 Cilium，多个集群就能融合成一个巨大的逻辑网络。Pod 之间可以像在同一个数据中心一样直接通信，无论它们位于何处。
                </p>
                <p lang="en" style="font-size: 1.0rem; color: #555;">
                    Breaking boundaries. Any cluster running Cilium joins a unified logical network. Pods communicate directly as if in the same DC, regardless of location.
                </p>
            </div>
        </div>

        <div class="mesh-feature-grid">
            <div class="mesh-feature-item">
                <h3 lang="zh">🛡️ 高可用与容错</h3>
                <h3 lang="en">High Availability & Failover</h3>
                <p lang="zh" style="font-size: 1.0rem; color: #666;">
                    支持多区域、多可用区部署。一旦某个集群因升级或故障不可用，流量会自动故障转移至其他集群，确保服务永不掉线。
                </p>
                <p lang="en" style="font-size: 1.0rem; color: #666;">
                    Supports multi-region/AZ ops. If one cluster goes offline for upgrades or failure, it enables failover to others, ensuring zero downtime.
                </p>
            </div>
            <div class="mesh-feature-item">
                <h3 lang="zh">🔍 透明服务发现</h3>
                <h3 lang="en">Transparent Service Discovery</h3>
                <p lang="zh" style="font-size: 1.0rem; color: #666;">
                    自动合并不同集群中同名、同空间的 Service 为<b>全局服务 (Global Service)</b>。应用无需感知集群位置，即可发现并调用目标服务。
                </p>
                <p lang="en" style="font-size: 1.0rem; color: #666;">
                    Automatically merges identical services across clusters into a Global Service. Apps discover endpoints irrespective of where they reside.
                </p>
            </div>
            <div class="mesh-feature-item">
                <h3 lang="zh">⚡ 原生 IP 路由性能</h3>
                <h3 lang="en">Native IP Routing Performance</h3>
                <p lang="zh" style="font-size: 1.0rem; color: #666;">
                    无需网关或代理，直接利用隧道或物理对等协议处理跨集群 Pod 通讯，实现接近原生的网络转发效率。
                </p>
                <p lang="en" style="font-size: 1.0rem; color: #666;">
                    Handles cross-cluster Pod routing at native performance via tunneling or direct-routing, circumventing gateways or proxies.
                </p>
            </div>
            <div class="mesh-feature-item">
                <h3 lang="zh">🔐 统一策略执行</h3>
                <h3 lang="en">Uniform Policy Enforcement</h3>
                <p lang="zh" style="font-size: 1.0rem; color: #666;">
                    将 Cilium 的 L3-L7 安全策略扩展至整个网格，确保无论集群数量多少，安全准则始终保持一致。
                </p>
                <p lang="en" style="font-size: 1.0rem; color: #666;">
                    Extends L3-L7 policies across the entire mesh, ensuring a consistent security approach irrespective of the number of clusters.
                </p>
            </div>
        </div>

        

        <div class="mesh-roi-box">
            <h3 lang="zh" style="text-align: center;">实战背书：为什么架构师信任 Cluster Mesh？</h3>
            <h3 lang="en" style="text-align: center;">Proven Value: Why Architects Trust Cluster Mesh?</h3>
            
            <div class="executive-quote" style="background: rgba(255,255,255,0.05); border-left-color: var(--cisco-blue); margin: 30px 0;">
                <p lang="zh">“Cluster Mesh 让我们实现了跨本地数据中心和 AWS 的统一网络体验。应用间通信不再需要经过 Ingress，且具备了更强的灾备韧性。”</p>
                <p lang="en">"Cluster Mesh provides a consistent networking experience across our DCs and AWS. Apps communicate directly without Ingress, creating disruption tolerance."</p>
                <span class="quote-author" style="color: var(--cisco-blue);">— Matheus Morais, IT Infrastructure Analyst, Sicredi</span>
            </div>

            <div class="mesh-stat-grid">
                <div class="mesh-stat-node">
                    <span class="mesh-stat-val">50%</span>
                    <p lang="zh" style="font-size: 1.0rem;">存储成本降低 (Ecco)</p>
                    <p lang="en" style="font-size: 1.0rem;">Storage Cost Reduction</p>
                </div>
                <div class="mesh-stat-node">
                    <span class="mesh-stat-val">33%</span>
                    <p lang="zh" style="font-size: 1.0rem;">关键操作延迟降低 (Ecco)</p>
                    <p lang="en" style="font-size: 1.0rem;">Latency Reduction</p>
                </div>
                <div class="mesh-stat-node">
                    <span class="mesh-stat-val">50k+</span>
                    <p lang="zh" style="font-size: 1.0rem;">每秒请求处理 (Wildlife)</p>
                    <p lang="en" style="font-size: 1.0rem;">RPS in Production</p>
                </div>
                <div class="mesh-stat-node">
                    <span class="mesh-stat-val">No.1</span>
                    <p lang="zh" style="font-size: 1.0rem;">CNCF 最成熟多集群技术</p>
                    <p lang="en" style="font-size: 1.0rem;">Most Mature Technology (CNCF)</p>
                </div>
            </div>
        </div>
    </div>
</section>

        <section id="case-studies" class="section-container">
    <div class="container">
                    <h2 lang="zh" style="font-size: 2.5rem; margin-bottom: 10px;">11. 行业实战：为何全球巨头纷纷转向 Cilium？</h2>
            <h2 lang="en" style="font-size: 2.5rem; margin-bottom: 10px;">11. Industry Stories: Why Giants are Turning to Cilium?</h2>
        <div class="section-header" style="text-align: center; margin-bottom: 70px;">
            <p lang="zh" style="font-size: 1.2rem; color: var(--cisco-slate); max-width: 800px; margin: 0 auto;">
                从 OpenAI 的训练集群到 Google Cloud 的原生集成，Cilium 正在成为支撑全球最顶级算力与云架构的“隐形神经系统”。
            </p>
            <p lang="en" style="font-size: 1.2rem; color: var(--cisco-slate); max-width: 800px; margin: 0 auto;">
                From OpenAI's massive training clusters to native Google Cloud integration, Cilium is becoming the "invisible nervous system" for the world's most advanced compute.
            </p>
        </div>

        <div class="success-story">
            <div class="story-content">
                <h3 style="display: flex; align-items: center; gap: 12px;">
                    <svg width="28" height="28" viewBox="0 0 24 24" fill="var(--cisco-midnight)"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/></svg>
                    <span lang="zh">OpenAI: 支撑 AI 训练的神经系统</span>
                    <span lang="en">OpenAI: The AI Training Nervous System</span>
                </h3>
                
                <p lang="zh" style="margin-top: 15px;">
                    在训练 GPT-4 等超大模型时，上万个 GPU 节点需要频繁进行 <b>All-Reduce</b> 梯度同步。哪怕网络中存在 1 毫秒的抖动，都会引发集群级的同步等待，导致数百万美元的算力浪费。
                </p>
                <p lang="en" style="margin-top: 15px;">
                    Training LLMs like GPT-4 requires frequent <b>All-Reduce</b> gradient synchronization across 10,000+ GPUs. Even a 1ms jitter can trigger cluster-wide stalls, resulting in millions of dollars of compute waste.
                </p>

                <ul class="story-features">
                    <li>
                        <strong lang="zh">极致带宽优化</strong><strong lang="en">Bandwidth Optimization</strong>
                        <p lang="zh">通过 eBPF 接管数据面，优化训练网络吞吐，支持 RoCE/RDMA 辅助加速。</p>
                        <p lang="en">Uses eBPF to optimize datapath throughput, supporting RoCE/RDMA acceleration.</p>
                    </li>
                    <li>
                        <strong lang="zh">全量拓扑透视</strong><strong lang="en">Topology Visibility</strong>
                        <p lang="zh">Hubble 提供了模型训练任务的精确流量拓扑，让 SRE 能够瞬间定位网络瓶颈。</p>
                        <p lang="en">Hubble provides precise flow topology for training jobs, allowing SREs to pinpoint bottlenecks instantly.</p>
                    </li>
                </ul>
            </div>
            <div class="story-analysis">
                <strong lang="zh">架构师点评</strong><strong lang="en">Architect's Insight</strong>
                <p lang="zh">对于 OpenAI 来说，Cilium 不仅是一个网络组件，更是一个<b>性能放大器</b>，确保了极其昂贵的 GPU 算力不被传统协议栈阻塞。</p>
                <p lang="en">For OpenAI, Cilium is more than networking—it's a <b>performance multiplier</b> that prevents expensive GPUs from being choked by legacy stacks.</p>
            </div>
        </div>

        <div class="success-story">
            <div class="story-content">
                <h3 style="display: flex; align-items: center; gap: 12px;">
                    <svg width="28" height="28" viewBox="0 0 24 24" fill="var(--cisco-midnight)"><path d="M2 3h9v9H2V3zm11 0h9v9h-9V3zM2 14h9v9H2v-9zm11 0h9v9h-9v-9z"/></svg>
                    <span lang="zh">Microsoft: Azure 的终极网络选型</span>
                    <span lang="en">Microsoft: Azure's Ultimate Selection</span>
                </h3>
                
                <p lang="zh" style="margin-top: 15px;">
                    Microsoft 意识到大规模 VNET 的可观测性是企业级客户的核心痛点。Azure CNI Powered by Cilium 实现了公有云性能与原生 Kubernetes 体验的深度融合。
                </p>
                <p lang="en" style="margin-top: 15px;">
                    Microsoft recognized that observability for large-scale VNETs is a critical pain point. Azure CNI Powered by Cilium achieves seamless fusion of cloud performance and native K8s experience.
                </p>

                <ul class="story-features">
                    <li>
                        <strong lang="zh">原生性能执行</strong><strong lang="en">Native Execution</strong>
                        <p lang="zh">绕过传统网桥模式，性能比传统 Overlay 模式提升 30% 以上。</p>
                        <p lang="en">Bypassing legacy bridges to deliver 30%+ better performance than traditional overlay modes.</p>
                    </li>
                    <li>
                        <strong lang="zh">透明度革命</strong><strong lang="en">Visibility Revolution</strong>
                        <p lang="zh">云服务商无需在客户 Pod 中注入 Sidecar 即可提供详尽的 L7 流量视图。</p>
                        <p lang="en">Cloud providers offer deep L7 views without injecting sidecars into customer pods.</p>
                    </li>
                </ul>
            </div>
            <div class="story-analysis">
                <strong lang="zh">架构师点评</strong><strong lang="en">Architect's Insight</strong>
                <p lang="zh">公有云巨头的“All-in”证明了基于 eBPF 的 Cilium 已经从“极客工具”进化为<b>下一代云网络的工业标准</b>。</p>
                <p lang="en">The "All-in" move by hyperscalers proves Cilium has evolved from a geek tool to the <b>industrial standard for next-gen cloud networking</b>.</p>
            </div>
        </div>

        <div class="success-story" style="margin-bottom: 0;">
            <div class="story-content">
                <h3 style="display: flex; align-items: center; gap: 12px;">
                    <svg width="28" height="28" viewBox="0 0 24 24" fill="var(--cisco-midnight)"><path d="M12.545 10.239v3.821h5.445c-.712 2.315-2.647 3.972-5.445 3.972-3.332 0-6.033-2.701-6.033-6.032s2.701-6.032 6.033-6.032c1.498 0 2.866.549 3.921 1.453l2.814-2.814C17.503 2.988 15.139 2 12.545 2 7.021 2 2.543 6.477 2.543 12s4.478 10 10.002 10c8.396 0 10.249-7.85 9.426-11.748l-9.426-.013z"/></svg>
                    <span lang="zh">Google Cloud: GKE Dataplane V2</span>
                    <span lang="en">Google Cloud: GKE Dataplane V2</span>
                </h3>
                
                <p lang="zh" style="margin-top: 15px;">
                    Google 将 Cilium 作为 GKE 的默认数据平面（V2），核心动力源于对 <b>FIPS 合规与内核级透明加密</b> 的极致追求。
                </p>
                <p lang="en" style="margin-top: 15px;">
                    Google made Cilium the default for GKE Dataplane V2, driven by the need for <b>FIPS compliance and kernel-level transparent encryption</b>.
                </p>

                <ul class="story-features">
                    <li>
                        <strong lang="zh">硬核安全共识</strong><strong lang="en">Hard-core Security</strong>
                        <p lang="zh">验证了 eBPF 在多租户环境下实现“身份指纹”识别与强力访问控制的工业可靠性。</p>
                        <p lang="en">Validated eBPF's reliability for identity fingerprinting and strong access control in multi-tenant environments.</p>
                    </li>
                </ul>
            </div>
            <div class="story-analysis">
                <strong lang="zh">架构师点评</strong><strong lang="en">Architect's Insight</strong>
                <p lang="zh">当所有云巨头都采用同一技术底座时，<b>生态兼容性</b>与<b>跨云统一安全策略</b>就是架构师能拿到的最大红利。</p>
                <p lang="en">When all major clouds adopt the same foundation, <b>ecosystem compatibility</b> and <b>unified cross-cloud policy</b> become the ultimate architect ROI.</p>
            </div>
        </div>
    </div>
</section>

<section id="lab-chapter" class="lab-section">
    <div class="container">
            <h2 lang="zh" style="font-size: 2.5rem; margin-bottom: 10px;">12. Cilium 互动实验室：零起点架构演练</h2>
            <h2 lang="en" style="font-size: 2.5rem; margin-bottom: 10px;">12. Cilium Interactive Lab: Zero-Start Architecture</h2>
        <div class="section-header" style="text-align: center;">
            <p lang="zh">基于真实的生产部署手册，点击下方阶段观察基础设施的“内核级”演进过程。</p>
            <p lang="en">Based on real production guides, click the steps below to observe the "Kernel-level" evolution of infrastructure.</p>
        </div>

        <div class="lab-terminal">
            <div class="term-bar">
                <div class="term-dot dot-red"></div>
                <div class="term-dot dot-yellow"></div>
                <div class="term-dot dot-green"></div>
                <span style="color: #8b949e; font-size: 1.0rem; margin-left: 10px; font-family: monospace;">root@cilium-lab-node-1: ~</span>
            </div>
            <div class="term-body">
                <div class="log-stream" id="lab-log-stream">
                    <span lang="zh">[系统] 实验室准备就绪。请从下方选择一个部署阶段...</span>
                    <span lang="en">[System] Lab ready. Please select a deployment phase below...</span>
                </div>
                <div class="status-map">
                    <div class="status-display-box">
                        <div class="status-item">
                            <span class="status-label" lang="zh">集群状态</span>
                            <span class="status-label" lang="en">Cluster Status</span>
                            <span class="status-value" id="status-k8s">
                                <span lang="zh">未初始化</span><span lang="en">Uninitialized</span>
                            </span>
                        </div>
                        <div class="status-item">
                            <span class="status-label" lang="zh">网络数据面 (Datapath)</span>
                            <span class="status-label" lang="en">Networking Plane</span>
                            <span class="status-value" id="status-cni">
                                <span lang="zh">标准内核栈</span><span lang="en">Standard Stack</span>
                            </span>
                        </div>
                        <div class="status-item">
                            <span class="status-label" lang="zh">BGP 路由宣告</span>
                            <span class="status-label" lang="en">BGP Advertising</span>
                            <span class="status-value" id="status-bgp" style="color: #666;">
                                <span lang="zh">已禁用</span><span lang="en">Disabled</span>
                            </span>
                        </div>
                        <div class="status-item" style="margin-bottom: 0;">
                            <span class="status-label" lang="zh">Hubble 观测引擎</span>
                            <span class="status-label" lang="en">Hubble Engine</span>
                            <span class="status-value" id="status-hubble" style="color: #666;">
                                <span lang="zh">离线</span><span lang="en">Offline</span>
                            </span>
                        </div>
                    </div>
                    <div style="margin-top: 20px; text-align: center;">
                        
                    </div>
                </div>
            </div>
        </div>

        <div class="lab-controls">
            <button class="lab-btn" onclick="executeLabStep(1)" style="border-top-color: var(--cisco-red);">
                <span class="step-num">STEP 01</span>
                <span lang="zh">初始化 K8s (No Proxy)</span>
                <span lang="en">Init K8s (No Proxy)</span>
            </button>
            <button class="lab-btn" onclick="executeLabStep(2)" style="border-top-color: var(--cisco-orange);">
                <span class="step-num">STEP 02</span>
                <span lang="zh">Ansible 环境预检</span>
                <span lang="en">Ansible Pre-flight</span>
            </button>
            <button class="lab-btn" onclick="executeLabStep(3)" style="border-top-color: var(--cisco-blue);">
                <span class="step-num">STEP 03</span>
                <span lang="zh">Helm 注入 Cilium</span>
                <span lang="en">Helm Install Cilium</span>
            </button>
            <button class="lab-btn" onclick="executeLabStep(4)" style="border-top-color: var(--cisco-sky);">
                <span class="step-num">STEP 04</span>
                <span lang="zh">建立 BGP 物理对等</span>
                <span lang="en">Establish BGP Peering</span>
            </button>
            <button class="lab-btn" onclick="executeLabStep(5)" style="border-top-color: var(--cisco-midnight);">
                <span class="step-num">STEP 05</span>
                <span lang="zh">L7 身份指纹观测</span>
                <span lang="en">L7 Identity Observability</span>
            </button>
        </div>
    </div>
</section>

<section id="implementation-guide" class="implementation-section">
    <div class="container">
            <h2 lang="zh" style="font-size: 2.5rem; margin-top: 10px;">13. 落地路径建议</h2>
            <h2 lang="en" style="font-size: 2.5rem; margin-top: 10px;">13. Implementation Path Recommendation</h2>
        <div class="section-header" style="text-align: center; max-width: 900px; margin: 0 auto 60px;">

            <p lang="zh" style="font-size: 1.2rem; color: #666; margin-top: 15px;">
                如何平滑地开启 Cilium 之旅，以及在 eBPF “黑盒”面前保持冷静的专家级工具箱。
            </p>
            <p lang="en" style="font-size: 1.2rem; color: #666; margin-top: 15px;">
                How to ensure a smooth transition to Cilium and maintain control with an expert toolbox for the eBPF "black box."
            </p>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1.5fr; gap: 60px; align-items: start;">
            <div>
                <h3 lang="zh" style="color: var(--cisco-midnight); margin-bottom: 20px;">1. 兼容性矩阵 (Compatibility)</h3>
                <h3 lang="en" style="color: var(--cisco-midnight); margin-bottom: 20px;">1. Compatibility Matrix</h3>
                <table class="compat-matrix">
                    <thead>
                        <tr><th lang="zh">维度</th><th lang="en">Dimension</th><th lang="zh">推荐配置</th><th lang="en">Requirement</th></tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td lang="zh">内核版本</td><td lang="en">Kernel</td>
                            <td lang="zh"><b>5.10+</b> (最优性能)</td><td lang="en"><b>5.10+</b> (Optimal)</td>
                        </tr>
                        <tr>
                            <td lang="zh">云平台</td><td lang="en">Cloud</td>
                            <td lang="zh">AWS, Azure, GCP, On-prem</td><td lang="en">AWS, Azure, GKE, Bare-metal</td>
                        </tr>
                        <tr>
                            <td lang="zh">运行模式</td><td lang="en">Mode</td>
                            <td lang="zh">Strict (全替换 Kube-proxy)</td><td lang="en">Strict (Full KPR)</td>
                        </tr>
                        <tr>
                            <td lang="zh">底层网络</td><td lang="en">Underlay</td>
                            <td lang="zh">原生路由 (BGP) 或 VXLAN</td><td lang="en">Direct Routing or VXLAN</td>
                        </tr>
                    </tbody>
                </table>
                <div class="analogy" style="font-size: 1.0rem; margin-top: 15px;">
                    <p lang="zh">💡 <b>提示：</b> 虽然 4.19 内核可运行，但 5.10+ 才能解锁大规模 $O(1)$ 查找和 Maglev 的完整威力。</p>
                    <p lang="en">💡 <b>Tip:</b> While 4.19 is supported, 5.10+ is required to unlock full $O(1)$ lookup and Maglev performance.</p>
                </div>
            </div>

            <div>
                <h3 lang="zh" style="color: var(--cisco-midnight); margin-bottom: 25px;">2. 迁移路径 (Migration Path)</h3>
                <h3 lang="en" style="color: var(--cisco-midnight); margin-bottom: 25px;">2. Migration Strategy</h3>
                <div class="migration-path">
                    <div class="migration-step">
                        <div class="step-icon">1</div>
                        <div>
                            <strong lang="zh">基础底座：Kube-proxy 替换测试</strong><strong lang="en">KPR Replacement Test</strong>
                            <p lang="zh" style="font-size: 1.0rem; color: #666; margin-top: 5px;">在非生产环境验证 <code>kubeProxyReplacement=strict</code>。通过移除 iptables 规则链，验证控制平面稳定性及 LB 响应。</p>
                            <p lang="en" style="font-size: 1.0rem; color: #666; margin-top: 5px;">Validate <code>kubeProxyReplacement=strict</code> in dev. Verify control plane stability by removing iptables overhead.</p>
                        </div>
                    </div>
                    <div class="migration-step">
                        <div class="step-icon">2</div>
                        <div>
                            <strong lang="zh">观测先行：灰度 L7 策略与画像</strong><strong lang="en">Observability First: L7 Profiling</strong>
                            <p lang="zh" style="font-size: 1.0rem; color: #666; margin-top: 5px;">开启 Hubble 观测模式。在强制执行策略前，先进行“流量画像”，识别所有跨 Namespace 的 API 调用。</p>
                            <p lang="en" style="font-size: 1.0rem; color: #666; margin-top: 5px;">Enable Hubble in Audit Mode. Profile traffic to identify cross-namespace API calls before enforcing rules.</p>
                        </div>
                    </div>
                    <div class="migration-step">
                        <div class="step-icon">3</div>
                        <div>
                            <strong lang="zh">纵深防御：部署 Tetragon 集成</strong><strong lang="en">Defense in Depth: Tetragon</strong>
                            <p lang="zh" style="font-size: 1.0rem; color: #666; margin-top: 15px;">从网络安全扩展到运行时安全。利用 Tetragon 强化敏感文件访问监控及内核级系统调用审计。</p>
                            <p lang="en" style="font-size: 1.0rem; color: #666; margin-top: 15px;">Extend security from network to runtime. Use Tetragon for sensitive file access and syscall auditing.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div style="margin-top: 60px;">
            <h3 lang="zh" style="text-align: center; color: var(--cisco-midnight);">3. SRE 核心建议 (Best Practices)</h3>
            <h3 lang="en" style="text-align: center; color: var(--cisco-midnight);">3. SRE Best Practices</h3>
            <div class="best-practice-grid">
                <div class="tech-card" style="border-top-color: var(--cisco-blue);">
                    <strong lang="zh">全栈可见性原则</strong><strong lang="en">Full-stack Visibility</strong>
                    <p lang="zh" style="font-size: 1.0rem; margin-top: 10px;">始终开启 <b>Hubble</b>。没有 Hubble 的 Cilium 就像盲目驾驶；它能缩短 40% 的平均故障处理时间 (MTTR)。</p>
                    <p lang="en" style="font-size: 1.0rem; margin-top: 10px;">Always enable <b>Hubble</b>. Observability reduces MTTR by 40% in large-scale environments.</p>
                </div>
                <div class="tech-card" style="border-top-color: var(--cisco-sky);">
                    <strong lang="zh">身份识别优先 (Identity-First)</strong><strong lang="en">Identity-First Policy</strong>
                    <p lang="zh" style="font-size: 1.0rem; margin-top: 10px;">彻底抛弃基于 IP 的防火墙思维。优先使用 <b>K8s Labels/Identity</b> 定义策略，确保策略随 Pod 漂移而自动跟随。</p>
                    <p lang="en" style="font-size: 1.0rem; margin-top: 10px;">Ditch IP-based logic. Use <b>Identity-aware</b> policies to ensure rules follow workloads, not endpoints.</p>
                </div>
                <div class="tech-card" style="border-top-color: var(--cisco-midnight);">
                    <strong lang="zh">内核级加密 (Encryption)</strong><strong lang="en">Kernel-level Encryption</strong>
                    <p lang="zh" style="font-size: 1.0rem; margin-top: 10px;">利用内置的 <b>WireGuard</b> 加密保护东西向流量。相比 Sidecar 方案，这能减少 50% 以上的 CPU 加密损耗。</p>
                    <p lang="en" style="font-size: 1.0rem; margin-top: 10px;">Use <b>WireGuard</b> for internal traffic. It cuts encryption CPU overhead by over 50% compared to sidecars.</p>
                </div>
            </div>
        </div>
<div class="tech-info-card grid-span-all dark-theme" style="background: var(--cisco-midnight); margin-top: 50px;">
    <h3 lang="zh" style="color: var(--cisco-blue); margin-bottom: 25px;">🎯 总结：Cilium 选型决策准则</h3>
    <h3 lang="en" style="color: var(--cisco-blue); margin-bottom: 25px;">🎯 Summary: Architect's Decision Matrix</h3>
    
    <div class="grid-adaptive-cols">
        <div>
            <strong lang="zh" style="color: white; display: block; margin-bottom: 15px;">何时必须选择 Cilium？</strong>
            <strong lang="en" style="color: white; display: block; margin-bottom: 15px;">When to choose Cilium?</strong>
            <ul style="padding-left: 20px;">
                <li lang="zh">节点数超过 500 或 Service 规则超过 5,000 条。</li>
                <li lang="en">Nodes > 500 or Service rules > 5,000.</li>
                <li lang="zh">追求 Sidecar-less 架构以节省 30% 以上的资源损耗。</li>
                <li lang="en">Aiming for Sidecar-less Mesh to save 30% resources.</li>
                <li lang="zh">AI/ML 训练需要极低的网络抖动 (Jitter)。</li>
                <li lang="en">AI/ML training requiring ultra-low Jitter.</li>
            </ul>
        </div>
        <div>
            <strong lang="zh" style="color: white; display: block; margin-bottom: 15px;">如何确保落地成功？</strong>
            <strong lang="en" style="color: white; display: block; margin-bottom: 15px;">How to ensure success?</strong>
            <ul style="padding-left: 20px;">
                <li lang="zh">内核版本锁定在 5.10+，开启 Strict 模式。</li>
                <li lang="en">Lock Kernel at 5.10+; use Strict mode.</li>
                <li lang="zh">先开启 Hubble 审计模式，不带策略运行两周。</li>
                <li lang="en">Run Hubble in Audit mode for 2 weeks first.</li>
                <li lang="zh">利用 Cluster Mesh 实现跨云的灾备韧性。</li>
                <li lang="en">Leverage Cluster Mesh for multi-cloud resilience.</li>
            </ul>
        </div>
    </div>
</div>
    </div>
</section>

<section id="reference-library" class="container" style="padding: 80px 20px; border-top: 1px solid var(--cisco-platinum);">
                <h2 lang="zh" style="font-size: 2.5rem; margin-bottom: 10px;">参考资料 (Reference)</h2>
            <h2 lang="en" style="font-size: 2.5rem; margin-bottom: 10px;">Reference</h2>
    <style>
        .reference-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
            gap: 25px;
            margin-top: 40px;
        }
        .reference-category h3 {
            font-size: 1.1rem;
            color: var(--cisco-midnight);
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--cisco-blue);
            display: inline-block;
        }
        .reference-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .reference-item {
            padding: 10px 0;
            border-bottom: 1px dashed #e1e8ed;
            font-size: 1.0rem;
            transition: all 0.2s ease;
        }
        .reference-item:hover {
            padding-left: 5px;
            background: rgba(4, 159, 217, 0.02);
        }
        .reference-item a {
            color: var(--cisco-blue);
            text-decoration: none;
            word-break: break-all;
        }
        .reference-item a:hover {
            color: var(--cisco-midnight);
            text-decoration: underline;
        }
        .ref-tag {
            font-size: 1.0rem;
            padding: 2px 6px;
            border-radius: 4px;
            background: #eee;
            color: #666;
            margin-right: 8px;
            vertical-align: middle;
            text-transform: uppercase;
        }
        @media (max-width: 768px) {
            .reference-grid { grid-template-columns: 1fr; }
        }
    </style>

    <div class="reference-grid">
        <div class="reference-category">
            <h3 lang="zh">官方资源与技术底座</h3>
            <h3 lang="en">Official & Foundations</h3>
            <ul class="reference-list">
                <li class="reference-item">
                    <span class="ref-tag">Official</span>
                    <a href="https://cilium.io" target="_blank">Cilium Project - Cloud Native Networking, Security & Observability</a>
                </li>
                <li class="reference-item">
                    <span class="ref-tag">Company</span>
                    <a href="https://isovalent.com/" target="_blank">Isovalent - The Enterprise eBPF Company (Creators of Cilium)</a>
                </li>
                <li class="reference-item">
                    <span class="ref-tag">Product</span>
                    <a href="https://isovalent.com/products/kubernetes-networking/" target="_blank">Isovalent: Advanced Kubernetes Networking with Cilium</a>
                </li>
                <li class="reference-item">
                    <span class="ref-tag">Community</span>
                    <a href="https://ebpf.io/" target="_blank">eBPF.io - The hub for eBPF technology and community</a>
                </li>
            </ul>
        </div>

        <div class="reference-category">
            <h3 lang="zh">技术深度解析</h3>
            <h3 lang="en">Technical Deep Dives</h3>
            <ul class="reference-list">
                <li class="reference-item">
                    <span class="ref-tag">Guide</span>
                    <a href="https://medium.com/@simardeep.oberoi/cilium-a-comprehensive-guide-to-networking-security-and-observability-in-kubernetes-41e11fa69d15" target="_blank">Cilium: A Comprehensive Guide to K8s Networking & Security</a>
                </li>
                <li class="reference-item">
                    <span class="ref-tag">Hands-on</span>
                    <a href="https://veducate.co.uk/cilium-network-policies-from-first-principles-to-production/" target="_blank">vEducate: Cilium Network Policies - Principles to Production</a>
                </li>
                <li class="reference-item">
                    <span class="ref-tag">Blog</span>
                    <a href="https://dev.to/mageshwaransekar/cilium-as-cni-for-kubernetes-5d6n" target="_blank">Dev.to: Implementing Cilium as CNI for Kubernetes</a>
                </li>
                <li class="reference-item">
                    <span class="ref-tag">Archive</span>
                    <a href="https://jimmysong.io/zh/book/kubernetes-handbook/networking/overview/" target="_blank">Jimmy Song: Kubernetes Handbook - Networking Architecture (ZH)</a>
                </li>
            </ul>
        </div>

        <div class="reference-category">
            <h3 lang="zh">AI 革命与行业报告</h3>
            <h3 lang="en">AI & Industry Reports</h3>
            <ul class="reference-list">
                <li class="reference-item">
                    <span class="ref-tag">Special</span>
                    <a href="https://kubestory.substack.com/p/cilium-for-aiml-workload" target="_blank">KubeStory: Scaling Cilium for AI/ML Workloads</a>
                </li>
                <li class="reference-item">
                    <span class="ref-tag">Annual</span>
                    <a href="https://www.cncf.io/wp-content/uploads/2025/12/cilium-annual-report-2025-final.pdf" target="_blank">CNCF: Cilium Annual Report 2025 - The State of eBPF</a>
                </li>
                <li class="reference-item">
                    <span class="ref-tag">Session</span>
                    <a href="https://www.ciscolive.com/c/dam/r/ciscolive/emea/docs/2025/pdf/BRKCLD-2696.pdf" target="_blank">Cisco Live 2025: BRKCLD-2696 - Enterprise Cloud Networking</a>
                </li>
                <li class="reference-item">
                    <span class="ref-tag">Blog</span>
                    <a href="https://isovalent.com/blog/post/why-replace-iptables-with-ebpf/" target="_blank">Isovalent Analysis: Why Replace iptables with eBPF?</a>
                </li>
            </ul>
        </div>

        <div class="reference-category">
            <h3 lang="zh">协议标准与学术资料</h3>
            <h3 lang="en">Protocols & Academic</h3>
            <ul class="reference-list">
                <li class="reference-item">
                    <span class="ref-tag">RFC</span>
                    <a href="https://datatracker.ietf.org/doc/html/rfc7542" target="_blank">IETF RFC 7542: The Network Access Identifier (NAI)</a>
                </li>
                <li class="reference-item">
                    <span class="ref-tag">Whitepaper</span>
                    <a href="https://arxiv.org/html/2410.00026v1" target="_blank">Academic: The eBPF Runtime in the Linux Kernel</a>
                </li>
                <li class="reference-item">
                    <span class="ref-tag">Video</span>
                    <a href="https://www.youtube.com/watch?v=Wb_vD3XZYOA" target="_blank">YouTube: eBPF Mechanism and High-Performance Benchmarks</a>
                </li>
            </ul>
        </div>
    </div>
</section>

<section class="trilogy-footer-nav container">
    <h2 class="trilogy-title">
        <span lang="en">The eBPF Trilogy</span>
        <span lang="zh">eBPF 技术三部曲</span>
    </h2>
    <div class="trilogy-grid">
        <a href="ebpf.html" class="trilogy-card">
            <div>
                <span class="part-tag">Part I: Foundation</span>
                <h4>eBPF: <span lang="zh">内核超能力</span><span lang="en">Kernel Superpower</span></h4>
                <p>
                    <span lang="zh">探索 JIT、Verifier 与 CO-RE 机制。</span>
                    <span lang="en">Explore JIT, Verifier, and CO-RE mechanisms.</span>
                </p>
            </div>
            <span class="link-text"><span lang="zh">阅读文章</span><span lang="en">Read Post</span></span>
        </a>

        <a href="cilium.html" class="trilogy-card">
            <div>
                <span class="part-tag">Part II: Networking</span>
                <h4>Cilium: <span lang="zh">重塑云原生网络</span><span lang="en">Reshaping Networking</span></h4>
                <p>
                    <span lang="zh">从 kube-proxy 替换到 Sidecar-less 服务网格。</span>
                    <span lang="en">From kube-proxy replacement to Sidecar-less mesh.</span>
                </p>
            </div>
            <span class="link-text"><span lang="zh">阅读文章</span><span lang="en">Read Post</span></span>
        </a>

        <a href="tetragon.html" class="trilogy-card">
            <div>
                <span class="part-tag">Part III: Security</span>
                <h4>Tetragon: <span lang="zh">运行时安全阻断</span><span lang="en">Runtime Security</span></h4>
                <p>
                    <span lang="zh">内核态亚毫秒级同步阻断与威胁检测。</span>
                    <span lang="en">Sub-millisecond kernel blocking and threat detection.</span>
                </p>
            </div>
            <span class="link-text"><span lang="zh">阅读文章</span><span lang="en">Read Post</span></span>
        </a>
    </div>
</section>

    </main>

    <footer
        style="background: var(--cisco-midnight); color: white; padding: 60px 0; text-align: center; margin-top: 40px;">
        <div class="container">
            <p lang="zh">&copy; 2026 思科基础设施博文 - 由 eBPF 与 Cilium 驱动</p>
            <p lang="en">&copy; 2026 Cisco Infrastructure Blog - Powered by eBPF & Cilium</p>
        </div>
    </footer>

    <script>
        /**
         * 语言切换控制核心逻辑
         */
        function setLanguage(lang) {
            // 更新 body class
            document.body.className = 'lang-' + lang;
            // 更新 HTML lang 属性（SEO 与 浏览器行为优化）
            document.documentElement.lang = (lang === 'zh' ? 'zh-CN' : 'en');
            // 持久化存储
            localStorage.setItem('preferred-lang', lang);

            console.log('Language switched to:', lang);
        }

        // 初始化语言设置
        (function initLanguage() {
            const savedLang = localStorage.getItem('preferred-lang');
            // 如果没有保存的偏好，则根据浏览器语言判断
            const browserLang = navigator.language.startsWith('zh') ? 'zh' : 'en';
            const targetLang = savedLang || browserLang;

            // 执行切换
            setLanguage(targetLang);
        })();

/* --- Chapter 09: Interactive Lab Logic (i18n Compatible) --- */
const labDatabase = {
    zh: {
        1: [
            "> kubeadm init --skip-phases=addon/kube-proxy --pod-network-cidr=10.0.0.0/16",
            "[preflight] 正在执行安装前检查...",
            "[certs] 已生成 apiserver 证书 (IP: 10.75.59.71)",
            "✅ Kubernetes 控制平面初始化成功！",
            "提示：当前未检测到 kube-proxy，系统正在等待 eBPF 数据面注入..."
        ],
        2: [
            "> ansible-playbook site.yml -i inventory.ini --tags=pre-check",
            "TASK [check_kernel_version] : 5.15.0-generic -> OK",
            "TASK [mount_bpf_filesystem] : 已挂载 /sys/fs/bpf -> CHANGED",
            "✅ 节点环境符合 Cilium 极致性能要求。"
        ],
        3: [
            "> helm install cilium cilium/cilium --namespace kube-system --set kubeProxyReplacement=true",
            "正在加载 eBPF 映射表 (IPCache, Policy, Service)...",
            "正在 JIT 编译内核程序并附加至 XDP/TC 挂钩点...",
            "✅ Cilium 已接管所有网络转发。查找复杂度：O(1)。",
            "结果：Nodes 状态转为 'Ready'"
        ],
        4: [
            "> kubectl apply -f bgp-policy.yaml",
            "> cilium bgp peers",
            "节点: node-1 | 邻居: 10.75.59.254 | 状态: Established",
            "✅ BGP 已通告 12 条 Pod 路由至物理核心交换机。"
        ],
        5: [
            "> hubble observe --identity 1042 --protocol http",
            "源: xwing (1042) -> 目的: deathstar (15153) | 结果: FORWARDED",
            "L7 内容: POST /v1/request-landing (Identity Match)",
            "✅ 观测到带有身份指纹的合规请求。100% 流量透明度已达成。"
        ]
    },
    en: {
        1: [
            "> kubeadm init --skip-phases=addon/kube-proxy --pod-network-cidr=10.0.0.0/16",
            "[preflight] Running pre-installation checks...",
            "[certs] Generated apiserver certs (IP: 10.75.59.71)",
            "✅ Kubernetes control-plane initialized successfully!",
            "Note: No kube-proxy detected. Waiting for eBPF datapath injection..."
        ],
        2: [
            "> ansible-playbook site.yml -i inventory.ini --tags=pre-check",
            "TASK [check_kernel_version] : 5.15.0-generic -> OK",
            "TASK [mount_bpf_filesystem] : Mounted /sys/fs/bpf -> CHANGED",
            "✅ Node environment meets Cilium peak performance requirements."
        ],
        3: [
            "> helm install cilium cilium/cilium --namespace kube-system --set kubeProxyReplacement=true",
            "Loading eBPF maps (IPCache, Policy, Service)...",
            "JIT compiling and attaching to XDP/TC hooks...",
            "✅ Cilium took over networking. Complexity: O(1).",
            "Result: Nodes transitioned to 'Ready'"
        ],
        4: [
            "> kubectl apply -f bgp-policy.yaml",
            "> cilium bgp peers",
            "Node: node-1 | Peer: 10.75.59.254 | State: Established",
            "✅ BGP advertised 12 Pod routes to physical core switches."
        ],
        5: [
            "> hubble observe --identity 1042 --protocol http",
            "Src: xwing (1042) -> Dst: deathstar (15153) | Verdict: FORWARDED",
            "L7 Context: POST /v1/request-landing (Identity Match)",
            "✅ Identity-aware compliant request observed. 100% visibility achieved."
        ]
    }
};

function executeLabStep(step) {
    const stream = document.getElementById('lab-log-stream');
    const k8sText = document.getElementById('status-k8s');
    const cniText = document.getElementById('status-cni');
    const bgpText = document.getElementById('status-bgp');
    const hubbleText = document.getElementById('status-hubble');

    // 确定当前语言
    const lang = document.body.classList.contains('lang-en') ? 'en' : 'zh';
    const lines = labDatabase[lang][step];

    stream.innerHTML = "";
    let i = 0;
    const interval = setInterval(() => {
        if (i < lines.length) {
            const isCmd = lines[i].startsWith('>');
            stream.innerHTML += `<div><span style="color:${isCmd ? '#58a6ff' : '#3fb950'}">${isCmd ? '' : '● '}</span>${lines[i]}</div>`;
            stream.scrollTop = stream.scrollHeight;
            i++;
        } else {
            clearInterval(interval);
            // 更新 UI 状态指示器
            updateLabStatus(step, lang);
        }
    }, 400);
}

function updateLabStatus(step, lang) {
    const k8sText = document.getElementById('status-k8s');
    const cniText = document.getElementById('status-cni');
    const bgpText = document.getElementById('status-bgp');
    const hubbleText = document.getElementById('status-hubble');

    if (step >= 1) {
        k8sText.innerHTML = lang === 'zh' ? "就绪 (No Proxy)" : "Ready (No Proxy)";
        k8sText.style.color = "var(--cisco-sky)";
    }
    if (step >= 3) {
        cniText.innerHTML = lang === 'zh' ? "Cilium eBPF (O1)" : "Cilium eBPF (O1)";
        cniText.style.color = "var(--cisco-blue)";
    }
    if (step >= 4) {
        bgpText.innerHTML = lang === 'zh' ? "Established" : "Established";
        bgpText.style.color = "var(--cisco-sky)";
    }
    if (step >= 5) {
        hubbleText.innerHTML = lang === 'zh' ? "100% 可见" : "100% Visible";
        hubbleText.style.color = "var(--cisco-sky)";
    }
}

    </script>
</body>

</html>