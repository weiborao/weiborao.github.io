<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>eBPF: The Superpower of Linux Kernel</title>
    <style>
        /* --- CSS Variables & Cisco Color Palette --- */
        :root {
            --cisco-blue: #049FD9;
            --cisco-dark-blue: #1D2729;
            --cisco-midnight: #0D274D;
            --cisco-sky-blue: #6ABF4B; 
            --cisco-green: #6CC24A;
            --cisco-red: #E2231A;
            --cisco-orange: #FF9E1B;
            --cisco-gray: #F2F2F2;
            --cisco-light-gray: #E8E8E8;
            --text-main: #333333;
            --text-light: #FFFFFF;
            --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            --card-shadow: 0 4px 20px rgba(0,0,0,0.06);
            --transition: all 0.3s ease;
            /* 增强呼吸感的间距变量 */
            --section-padding: 120px;
        }

        /* --- Reset & Base --- */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: var(--font-family);
            color: var(--text-main);
            background-color: #ffffff;
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* --- Components --- */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .btn {
            display: inline-block;
            padding: 12px 28px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
            transition: var(--transition);
            cursor: pointer;
            border: none;
            font-size: 1rem;
        }

        .btn-primary {
            background-color: var(--cisco-blue);
            color: white;
            box-shadow: 0 4px 6px rgba(4, 159, 217, 0.3);
        }

        .btn-primary:hover {
            background-color: #0380ae;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(4, 159, 217, 0.4);
        }

        .card {
            background: white;
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            padding: 30px;
            margin-bottom: 20px;
            border-top: 4px solid var(--cisco-blue);
            transition: var(--transition);
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        /* --- Header --- */
        header {
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            position: sticky;
            top: 0;
            z-index: 1000;
            padding: 15px 0;
        }

        .nav-wrapper {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--cisco-dark-blue);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo svg {
            height: 28px;
            width: auto;
        }

        .lang-switch {
            background: var(--cisco-gray);
            border-radius: 20px;
            padding: 4px;
            display: flex;
            font-size: 0.85rem;
        }

        .lang-btn {
            padding: 6px 14px;
            border-radius: 16px;
            cursor: pointer;
            color: #666;
            font-weight: 600;
            transition: all 0.2s;
        }

        .lang-btn.active {
            background: white;
            color: var(--cisco-blue);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        /* --- Hero Section --- */
        .hero {
            background: linear-gradient(135deg, var(--cisco-dark-blue) 0%, #0D274D 100%);
            color: white;
            padding: 100px 0 140px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: -50px;
            right: -50px;
            width: 300px;
            height: 300px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(4,159,217,0.2) 0%, rgba(0,0,0,0) 70%);
            z-index: 0;
        }

        .hero-content {
            position: relative;
            z-index: 1;
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 24px;
            font-weight: 300;
            letter-spacing: -1px;
        }

        .hero h1 strong {
            font-weight: 800;
            display: block;
            color: var(--cisco-blue);
            margin-top: 10px;
        }

        .hero p {
            font-size: 1.25rem;
            opacity: 0.9;
            max-width: 700px;
            margin: 0 auto 40px;
            font-weight: 300;
        }

        /* --- Sections General --- */
        section {
            padding: var(--section-padding) 0;
        }

        .section-title {
            text-align: center;
            font-size: 2.2rem;
            color: var(--cisco-dark-blue);
            margin-bottom: 60px;
            font-weight: 700;
            position: relative;
        }
        
        .section-title::after {
            content: '';
            display: block;
            width: 60px;
            height: 4px;
            background: var(--cisco-blue);
            margin: 20px auto 0;
            border-radius: 2px;
        }

        .golden-badge {
            display: inline-block;
            padding: 4px 12px;
            background: var(--cisco-blue);
            color: white;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: bold;
            margin-bottom: 15px;
            text-transform: uppercase;
        }

        /* --- Grid Layouts --- */
        .grid-3 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }

        .feature-box {
            background: white;
            padding: 30px;
            border-radius: 12px;
            border: 1px solid #eee;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
        }

        .feature-box:hover {
            transform: translateY(-5px);
            border-color: var(--cisco-blue);
        }

        .feature-box svg {
            width: 48px;
            height: 48px;
            fill: var(--cisco-blue);
            margin-bottom: 20px;
        }

        /* --- Analogy Grid --- */
        .analogy-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 40px;
        }

        .analogy-item {
            text-align: center;
            height: 100%;
        }

        .analogy-icon {
            height: 140px;
            margin-bottom: 25px;
            transition: transform 0.3s;
        }
        
        .analogy-item:hover .analogy-icon {
            transform: scale(1.05);
        }

        /* --- Terminology Section --- */
        .term-group {
            margin-bottom: 60px;
        }
        .term-group-title {
            font-size: 1.6rem;
            color: var(--cisco-blue);
            border-left: 6px solid var(--cisco-blue);
            padding-left: 18px;
            margin-bottom: 30px;
            font-weight: 800;
        }
        .term-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 25px;
        }
        .term-card {
            background: #fff;
            border: 1px solid #eee;
            padding: 25px;
            border-radius: 12px;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }
        .term-card::after {
            content: '';
            position: absolute;
            bottom: 0;
            right: 0;
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, transparent 50%, var(--cisco-blue) 50%);
            opacity: 0.05;
        }
        .term-card:hover {
            border-color: var(--cisco-blue);
            box-shadow: 0 6px 20px rgba(4, 159, 217, 0.1);
        }
        .term-card h4 {
            color: var(--cisco-midnight);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.1rem;
        }
        .term-card p {
            font-size: 0.95rem;
            color: #555;
            line-height: 1.5;
        }

        /* --- Evolution Timeline --- */
        .evolution-timeline {
            position: relative;
            max-width: 900px;
            margin: 40px auto;
            padding: 20px 0;
        }
        .evolution-timeline::before {
            content: '';
            position: absolute;
            left: 50%;
            width: 2px;
            height: 100%;
            background: linear-gradient(to bottom, transparent, var(--cisco-light-gray), transparent);
            transform: translateX(-50%);
        }
        .timeline-item {
            margin-bottom: 60px;
            position: relative;
            width: 50%;
            padding: 0 40px;
        }
        .timeline-item:nth-child(odd) { left: 0; text-align: right; }
        .timeline-item:nth-child(even) { left: 50%; text-align: left; }
        .timeline-point {
            position: absolute;
            top: 10px;
            width: 20px;
            height: 20px;
            background: var(--cisco-blue);
            border: 4px solid white;
            border-radius: 50%;
            box-shadow: 0 0 0 4px rgba(4, 159, 217, 0.2);
            z-index: 2;
        }
        .timeline-item:nth-child(odd) .timeline-point { right: -10px; }
        .timeline-item:nth-child(even) .timeline-point { left: -10px; }
        .timeline-year { font-weight: 900; color: var(--cisco-blue); font-size: 1.4rem; font-family: 'Courier New', monospace; }
        .timeline-content h5 { margin: 8px 0; color: var(--cisco-dark-blue); font-size: 1.2rem; }
        .timeline-content p { font-size: 0.9rem; color: #666; }

        /* --- Insight Card --- */
        .insight-card {
            background: #f8f9fa;
            border-left: 4px solid var(--cisco-blue);
            padding: 20px;
            margin: 30px 0;
            font-style: italic;
            color: #555;
            font-size: 1rem;
            line-height: 1.7;
        }

        /* --- Comparison Table --- */
        .comparison-wrapper {
            overflow-x: auto;
            margin: 60px 0;
        }
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
        }
        .comparison-table th {
            background: var(--cisco-dark-blue);
            color: white;
            padding: 20px;
            text-align: left;
            font-size: 1rem;
        }
        .comparison-table td {
            padding: 20px;
            border-bottom: 1px solid #eee;
            font-size: 0.95rem;
        }
        .comparison-table tr:hover { background-color: #fcfcfc; }
        .check-icon { color: var(--cisco-green); font-weight: bold; }
        .cross-icon { color: var(--cisco-red); font-weight: bold; }

        /* --- Code Snippet Section --- */
        .code-tabs {
            background: #1e1e1e;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
            margin: 40px 0;
        }
        .tabs-header {
            display: flex;
            background: #2d2d2d;
            border-bottom: 1px solid #444;
        }
        .tab-btn {
            padding: 15px 25px;
            color: #999;
            cursor: pointer;
            border: none;
            background: transparent;
            font-weight: bold;
            transition: var(--transition);
            font-size: 0.9rem;
        }
        .tab-btn.active {
            color: var(--cisco-blue);
            background: #1e1e1e;
            border-bottom: 3px solid var(--cisco-blue);
        }
        .code-content {
            padding: 25px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.95rem;
            color: #d4d4d4;
            white-space: pre-wrap;
            overflow-x: auto;
            line-height: 1.6;
        }
        .code-keyword { color: #569cd6; }
        .code-string { color: #ce9178; }
        .code-comment { color: #6a9955; }
        .code-func { color: #dcdcaa; }

        /* --- Terminal Section --- */
        .terminal-wrapper {
            background: #000;
            border-radius: 8px;
            padding: 25px;
            color: #0f0;
            font-family: 'Courier New', Courier, monospace;
            height: 380px;
            overflow-y: auto;
            box-shadow: 0 15px 50px rgba(0,0,0,0.6);
            margin: 30px 0;
            border: 1px solid #444;
        }
        .terminal-line { margin-bottom: 10px; line-height: 1.5; font-size: 0.95rem; }
        .terminal-prompt { color: #fff; font-weight: bold; }
        .terminal-cursor {
            display: inline-block;
            width: 10px;
            height: 18px;
            background: #0f0;
            vertical-align: middle;
            animation: blink 1s infinite;
        }
        @keyframes blink { 50% { opacity: 0; } }

        /* --- Process Section --- */
        .process-section {
            background-color: #FAFAFA;
        }

        .process-steps {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 25px;
            position: relative;
            margin-top: 50px;
        }

        .step-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            border: 1px solid #eee;
            position: relative;
            z-index: 2;
        }

        .step-number {
            background: var(--cisco-blue);
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .step-arrow {
            position: absolute;
            top: 40px;
            right: -15px;
            z-index: 1;
            color: #ddd;
            font-size: 1.5rem;
        }

        /* --- Detail Components Section --- */
        .detail-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-top: 50px;
        }

        .hook-list {
            list-style: none;
            padding: 0;
            margin-top: 15px;
        }
        .hook-item {
            padding: 12px;
            border-bottom: 1px solid #eee;
            display: flex;
            gap: 15px;
            align-items: flex-start;
        }
        .hook-item:last-child { border-bottom: none; }
        .hook-label {
            font-weight: bold;
            color: var(--cisco-blue);
            min-width: 80px;
            font-family: 'Courier New', monospace;
        }
        .hook-desc { font-size: 0.9rem; color: #555; }

        /* --- Features Grid (Pillars) --- */
        .features {
            background-color: var(--cisco-dark-blue);
            color: white;
        }
        
        .features .section-title {
            color: white;
        }

        .pillars-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            margin-top: 50px;
        }

        @media (max-width: 1024px) {
            .pillars-grid { grid-template-columns: 1fr; }
        }

        .feature-card {
            background: rgba(255,255,255,0.04);
            padding: 40px 35px;
            border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.08);
            border-top: 6px solid var(--cisco-blue);
            backdrop-filter: blur(12px);
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .feature-card:hover {
            background: rgba(255,255,255,0.08);
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        .feature-icon-box {
            width: 75px;
            height: 75px;
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 30px;
            background: rgba(255,255,255,0.1);
            transition: var(--transition);
        }
        
        .feature-card:hover .feature-icon-box {
            transform: scale(1.1) rotate(5deg);
        }

        .feature-card h3 {
            color: white;
            margin-bottom: 20px;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .feature-card p {
            color: rgba(255,255,255,0.8);
            font-size: 1rem;
            line-height: 1.7;
            flex-grow: 1; 
        }

        /* --- Scenarios Section --- */
        .scenario-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 50px;
            align-items: center;
            margin-bottom: 80px;
        }

        .scenario-text h3 {
            color: var(--cisco-blue);
            margin-bottom: 20px;
            font-size: 1.7rem;
        }

        .scenario-visual {
            background: #f4f6f8;
            border-radius: 16px;
            padding: 30px;
            display: flex;
            justify-content: center;
        }

        /* --- Interactive Demo --- */
        .demo-section {
            background: #fff;
            border-top: 1px solid #eee;
        }

        .pipeline-container {
            background: var(--cisco-dark-blue);
            border-radius: 20px;
            padding: 30px;
            position: relative;
            height: 280px;
            overflow: hidden;
            margin: 40px auto;
            max-width: 1000px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: inset 0 0 80px rgba(0,0,0,0.6);
        }

        .kernel-zone {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            border: 2px dashed rgba(255,255,255,0.1);
            pointer-events: none;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding-bottom: 20px;
            color: rgba(255,255,255,0.25);
            font-size: 1rem;
            letter-spacing: 4px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .packet {
            width: 60px;
            height: 60px;
            background: white;
            border-radius: 12px;
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
            color: var(--cisco-dark-blue);
            box-shadow: 0 0 20px rgba(255,255,255,0.4);
            z-index: 10;
            transition: left 0.1s linear, opacity 0.3s;
        }

        .ebpf-program {
            width: 160px;
            height: 160px;
            background: rgba(4, 159, 217, 0.15);
            border: 2px solid var(--cisco-blue);
            border-radius: 50%;
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.9rem;
            box-shadow: 0 0 40px rgba(4, 159, 217, 0.3);
            z-index: 5;
        }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 40px;
        }
        
        .control-panel {
            background: #f9f9f9;
            padding: 30px;
            border-radius: 16px;
            border: 1px solid #ddd;
            margin-bottom: 20px;
            max-width: 700px;
            margin: 0 auto 30px;
            text-align: left;
        }

        /* --- Ecosystem Grid --- */
        .feature-grid-eco {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 35px;
            margin-top: 50px;
        }
        @media (max-width: 850px) {
            .feature-grid-eco { grid-template-columns: 1fr; }
        }

        /* --- Footer --- */
        footer {
            background: var(--cisco-dark-blue);
            color: white;
            text-align: center;
            padding: 80px 0;
            font-size: 0.95rem;
            border-top: 6px solid var(--cisco-blue);
        }

        /* --- Utilities --- */
        .hidden { display: none !important; }
        .text-cisco-blue { color: var(--cisco-blue); }
        .text-bold { font-weight: 700; }

        /* --- New Diagram Styles --- */
        .diagram-container {
            display: flex;
            justify-content: center;
            margin: 40px 0;
            background: #fff;
            padding: 20px;
            border-radius: 12px;
            box-shadow: var(--card-shadow);
        }
        .arch-svg {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<body>

    <!-- Header -->
    <header>
        <div class="container nav-wrapper">
            <div class="logo">
                <svg viewBox="0 0 64 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect width="64" height="32" rx="4" fill="white"/>
                    <path d="M14 24V16" stroke="#049FD9" stroke-width="3" stroke-linecap="round"/>
                    <path d="M22 24V10" stroke="#049FD9" stroke-width="3" stroke-linecap="round"/>
                    <path d="M30 24V14" stroke="#049FD9" stroke-width="3" stroke-linecap="round"/>
                    <path d="M38 24V8" stroke="#049FD9" stroke-width="3" stroke-linecap="round"/>
                    <path d="M46 24V14" stroke="#049FD9" stroke-width="3" stroke-linecap="round"/>
                    <path d="M54 24V19" stroke="#049FD9" stroke-width="3" stroke-linecap="round"/>
                </svg>
                <span>Security Architect View</span>
            </div>
            <div class="lang-switch">
                <div class="lang-btn active" onclick="setLang('zh')">中文</div>
                <div class="lang-btn" onclick="setLang('en')">EN</div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container hero-content">
            <h1 class="lang-zh">eBPF<br><strong>Linux 内核的超能力</strong></h1>
            <h1 class="lang-en hidden">eBPF<br><strong>The Superpower of Linux Kernel</strong></h1>
            
            <p class="lang-zh">无需重启，无需修改源码，让操作系统即刻拥有全新的安全、网络与可观测能力。<br>这不仅仅是技术升级，这是基础设施的范式转移。</p>
            <p class="lang-en hidden">Instantly grant the OS new security, networking, and observability capabilities without restarting or modifying the source code.<br>It's not just an upgrade; it's a paradigm shift for infrastructure.</p>
            
            <button class="btn btn-primary lang-zh" onclick="scrollToDemo()">体验交互 Demo</button>
            <button class="btn btn-primary lang-en hidden" onclick="scrollToDemo()">Try Interactive Demo</button>

            <div class="hero-graphic" style="margin-top: 60px;">
                <svg width="280" height="200" viewBox="0 0 200 150" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="30" y="20" width="140" height="110" rx="12" fill="rgba(255,255,255,0.05)" stroke="white" stroke-width="1.5"/>
                    <circle cx="100" cy="75" r="30" fill="#049FD9" fill-opacity="0.9">
                        <animate attributeName="r" values="30;34;30" dur="2s" repeatCount="indefinite" />
                        <animate attributeName="fill-opacity" values="0.9;0.5;0.9" dur="2s" repeatCount="indefinite" />
                    </circle>
                    <path d="M100 75L30 20" stroke="#6CC24A" stroke-width="2" stroke-dasharray="6 6"/>
                    <path d="M100 75L170 20" stroke="#6CC24A" stroke-width="2" stroke-dasharray="6 6"/>
                    <path d="M100 75L30 130" stroke="#6CC24A" stroke-width="2" stroke-dasharray="6 6"/>
                    <path d="M100 75L170 130" stroke="#6CC24A" stroke-width="2" stroke-dasharray="6 6"/>
                    <text x="100" y="80" text-anchor="middle" fill="white" font-size="11" font-family="sans-serif" font-weight="900" letter-spacing="2">KERNEL</text>
                </svg>
            </div>
        </div>
    </section>

    <!-- Analogy & Why Section -->
    <section class="container">
        <span class="golden-badge lang-zh">核心痛点 / WHY</span>
        <span class="golden-badge lang-en hidden">PAIN POINTS / WHY</span>
        <h2 class="section-title lang-zh">为什么要引入 eBPF？</h2>
        <h2 class="section-title lang-en hidden">Why eBPF?</h2>

        <p class="lang-zh" style="text-align: center; max-width: 850px; margin: -20px auto 40px;">Linux 内核是现代基础架构的基石，但其作为“共享资源”的特性，导致了<strong>稳定性与创新速度</strong>之间的剧烈冲突。传统上，在内核中实现新功能面临着难以逾越的障碍：</p>
        <p class="lang-en hidden" style="text-align: center; max-width: 850px; margin: -20px auto 40px;">The Linux kernel is the bedrock of modern infrastructure, but its nature as a "shared resource" creates a sharp conflict between <strong>stability and the pace of innovation</strong>. Historically, implementing new features in the kernel faced insurmountable obstacles:</p>

        <!-- Technical Pain Points Grid -->
        <div class="grid-3">
            <div class="feature-box">
                <svg viewBox="0 0 24 24"><path d="M13,9V3.5L18.5,9M6,2c-1.11,0-2,0.89-2,2v16a2,2 0 0,0,2,2h12a2,2 0 0,0,2-2V8L14,2H6Z"/></svg>
                <h3 class="lang-zh">修改内核源码</h3>
                <h3 class="lang-en hidden">Kernel Source</h3>
                <p class="lang-zh"><strong>时间鸿沟：</strong>一个新特性从提交社区到最终进入企业发行版，往往需要 <strong>3-5 年</strong>。这无法满足现代云原生极速演进的需求。</p>
                <p class="lang-en hidden"><strong>The Time Gap:</strong> It takes <strong>3-5 years</strong> for a new feature to move from upstream to enterprise distributions, failing modern cloud-native agility.</p>
            </div>
            <div class="feature-box">
                <svg viewBox="0 0 24 24"><path d="M21,16.5C21,16.88 20.79,17.21 20.47,17.38L12.57,21.82C12.41,21.94 12.21,22 12,22C11.79,22 11.59,21.94 11.43,21.82L3.53,17.38C3.21,17.21 3,16.88 3,16.5V7.5C3,7.12 3.21,6.79 3.53,6.62L11.43,2.18C11.59,2.06 11.79,2 12,2C12.21,2 12.41,2.06 12.57,2.18L20.47,6.62C20.79,6.79 21,7.12 21,7.5V16.5Z"/></svg>
                <h3 class="lang-zh">内核模块 (LKM)</h3>
                <h3 class="lang-en hidden">Kernel Modules</h3>
                <p class="lang-zh"><strong>安全困境：</strong>内核模块缺乏保护边界。代码中一个小小的空指针引用就会触发 <strong>Kernel Panic</strong>，导致整机甚至整个集群节点的崩溃。</p>
                <p class="lang-en hidden"><strong>The Safety Dilemma:</strong> Modules lack protection boundaries. A tiny null pointer can trigger a <strong>Kernel Panic</strong>, crashing the entire host.</p>
            </div>
            <div class="feature-box" style="background: #e1f5fe; border: 2px solid var(--cisco-blue);">
                <svg viewBox="0 0 24 24" style="fill: var(--cisco-blue);"><path d="M12,2L4.5,20.29L5.21,21L12,18L18.79,21L19.5,20.29L12,2Z"/></svg>
                <h3 class="lang-zh">eBPF 革命性方案</h3>
                <h3 class="lang-en hidden">eBPF Revolution</h3>
                <p class="lang-zh"><strong>解耦与安全：</strong>通过沙盒机制在运行时动态加载程序。它提供了<strong>原生性能</strong>，同时由内核验证器保证绝不引发系统崩溃。</p>
                <p class="lang-en hidden"><strong>Decoupling & Safety:</strong> Dynamically loads programs via sandboxing. It offers <strong>native performance</strong> guaranteed by a kernel verifier.</p>
            </div>
        </div>

        <h3 class="lang-zh" style="margin-top: 60px; margin-bottom: 20px; color: var(--cisco-midnight); font-size: 1.6rem; text-align: center;">深度对比：为什么 eBPF 是最终答案？</h3>
        <h3 class="lang-en hidden" style="margin-top: 60px; margin-bottom: 20px; color: var(--cisco-midnight); font-size: 1.6rem; text-align: center;">Deep Comparison: Why eBPF is the Ultimate Answer?</h3>
        
        <div class="comparison-wrapper">
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th class="lang-zh">维度 / Dimension</th>
                        <th class="lang-en hidden">Dimension</th>
                        <th class="lang-zh">传统方式 (LKM / Upstream)</th>
                        <th class="lang-en hidden">Traditional (LKM / Upstream)</th>
                        <th class="lang-zh">eBPF 模式</th>
                        <th class="lang-en hidden">eBPF Mode</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="lang-zh">交付速度</td>
                        <td class="lang-en hidden">Delivery Speed</td>
                        <td class="lang-zh"><span class="cross-icon">✗</span> 以“年”为单位</td>
                        <td class="lang-en hidden">Measured in Years</td>
                        <td class="lang-zh"><span class="check-icon">✓</span> 以“秒”为单位 (即时加载)</td>
                        <td class="lang-en hidden">Measured in Seconds</td>
                    </tr>
                    <tr>
                        <td class="lang-zh">安全性</td>
                        <td class="lang-en hidden">Safety</td>
                        <td class="lang-zh"><span class="cross-icon">✗</span> 高风险 (Panic 隐患)</td>
                        <td class="lang-en hidden">High Risk (Panic potential)</td>
                        <td class="lang-zh"><span class="check-icon">✓</span> 极高 (验证器强校验)</td>
                        <td class="lang-en hidden">Extreme (Strict Verification)</td>
                    </tr>
                    <tr>
                        <td class="lang-zh">系统重启</td>
                        <td class="lang-en hidden">Reboot Required</td>
                        <td class="lang-zh"><span class="cross-icon">✗</span> 通常需要重启内核</td>
                        <td class="lang-en hidden">Often Required</td>
                        <td class="lang-zh"><span class="check-icon">✓</span> 无需重启，热插拔</td>
                        <td class="lang-en hidden">None, Hot-swappable</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="analogy-grid" style="margin-top: 80px;">
            <div class="card analogy-item">
                <div class="analogy-icon">
                    <svg viewBox="0 0 100 80" height="100%" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10 60H90V70H10V60Z" fill="#333"/>
                        <path d="M20 60V40C20 30 30 20 50 20C70 20 80 30 80 40V60" stroke="#1D2729" stroke-width="4"/>
                        <circle cx="30" cy="60" r="10" fill="#049FD9"/>
                        <circle cx="70" cy="60" r="10" fill="#049FD9"/>
                        <path d="M80 10L95 25" stroke="#6CC24A" stroke-width="4" stroke-linecap="round"/>
                        <path d="M95 10L80 25" stroke="#6CC24A" stroke-width="4" stroke-linecap="round"/>
                    </svg>
                </div>
                <h3 class="lang-zh">无需停车的引擎升级</h3>
                <h3 class="lang-en hidden">Engine Upgrade while Driving</h3>
                <p class="lang-zh" style="margin-top:10px; color:#666;">
                    传统的内核修改像是在做复杂的开胸手术，风险极高且需要停机。eBPF 就像给正在高速公路上行驶的汽车升级引擎，安全、即时、无感。
                </p>
                <p class="lang-en hidden" style="margin-top:10px; color:#666;">
                    Traditional kernel changes are like risky open-heart surgery requiring downtime. eBPF is like upgrading a car's engine while driving on the highway—safe, instant, and seamless.
                </p>
            </div>

            <div class="card analogy-item">
                <div class="analogy-icon">
                    <svg viewBox="0 0 100 80" height="100%" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect x="20" y="20" width="60" height="40" rx="4" stroke="#1D2729" stroke-width="2"/>
                        <circle cx="50" cy="40" r="15" stroke="#049FD9" stroke-width="4"/>
                        <circle cx="50" cy="40" r="5" fill="#049FD9"/>
                        <path d="M10 40H20M80 40H90" stroke="#E2231A" stroke-width="2"/>
                    </svg>
                </div>
                <h3 class="lang-zh">系统的 X 光机</h3>
                <h3 class="lang-en hidden">X-Ray for the System</h3>
                <p class="lang-zh" style="margin-top:10px; color:#666;">
                    eBPF 可以在系统关键节点安插“智能探头”。它能看到每一个数据包、每一个文件读写，让黑客行为无处遁形，且不影响系统运行。
                </p>
                <p class="lang-en hidden" style="margin-top:10px; color:#666;">
                    eBPF places "smart probes" at key system points. It sees every packet and file access, leaving no place for hackers to hide, without slowing down the system.
                </p>
            </div>

            <div class="card analogy-item">
                <div class="analogy-icon">
                    <svg viewBox="0 0 100 80" height="100%" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect x="30" y="10" width="40" height="60" rx="5" stroke="#1D2729" stroke-width="2"/>
                        <path d="M35 25H65" stroke="#ccc" stroke-width="2"/>
                        <path d="M35 35H65" stroke="#ccc" stroke-width="2"/>
                        <path d="M35 45H55" stroke="#ccc" stroke-width="2"/>
                        <rect x="20" y="50" width="60" height="20" rx="5" fill="#049FD9" fill-opacity="0.2" stroke="#049FD9" stroke-width="2"/>
                        <text x="50" y="65" text-anchor="middle" font-size="8" fill="#049FD9">SANDBOX</text>
                    </svg>
                </div>
                <h3 class="lang-zh">安全的沙箱运行</h3>
                <h3 class="lang-en hidden">Safe Sandbox Execution</h3>
                <p class="lang-zh" style="margin-top:10px; color:#666;">
                    eBPF 代码在内核中运行前必须通过严格的“安检”（Verifier）。任何可能导致死循环或系统崩溃的代码都会被拒绝执行。
                </p>
                <p class="lang-en hidden" style="margin-top:10px; color:#666;">
                    eBPF code must pass a strict "security check" (Verifier) before running. Any code that could crash the system or loop forever is rejected instantly.
                </p>
            </div>
        </div>
    </section>

    <!-- Terminology Section -->
    <section style="background: #fdfdfd; border-top: 1px solid #eee;">
        <div class="container">
            <span class="golden-badge lang-zh">术语百科 / KNOWLEDGE BASE</span>
            <span class="golden-badge lang-en hidden">THE DICTIONARY</span>
            <h2 class="section-title lang-zh">eBPF 核心术语百科</h2>
            <h2 class="section-title lang-en hidden">The eBPF Dictionary</h2>

            <div class="term-group">
                <h3 class="term-group-title lang-zh">1. 内核虚拟化与执行基石</h3>
                <h3 class="term-group-title lang-en hidden">1. Kernel Runtime Foundation</h3>
                <div class="term-grid">
                    <div class="term-card">
                        <h4 class="lang-zh">JIT (Just-In-Time)</h4>
                        <h4 class="lang-en hidden">JIT Compilation</h4>
                        <p class="lang-zh">即时编译器。它是 eBPF 性能的加速器，将中间字节码在加载时瞬间转化为 CPU 原生指令，让 eBPF 的执行效率与静态编译的内核代码几乎没有差别。</p>
                        <p class="lang-en hidden">Converts eBPF bytecode to native CPU instructions at load time, achieving near-native execution speed.</p>
                    </div>
                    <div class="term-card">
                        <h4 class="lang-zh">CO-RE (Compile Once – Run Everywhere)</h4>
                        <h4 class="lang-en hidden">CO-RE</h4>
                        <p class="lang-zh">eBPF 的“工业化”关键。通过 BTF记录内核类型信息，允许程序在不同的 Linux 内核版本之间无缝迁移，解决了“一个版本编译一次”的痛点。</p>
                        <p class="lang-en hidden">Enables portability across different kernel versions by mapping type info via BTF at load time.</p>
                    </div>
                    <div class="term-card">
                        <h4 class="lang-zh">BTF (BPF Type Format)</h4>
                        <h4 class="lang-en hidden">BTF</h4>
                        <p class="lang-zh">一种元数据格式，记录了内核数据结构的完整定义。它是 eBPF 程序能够理解内核“内部对话”的翻译手册，也是实现 CO-RE 的基础。</p>
                        <p class="lang-en hidden">Compact metadata format for kernel types, providing debug info for BPF programs and CO-RE.</p>
                    </div>
                </div>
            </div>

            <div class="term-group">
                <h3 class="term-group-title lang-zh">2. 核心架构交互组件</h3>
                <h3 class="term-group-title lang-en hidden">2. Architecture Components</h3>
                <div class="term-grid">
                    <div class="term-card">
                        <h4 class="lang-zh">Verifier (验证器)</h4>
                        <h4 class="lang-en hidden">Verifier</h4>
                        <p class="lang-zh">eBPF 的“安全闸门”。它通过模拟执行来分析代码的状态机，确保程序没有死循环、不访问越界内存、不破坏内核完整性，是 eBPF 安全性的终极保障。</p>
                        <p class="lang-en hidden">Static analyzer that simulates program execution to guarantee safety, blocking infinite loops and illegal memory access.</p>
                    </div>
                    <div class="term-card">
                        <h4 class="lang-zh">BPF Maps (共享内存)</h4>
                        <h4 class="lang-en hidden">BPF Maps</h4>
                        <p class="lang-zh">内核与用户态之间的“高速公路”。eBPF 程序通过这种键值对存储方式，将捕获的数据传递给用户态分析工具，或接收用户态下发的配置指令。</p>
                        <p class="lang-en hidden">Highly efficient shared memory (key-value) between kernel and userspace for data persistence and communication.</p>
                    </div>
                    <div class="term-card">
                        <h4 class="lang-zh">Helper Functions</h4>
                        <h4 class="lang-en hidden">Helper Functions</h4>
                        <p class="lang-zh">内核为 eBPF 程序开放的安全接口。由于程序不能直接调用内核私有函数，Helper 提供了获取时间、读写 Map、生成日志等受控的受限能力。</p>
                        <p class="lang-en hidden">Standardized, stable kernel APIs for eBPF programs to interact with the kernel safely.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Evolution Timeline -->
    <section>
        <div class="container">
            <span class="golden-badge lang-zh">发展简史 / EVOLUTION</span>
            <span class="golden-badge lang-en hidden">HISTORY</span>
            <h2 class="section-title lang-zh">技术演进：从过滤器到超级内核</h2>
            <h2 class="section-title lang-en hidden">Evolution: From Filter to Super Kernel</h2>

            <div class="evolution-timeline">
                <div class="timeline-item">
                    <div class="timeline-point"></div>
                    <div class="timeline-year">1992</div>
                    <div class="timeline-content">
                        <h5 class="lang-zh">cBPF：伯克利包过滤器的诞生</h5>
                        <h5 class="lang-en hidden">Birth of cBPF</h5>
                        <p class="lang-zh">最初的设计是为了提升网络包过滤效率。当时它只是一个简单的 2 寄存器虚拟机，作为 `tcpdump` 的心脏存在。</p>
                        <p class="lang-en hidden">Simple 2-register VM for efficient packet filtering in tools like tcpdump.</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-point"></div>
                    <div class="timeline-year">2014</div>
                    <div class="timeline-content">
                        <h5 class="lang-zh">eBPF：进入通用编程时代</h5>
                        <h5 class="lang-en hidden">eBPF: The Universal Engine</h5>
                        <p class="lang-zh">内核开发者 Alexei Starovoitov 扩展了指令集（10 个寄存器）。Linux 3.15 首次集成，eBPF 从网络扩展到了系统监控、安全和跟踪。</p>
                        <p class="lang-en hidden">Extended ISA (10 registers) added. Linux 3.15 enabled generic kernel instrumentation beyond networking.</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-point"></div>
                    <div class="timeline-year">2018</div>
                    <div class="timeline-content">
                        <h5 class="lang-zh">CO-RE：实现跨版本交付</h5>
                        <h5 class="lang-en hidden">CO-RE: Compile Once</h5>
                        <p class="lang-zh">BTF 元数据机制成熟，解决了 eBPF 在不同 Linux 发行版之间的兼容性噩梦，这标志着 eBPF 真正具备了大规模商业交付的能力。</p>
                        <p class="lang-en hidden">BTF and CO-RE matured, allowing a single binary to run across multiple kernel versions safely.</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-point"></div>
                    <div class="timeline-year">NOW</div>
                    <div class="timeline-content">
                        <h5 class="lang-zh">可编程内核标准</h5>
                        <h5 class="lang-en hidden">The Standard Interface</h5>
                        <p class="lang-zh">eBPF 正在成为云原生操作系统的“事实标准”。Microsoft 甚至推出了 eBPF for Windows，证明了这种可编程内核范式的普适性。</p>
                        <p class="lang-en hidden">eBPF is now the de-facto standard for cloud-native infrastructure, even expanding to Windows.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Deep Dive Section -->
    <section class="process-section">
        <div class="container">
            <span class="golden-badge lang-zh">运行机制 / INNER WORKINGS</span>
            <span class="golden-badge lang-en hidden">MECHANISM</span>
            <h2 class="section-title lang-zh">深度解析：eBPF 运行流程</h2>
            <h2 class="section-title lang-en hidden">Deep Dive: How eBPF Works</h2>
            
            <p class="lang-zh" style="text-align: center; max-width: 800px; margin: 0 auto 30px;">eBPF 允许在不更改内核代码的情况下，在内核事件触发时运行自定义程序。以下是其核心链路图示：</p>
            <p class="lang-en hidden" style="text-align: center; max-width: 800px; margin: 0 auto 30px;">eBPF allows running custom programs upon kernel events without changing source code. Here is the core workflow:</p>

            <!-- 技术原理图 -->
            <div class="diagram-container">
                <svg class="arch-svg" width="600" height="300" viewBox="0 0 600 300">
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="var(--cisco-blue)" />
                        </marker>
                    </defs>
                    <!-- User Space -->
                    <rect x="50" y="20" width="500" height="80" rx="10" fill="#f8f9fa" stroke="#ddd" stroke-width="1"/>
                    <text x="300" y="50" text-anchor="middle" font-weight="bold" fill="#666" font-size="14" class="lang-zh">User Space (用户空间)</text>
                    <text x="300" y="50" text-anchor="middle" font-weight="bold" fill="#666" font-size="14" class="lang-en hidden">User Space</text>
                    
                    <rect x="100" y="60" width="120" height="30" rx="5" fill="#fff" stroke="var(--cisco-midnight)" stroke-width="1.5"/>
                    <text x="160" y="80" text-anchor="middle" font-size="11" fill="var(--cisco-midnight)">eBPF Program</text>
                    
                    <rect x="380" y="60" width="120" height="30" rx="5" fill="#fff" stroke="var(--cisco-midnight)" stroke-width="1.5"/>
                    <text x="440" y="80" text-anchor="middle" font-size="11" fill="var(--cisco-midnight)">Loader (bpftool)</text>

                    <!-- Arrow -->
                    <path d="M300 100 L300 130" stroke="var(--cisco-blue)" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>

                    <!-- Kernel Space -->
                    <rect x="50" y="140" width="500" height="140" rx="10" fill="rgba(4, 159, 217, 0.05)" stroke="var(--cisco-blue)" stroke-width="2"/>
                    <text x="300" y="165" text-anchor="middle" font-weight="bold" fill="var(--cisco-midnight)" font-size="14" class="lang-zh">Kernel Space (内核空间)</text>
                    <text x="300" y="165" text-anchor="middle" font-weight="bold" fill="var(--cisco-midnight)" font-size="14" class="lang-en hidden">Kernel Space</text>
                    
                    <!-- Internal Blocks -->
                    <rect x="70" y="180" width="100" height="80" rx="5" fill="#fff" stroke="var(--cisco-blue)" stroke-width="1"/>
                    <text x="120" y="210" text-anchor="middle" font-size="11" font-weight="bold" fill="var(--cisco-midnight)">Verifier</text>
                    <text x="120" y="230" text-anchor="middle" font-size="10" fill="#666" class="lang-zh">(验证器)</text>
                    <text x="120" y="230" text-anchor="middle" font-size="10" fill="#666" class="lang-en hidden">(Verifier)</text>

                    <rect x="200" y="180" width="100" height="80" rx="5" fill="#fff" stroke="var(--cisco-blue)" stroke-width="1"/>
                    <text x="250" y="210" text-anchor="middle" font-size="11" font-weight="bold" fill="var(--cisco-midnight)">JIT Compiler</text>
                    <text x="250" y="230" text-anchor="middle" font-size="10" fill="#666" class="lang-zh">(即时编译)</text>
                    <text x="250" y="230" text-anchor="middle" font-size="10" fill="#666" class="lang-en hidden">(JIT)</text>

                    <rect x="330" y="180" width="100" height="80" rx="5" fill="#fff" stroke="var(--cisco-blue)" stroke-width="1"/>
                    <text x="380" y="210" text-anchor="middle" font-size="11" font-weight="bold" fill="var(--cisco-midnight)">Maps</text>
                    <text x="380" y="230" text-anchor="middle" font-size="10" fill="#666" class="lang-zh">(数据共享)</text>
                    <text x="380" y="230" text-anchor="middle" font-size="10" fill="#666" class="lang-en hidden">(Data Sharing)</text>

                    <rect x="460" y="180" width="70" height="80" rx="5" fill="#fff" stroke="var(--cisco-blue)" stroke-width="1"/>
                    <text x="495" y="210" text-anchor="middle" font-size="11" font-weight="bold" fill="var(--cisco-midnight)">Hooks</text>
                    <text x="495" y="230" text-anchor="middle" font-size="10" fill="#666" class="lang-zh">(挂钩点)</text>
                    <text x="495" y="230" text-anchor="middle" font-size="10" fill="#666" class="lang-en hidden">(Hook Points)</text>
                </svg>
            </div>

            <div class="process-steps">
                <div class="step-card">
                    <div class="step-number">1</div>
                    <h4 class="lang-zh">编译与抽象</h4>
                    <h4 class="lang-en hidden">Compile & Abstract</h4>
                    <p class="lang-zh">开发者编写 C 代码，通过 LLVM/Clang 编译成特殊的 **eBPF 字节码**。这种中间格式独立于硬件架构，是代码安全的第一道抽象。</p>
                    <p class="lang-en hidden">Code is compiled via LLVM/Clang into architecture-independent eBPF bytecode.</p>
                    <div class="step-arrow">➜</div>
                </div>
                
                <div class="step-card" style="border-top-color: var(--cisco-orange);">
                    <div class="step-number" style="background: var(--cisco-orange);">2</div>
                    <h4 class="lang-zh">全路径验证 (Verifier)</h4>
                    <h4 class="lang-en hidden">Full-Path Validation</h4>
                    <p class="lang-zh">加载器将字节码注入内核。**验证器**会分析每一条可能的执行路径。如果发现死循环、非法指针或过深的嵌套调用，加载将立即被阻断。</p>
                    <p class="lang-en hidden">The Verifier simulates all execution paths to prevent crashes, infinite loops, or illegal memory access.</p>
                    <div class="step-arrow">➜</div>
                </div>

                <div class="step-card">
                    <div class="step-number">3</div>
                    <h4 class="lang-zh">硬件加速 (JIT)</h4>
                    <h4 class="lang-en hidden">Hardware Speed (JIT)</h4>
                    <p class="lang-zh">一旦通过验证，**JIT 编译器**会将字节码翻译成当前 CPU（x86/ARM）的机器码。这让 eBPF 以原生速度处理每秒数千万次的事件。</p>
                    <p class="lang-en hidden">JIT translates bytecode to local machine code (x86/ARM) for native-level execution speed.</p>
                    <div class="step-arrow">➜</div>
                </div>

                <div class="step-card" style="border-top-color: var(--cisco-green);">
                    <div class="step-number" style="background: var(--cisco-green);">4</div>
                    <h4 class="lang-zh">钩子响应 (Hooking)</h4>
                    <h4 class="lang-en hidden">Event Response</h4>
                    <p class="lang-zh">程序正式“挂载”到指定的内核钩子点。每当特定事件发生时，eBPF 程序会瞬间在内核上下文中执行，并通过 Maps 回传关键结果。</p>
                    <p class="lang-en hidden">Program attaches to hooks and executes within the kernel context, communicating results back via BPF Maps.</p>
                </div>
            </div>

            <!-- 核心组件细节 -->
            <div class="detail-grid">
                <div class="card" style="border-top-color: var(--cisco-blue);">
                    <h3 class="lang-zh">辅助函数 (Helper Functions)</h3>
                    <h3 class="lang-en hidden">Helper Functions</h3>
                    <p class="lang-zh" style="font-size: 0.95rem; margin-top: 10px;">
                        eBPF 程序不允许直接调用任意内核函数以防破坏稳定性。内核提供了一组受控的 <strong>Helper API</strong>，作为安全的“工具箱”。
                    </p>
                    <p class="lang-en hidden" style="font-size: 0.95rem; margin-top: 10px;">
                        eBPF programs cannot call arbitrary kernel functions. The kernel provides restricted <strong>Helper APIs</strong> as a safe "toolbox".
                    </p>
                    <ul class="hook-list">
                        <li class="hook-item">
                            <span class="hook-label">Data</span>
                            <span class="hook-desc lang-zh">`bpf_probe_read()` 安全读取内存；`bpf_get_current_pid()` 获取进程 ID。</span>
                            <span class="hook-desc lang-en hidden">`bpf_probe_read()` for safe memory access; `bpf_get_current_pid()` for process info.</span>
                        </li>
                        <li class="hook-item">
                            <span class="hook-label">Network</span>
                            <span class="hook-desc lang-zh">`bpf_skb_load_bytes()` 解析包数据；`bpf_redirect()` 极速转发。</span>
                            <span class="hook-desc lang-en hidden">`bpf_skb_load_bytes()` for packet parsing; `bpf_redirect()` for fast forwarding.</span>
                        </li>
                    </ul>
                </div>

                <div class="card" style="border-top-color: var(--cisco-midnight);">
                    <h3 class="lang-zh">尾调用 (Tail Calls)</h3>
                    <h3 class="lang-en hidden">Tail Calls</h3>
                    <p class="lang-zh" style="font-size: 0.95rem; margin-top: 10px;">
                        为了突破 4096 条指令的单一程序限制，尾调用允许 eBPF 程序像 <strong>“接力赛”</strong> 一样跳转到另一个程序运行。
                    </p>
                    <p class="lang-en hidden" style="font-size: 0.95rem; margin-top: 10px;">
                        To bypass the 4096-instruction limit, tail calls allow eBPF programs to jump to another like a <strong>"relay race"</strong>.
                    </p>
                    <div class="insight-card" style="margin: 15px 0 0; font-size: 0.85rem;">
                        <span class="lang-zh">优势：逻辑解耦、不增加栈深度、支持构建复杂的规则链条（如 Cilium 的多阶管道）。</span>
                        <span class="lang-en hidden">Pros: Modularity, zero stack overhead, enables complex logic chains (e.g., Cilium pipelines).</span>
                    </div>
                </div>
            </div>

            <div class="card" style="margin-top: 30px; border-top-color: var(--cisco-green);">
                <h3 class="lang-zh">挂钩点全景观 (Hook Points)</h3>
                <h3 class="lang-en hidden">Hook Points Overview</h3>
                <p class="lang-zh" style="margin-bottom: 20px;">eBPF 的强大源于其全方位的“监听站”布局，覆盖了系统的每一个核心路径：</p>
                <p class="lang-en hidden" style="margin-bottom: 20px;">eBPF's power comes from its ubiquitous "listening posts" across every core system path:</p>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                    <ul class="hook-list">
                        <li class="hook-item">
                            <span class="hook-label">XDP</span>
                            <span class="hook-desc lang-zh"><strong>最早钩子：</strong>在网卡驱动层拦截包。用于 DDoS 防护和线速负载均衡。</span>
                            <span class="hook-desc lang-en hidden"><strong>Earliest:</strong> NIC driver level. Used for DDoS defense and line-rate LB.</span>
                        </li>
                        <li class="hook-item">
                            <span class="hook-label">TC</span>
                            <span class="hook-desc lang-zh"><strong>流控层：</strong>在包整形和调度阶段介入，支持分类与限速 QoS。</span>
                            <span class="hook-desc lang-en hidden"><strong>Traffic Control:</strong> Ingress/Egress shaping and QoS marking.</span>
                        </li>
                        <li class="hook-item">
                            <span class="hook-label">LSM</span>
                            <span class="hook-desc lang-zh"><strong>安全模块：</strong>扩展内核安全框架，实现零信任运行时的权限拦截。</span>
                            <span class="hook-desc lang-en hidden"><strong>Security:</strong> Extends kernel security modules for zero-trust enforcement.</span>
                        </li>
                    </ul>
                    <ul class="hook-list">
                        <li class="hook-item">
                            <span class="hook-label">Kprobes</span>
                            <span class="hook-desc lang-zh"><strong>内核探针：</strong>动态钩住任意内核函数，深入诊断调度或 IO 瓶颈。</span>
                            <span class="hook-desc lang-en hidden"><strong>Dynamic Kernel:</strong> Probes any kernel function for bottleneck diagnosis.</span>
                        </li>
                        <li class="hook-item">
                            <span class="hook-label">Uprobes</span>
                            <span class="hook-desc lang-zh"><strong>用户探针：</strong>钩住应用程序（如 libc）函数，实现无侵入追踪。</span>
                            <span class="hook-desc lang-en hidden"><strong>Userspace:</strong> Traces app functions (e.g., libc) without code modification.</span>
                        </li>
                        <li class="hook-item">
                            <span class="hook-label">Tracepts</span>
                            <span class="hook-desc lang-zh"><strong>静态追踪：</strong>内核内置的稳定追踪点，开销极低且版本兼容性好。</span>
                            <span class="hook-desc lang-en hidden"><strong>Tracepoints:</strong> Static, stable kernel events with minimal overhead.</span>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="insight-card">
                <span class="lang-zh"><strong>架构深度：</strong> eBPF 是 Linux 内核的“乐高化”。它将原本封闭、需要数年开发周期的内核功能，通过 Verifier 转换成了可以像乐高积木一样按需动态挂载的安全插件。</span>
                <span class="lang-en hidden"><strong>Architecture View:</strong> eBPF transforms the monolithic kernel into a "Lego-like" modular system, where features can be dynamically and safely plugged in.</span>
            </div>
        </div>
    </section>

    <!-- Code Examples Section -->
    <section style="background: #fdfdfd;">
        <div class="container">
            <span class="golden-badge lang-zh">代码实操 / POLYGLOT EBPF</span>
            <span class="golden-badge lang-en hidden">CODE EXAMPLES</span>
            <h2 class="section-title lang-zh">多语言开发实战</h2>
            <h2 class="section-title lang-en hidden">eBPF in Action: Polyglot Snippets</h2>
            
            <div class="code-tabs">
                <div class="tabs-header">
                    <button class="tab-btn active" onclick="switchTab('c-kernel')">C (Kernel)</button>
                    <button class="tab-btn" onclick="switchTab('python-bcc')">Python (BCC)</button>
                    <button class="tab-btn" onclick="switchTab('go-libbpf')">Go (libbpf-go)</button>
                </div>
                <div id="c-kernel" class="code-content">
<span class="code-comment">// 内核态代码：拦截 Ping 数据包</span>
<span class="code-keyword">#include</span> &lt;linux/bpf.h&gt;
<span class="code-keyword">#include</span> &lt;bpf/bpf_helpers.h&gt;

SEC(<span class="code-string">"kprobe/icmp_rcv"</span>)
<span class="code-keyword">int</span> <span class="code-keyword">bpf_prog</span>(<span class="code-keyword">void</span> *ctx) {
    <span class="code-keyword">char</span> msg[] = <span class="code-string">"Hello World, I got your ping packet.\n"</span>;
    <span class="code-func">bpf_trace_printk</span>(msg, <span class="code-keyword">sizeof</span>(msg));
    <span class="code-keyword">return</span> 0;
}
                </div>
                <div id="python-bcc" class="code-content hidden">
<span class="code-comment"># 用户态代码：使用 BCC 快速开发</span>
<span class="code-keyword">from</span> bcc <span class="code-keyword">import</span> BPF

<span class="code-comment"># 定义内嵌 C 代码</span>
program = <span class="code-string">"""
int hello(void *ctx) {
    bpf_trace_printk("Hello World, I got your ping packet.\\n");
    return 0;
}
"""</span>

b = BPF(text=program)
b.attach_kprobe(event=<span class="code-string">"icmp_rcv"</span>, fn_name=<span class="code-string">"hello"</span>)
b.trace_print()
                </div>
                <div id="go-libbpf" class="code-content hidden">
<span class="code-comment">// 用户态代码：使用 Go 处理内核数据</span>
<span class="code-keyword">import</span> <span class="code-string">"github.com/aquasecurity/libbpfgo"</span>

<span class="code-keyword">func</span> main() {
    bpfModule, _ := libbpfgo.NewModuleFromFile(<span class="code-string">"main.bpf.o"</span>)
    <span class="code-keyword">defer</span> bpfModule.Close()
    
    prog, _ := bpfModule.GetProgram(<span class="code-string">"bpf_prog"</span>)
    _, _ = prog.AttachKprobe(<span class="code-string">"icmp_rcv"</span>)
}
                </div>
            </div>
        </div>
    </section>

    <!-- Why it matters: Three Pillars -->
    <section class="features">
        <div class="container">
            <span class="golden-badge lang-zh">核心价值 / VALUE PROPOSITION</span>
            <span class="golden-badge lang-en hidden">THREE PILLARS</span>
            <h2 class="section-title lang-zh" style="margin-top:0;">为什么这很重要？三大应用支柱</h2>
            <h2 class="section-title lang-en hidden" style="margin-top:0;">The Three Pillars of eBPF</h2>
            
            <div class="pillars-grid">
                <!-- Security Pillar -->
                <div class="feature-card" style="border-top-color: var(--cisco-red);">
                    <div class="feature-icon-box" style="background: rgba(226, 35, 26, 0.1);">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="var(--cisco-red)" stroke-width="2">
                            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                            <path d="M12 8v4M12 16h.01" stroke-linecap="round"/>
                        </svg>
                    </div>
                    <h3 class="lang-zh">下一代安全架构</h3>
                    <h3 class="lang-en hidden">Next-Gen Security</h3>
                    <p class="lang-zh"><strong>核心痛点：</strong> 传统安全软件位于用户态，黑客一旦进入内核便完全失效。<br><br><strong>eBPF 解法：</strong> 直接在内核入口处进行监控。它不仅能感知进程在做什么，更能即时拦截恶意文件打开、非法容器逃逸或可疑网络外联。</p>
                    <p class="lang-en hidden"><strong>Pain Point:</strong> User-space security fails once kernel is compromised.<br><br><strong>eBPF Solution:</strong> Direct monitoring at kernel entry points. It senses activity and intercepts malicious file access or container escape instantly.</p>
                </div>

                <!-- Observability Pillar -->
                <div class="feature-card" style="border-top-color: var(--cisco-blue);">
                    <div class="feature-icon-box" style="background: rgba(4, 159, 217, 0.1);">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="var(--cisco-blue)" stroke-width="2">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                            <circle cx="12" cy="12" r="3"/>
                            <path d="M12 5V3M12 21v-2M5 12H3M21 12h-2" stroke-linecap="round"/>
                        </svg>
                    </div>
                    <h3 class="lang-zh">极致可观测性</h3>
                    <h3 class="lang-en hidden">Extreme Observability</h3>
                    <p class="lang-zh"><strong>核心痛点：</strong> 业务排障通常需要插入代码日志，这会带来性能损耗，且无法观测内核层抖动。<br><br><strong>eBPF 解法：</strong> 无需修改应用代码，透视整个软件栈。它能生成高精度的火焰图，捕获被加密之前的原始请求数据包。</p>
                    <p class="lang-en hidden"><strong>Pain Point:</strong> Logging adds overhead and misses kernel-level jitter.<br><br><strong>eBPF Solution:</strong> Zero-code instrumentation to peek into the whole stack. Generates high-fidelity flame graphs and captures unencrypted raw packets.</p>
                </div>

                <!-- Networking Pillar -->
                <div class="feature-card" style="border-top-color: var(--cisco-green);">
                    <div class="feature-icon-box" style="background: rgba(108, 194, 74, 0.1);">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="var(--cisco-green)" stroke-width="2">
                            <rect x="2" y="2" width="20" height="8" rx="2" ry="2"></rect>
                            <rect x="2" y="14" width="20" height="8" rx="2" ry="2"></rect>
                            <path d="M6 6h.01M6 18h.01" stroke-linecap="round"/>
                        </svg>
                    </div>
                    <h3 class="lang-zh">云原生网络加速</h3>
                    <h3 class="lang-en hidden">Networking Acceleration</h3>
                    <p class="lang-zh"><strong>核心痛点：</strong> Kubernetes 依赖的 `iptables` 会随着节点增加而变得极其臃肿，导致转发延迟。<br><br><strong>eBPF 解法：</strong> 通过 XDP，数据包在到达协议栈之前就被转发。它绕过复杂的协议栈路径，实现近乎线速的负载均衡。</p>
                    <p class="lang-en hidden"><strong>Pain Point:</strong> Bloated `iptables` in large K8s clusters cause latency.<br><br><strong>eBPF Solution:</strong> Using XDP to process packets before the protocol stack. Bypassing complex paths for near line-rate load balancing.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Interactive Demo Section -->
    <section class="demo-section container" id="demo">
        <span class="golden-badge lang-zh">实验演示 / SIMULATION</span>
        <span class="golden-badge lang-en hidden">KERNEL TERMINAL</span>
        <h2 class="section-title lang-zh">内核终端：深度交互模拟</h2>
        <h2 class="section-title lang-en hidden">Terminal: eBPF Interactive Demo</h2>
        
        <div class="control-panel" style="max-width: 900px;">
            <p class="lang-zh" style="margin-bottom: 25px; color: #444; font-size: 1.05rem;">点击下方的实验场景，亲历 eBPF 如何在毫秒间改变系统的运行规则。</p>
            <p class="lang-en hidden" style="margin-bottom: 25px; color: #444; font-size: 1.05rem;">Select a scenario to witness how eBPF changes system rules in milliseconds.</p>
            
            <div class="terminal-wrapper" id="kernel-terminal">
                <div class="terminal-line"><span class="terminal-prompt">root@linux-kernel:~#</span> <span class="terminal-cursor"></span></div>
            </div>

            <div class="controls">
                <button class="btn btn-primary" onclick="runPingSimulation()" id="ping-btn">
                    <span class="lang-zh">网络监控 (Ping)</span>
                    <span class="lang-en hidden">Network Monitor (Ping)</span>
                </button>
                <button class="btn btn-primary" onclick="runSecuritySimulation()" id="sec-btn" style="background-color: var(--cisco-red);">
                    <span class="lang-zh">安全拦截 (Tetragon)</span>
                    <span class="lang-en hidden">Security Intercept (Tetragon)</span>
                </button>
                <button class="btn btn-primary" onclick="runProfilingSimulation()" id="prof-btn" style="background-color: var(--cisco-orange);">
                    <span class="lang-zh">调度追踪 (Sched Trace)</span>
                    <span class="lang-en hidden">Sched Profiling</span>
                </button>
                <button class="btn" onclick="resetTerminal()" style="background: #666; color: white;">
                    <span class="lang-zh">重置终端</span>
                    <span class="lang-en hidden">Reset Terminal</span>
                </button>
            </div>
        </div>

        <div class="pipeline-container" style="margin-top: 50px;">
            <div class="kernel-zone">VIRTUAL KERNEL RUNTIME VIEW</div>
            <div id="packet-track" style="position: absolute; width: 100%; height: 100%; top:0; left:0;"></div>
            <div class="ebpf-program">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-bottom:5px;">
                    <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                </svg>
                <span class="lang-zh" style="font-weight: 800;">eBPF Logic</span>
                <span class="lang-en hidden">eBPF Logic</span>
            </div>
        </div>
    </section>

    <!-- Ecosystem Section -->
    <section style="background: var(--cisco-midnight); color: white;">
        <div class="container">
            <span class="golden-badge lang-zh">明星项目 / ECOSYSTEM</span>
            <span class="golden-badge lang-en hidden">INDUSTRY LEADERS</span>
            <h2 class="section-title lang-zh" style="color:white;">eBPF 明星项目全景观</h2>
            <h2 class="section-title lang-en hidden" style="color:white;">The eBPF Ecosystem</h2>
            
            <div class="feature-grid-eco">
                <div class="feature-card">
                    <h4 style="color:var(--cisco-blue); margin-bottom:15px; font-size: 1.3rem;">Cilium</h4>
                    <p style="font-size:0.95rem; opacity:0.9;"><strong>定义：</strong> 云原生网络的事实标准。<br><strong>核心竞争力：</strong> 基于 eBPF 的高性能网络。它不仅实现了极速负载均衡，更能深入 L7 协议进行细粒度的安全控制。</p>
                </div>
                <div class="feature-card">
                    <h4 style="color:var(--cisco-red); margin-bottom:15px; font-size: 1.3rem;">Tetragon</h4>
                    <p style="font-size:0.95rem; opacity:0.9;"><strong>定义：</strong> 实时内核检测与拦截引擎。<br><strong>核心竞争力：</strong> 它的强大在于“Enforcement”。在黑客触发敏感系统调用的瞬间，直接从内核层切断进程。</p>
                </div>
                <div class="feature-card">
                    <h4 style="color:var(--cisco-green); margin-bottom:15px; font-size: 1.3rem;">BPFtrace</h4>
                    <p style="font-size:0.95rem; opacity:0.9;"><strong>定义：</strong> 内核版 AWK。<br><strong>核心竞争力：</strong> 脚本化探针编写。可以在 10 秒钟内编写一个监控磁盘延迟或函数执行次数的探针，无需复杂编译。</p>
                </div>
                <div class="feature-card">
                    <h4 style="color:#56CCF2; margin-bottom:15px; font-size: 1.3rem;">SkyWalking</h4>
                    <p style="font-size:0.95rem; opacity:0.9;"><strong>定义：</strong> 应用性能管理 (APM) 领航者。<br><strong>核心竞争力：</strong> 无侵入跨服务追踪。即使没有嵌入 SDK，也能通过内核探针自动绘制出复杂的调用拓扑图。</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Isovalent Section -->
    <section style="background: #ffffff;">
        <div class="container">
            <span class="golden-badge lang-zh">产业先驱 / LEADERSHIP</span>
            <span class="golden-badge lang-en hidden">ISOVALENT & CISCO</span>
            <h2 class="section-title lang-zh">Isovalent 与 Cisco 的安全愿景</h2>
            <h2 class="section-title lang-en hidden">Isovalent & Cisco's Security Vision</h2>

            <div class="card" style="border-left-width: 8px; border-left-color: var(--cisco-blue); background: #fdfdfd; padding: 50px;">
                <div style="display: flex; align-items: center; gap: 25px; margin-bottom: 35px;">
                    <div style="background: var(--cisco-midnight); padding: 18px; border-radius: 14px;">
                        <svg width="45" height="45" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2">
                            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                        </svg>
                    </div>
                    <div>
                        <h3 class="lang-zh" style="color: var(--cisco-midnight); font-size: 2rem;">Isovalent：eBPF 的灵魂推动者</h3>
                        <h3 class="lang-en hidden" style="color: var(--cisco-midnight); font-size: 2rem;">Isovalent: The Soul of eBPF</h3>
                    </div>
                </div>

                <!-- Isovalent Contributions -->
                <div class="detail-grid" style="margin-bottom: 50px;">
                    <div>
                        <h4 class="lang-zh" style="color: var(--cisco-blue); margin-bottom: 15px; font-size: 1.25rem;">核心贡献：定义标准</h4>
                        <h4 class="lang-en hidden" style="color: var(--cisco-blue); margin-bottom: 15px; font-size: 1.25rem;">Key Contributions</h4>
                        <p class="lang-zh" style="font-size: 1rem; color: #555; margin-bottom: 15px;">Isovalent 是 Cilium 和 Tetragon 项目的初创团队。他们不仅贡献了 eBPF 核心代码，更通过 **eBPF 基金会**（与 Meta、Google 共同创立）推动了技术的标准化。</p>
                        <ul class="hook-list">
                            <li class="hook-item">
                                <span class="hook-label" style="min-width: 110px;">Cilium Leader</span>
                                <span class="hook-desc lang-zh">作为 CNCF 毕业项目，Cilium 已成为 Google、AWS 等主流云提供商的标准数据平面。</span>
                            </li>
                            <li class="hook-item">
                                <span class="hook-label" style="min-width: 110px;">Kernel Upstrm</span>
                                <span class="hook-desc lang-zh">持续贡献 Linux 内核上游代码，推动 eBPF 从简单的过滤扩展到全栈观测。</span>
                            </li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="lang-zh" style="color: var(--cisco-green); margin-bottom: 15px; font-size: 1.25rem;">Cisco 联动：主流化里程碑</h4>
                        <h4 class="lang-en hidden" style="color: var(--cisco-green); margin-bottom: 15px; font-size: 1.25rem;">Cisco Strategic Synergy</h4>
                        <p class="lang-zh" style="font-size: 1rem; color: #555; margin-bottom: 15px;">2023 年，Cisco 完成对 Isovalent 的收购，正式将 eBPF 定位为 **Security Cloud** 的核心基石，开启了多云安全的新纪元。</p>
                        <p class="lang-en hidden" style="font-size: 1rem; color: #555; margin-bottom: 15px;">Cisco's acquisition of Isovalent in 2023 marks eBPF's mainstream adoption, powering the core of Cisco Security Cloud.</p>
                        <div style="background: #fff; border: 1px solid #eee; padding: 15px; border-radius: 8px; font-size: 0.9rem; color: #666;">
                            <strong class="lang-zh">2025 洞察：</strong> 发布了《Kubernetes 网络状态》年度报告，定义了零信任微分段的行业基准。
                        </div>
                    </div>
                </div>

                <!-- Why Isovalent matters -->
                <h3 class="lang-zh" style="color: var(--cisco-midnight); font-size: 1.6rem; margin-bottom: 25px; border-bottom: 2px solid #eee; padding-bottom: 10px;">为什么有了 Isovalent，人们使用 eBPF 更加方便高效？</h3>
                <h3 class="lang-en hidden" style="color: var(--cisco-midnight); font-size: 1.6rem; margin-bottom: 25px; border-bottom: 2px solid #eee; padding-bottom: 10px;">Why Isovalent Makes eBPF Effortless?</h3>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px;">
                    <div class="feature-box" style="padding: 20px; box-shadow: none; border-color: #eee;">
                        <h5 class="lang-zh" style="color: var(--cisco-blue); margin-bottom: 10px;">1. 简化开发与部署</h5>
                        <p class="lang-zh" style="font-size: 0.9rem;"><strong>BPF CO-RE：</strong> 解决了跨内核版本的兼容性难题，实现“一次编译，到处运行”。<br><strong>无 Sidecar 服务网格：</strong> 摒弃侵入式代理，直接在内核层处理网络逻辑，资源开销降低 80% 以上。</p>
                    </div>
                    <div class="feature-box" style="padding: 20px; box-shadow: none; border-color: #eee;">
                        <h5 class="lang-zh" style="color: var(--cisco-green); margin-bottom: 10px;">2. 提升性能与观测</h5>
                        <p class="lang-zh" style="font-size: 0.9rem;"><strong>iptables 替换：</strong> 在 Kubernetes 中以 eBPF 替代传统规则，吞吐量提升显著。<br><strong>端到端洞察：</strong> 提供内核级 metrics 和 traces，非专家也能通过可视化仪表盘掌握系统脉动。</p>
                    </div>
                    <div class="feature-box" style="padding: 20px; box-shadow: none; border-color: #eee;">
                        <h5 class="lang-zh" style="color: var(--cisco-red); margin-bottom: 10px;">3. 增强安全可访问性</h5>
                        <p class="lang-zh" style="font-size: 0.9rem;"><strong>运行时拦截：</strong> Tetragon 将 eBPF 从“监控探针”变成了“执行引擎”。通过企业级平台，用户无需编程即可部署复杂的零信任策略和实时威胁响应。</p>
                    </div>
                </div>

                <div class="insight-card" style="margin-top: 40px; background: rgba(4, 159, 217, 0.03);">
                    <span class="lang-zh"><strong>架构师视角：</strong> Isovalent 的核心贡献在于解决了 eBPF 的“落地难题”。他们开发的 **CO-RE** 实践和庞大的社区生态，让企业级用户能够像使用 SaaS 一样简单地消费内核级的超能力，将 eBPF 从“专家工具”变成了“人人可用”的基础设施标准。</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Future Outlook -->
    <section>
        <div class="container">
            <span class="golden-badge lang-zh">未来展望 / FUTURE</span>
            <span class="golden-badge lang-en hidden">HORIZON / FUTURE</span>
            <h2 class="section-title lang-zh">eBPF 的下一步：智能内核</h2>
            <h2 class="section-title lang-en hidden">Next Step: The Intelligent Kernel</h2>
            
            <div class="analogy-grid">
                <div class="card" style="border-top-color: var(--cisco-green);">
                    <h3 class="lang-zh">AI + eBPF</h3>
                    <h3 class="lang-en hidden">AI + eBPF</h3>
                    <p class="lang-zh" style="margin-top:10px; font-size:0.95rem; color:#666;">
                        利用 eBPF 在内核级收集的高频特征，驱动本地 AI 模型进行实时的异常检测和自动调度。
                    </p>
                </div>
                <div class="card" style="border-top-color: #56CCF2;">
                    <h3 class="lang-zh">跨平台 eBPF</h3>
                    <h3 class="lang-en hidden">Cross-Platform</h3>
                    <p class="lang-zh" style="margin-top:10px; font-size:0.95rem; color:#666;">
                        不仅是 Linux，eBPF 正在向 Windows 和 WebAssembly (Wasm) 演进，构建全平台的可编程能力。
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section class="container" style="background: white; border-top: 1px solid #eee;">
        <h2 class="section-title lang-zh">常见问题解答 (FAQ)</h2>
        <h2 class="section-title lang-en hidden">FAQ</h2>
        
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 30px;">
            <div class="card">
                <h4 class="lang-zh text-cisco-blue">eBPF 会增加系统负担导致变慢吗？</h4>
                <h4 class="lang-en hidden text-cisco-blue">Will eBPF slow down my system?</h4>
                <p class="lang-zh" style="font-size: 0.95rem; color: #555; margin-top:10px;">**答案是否定的。** 现代 eBPF 通过 JIT（即时编译）转化为原生指令。事实上，由于避免了用户态轮询或庞大内核模块的开销，它往往比传统方案更快。</p>
            </div>
            <div class="card">
                <h4 class="lang-zh text-cisco-blue">验证器 (Verifier) 真的能保证系统不崩溃吗？</h4>
                <h4 class="lang-en hidden text-cisco-blue">Does the Verifier prevent crashes?</h4>
                <p class="lang-zh" style="font-size: 0.95rem; color: #555; margin-top:10px;">**是的。** 验证器会强制执行安全准则：代码必须是有限长度的、内存访问受限、指针合法。如果代码不符合“安全指纹”，内核会拒绝加载。</p>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div style="margin-bottom: 30px;">
                <svg viewBox="0 0 64 32" fill="none" xmlns="http://www.w3.org/2000/svg" style="height: 35px; opacity: 0.9;">
                    <path d="M14 24V16" stroke="#fff" stroke-width="3" stroke-linecap="round"/>
                    <path d="M22 24V10" stroke="#fff" stroke-width="3" stroke-linecap="round"/>
                    <path d="M30 24V14" stroke="#fff" stroke-width="3" stroke-linecap="round"/>
                    <path d="M38 24V8" stroke="#fff" stroke-width="3" stroke-linecap="round"/>
                    <path d="M46 24V14" stroke="#fff" stroke-width="3" stroke-linecap="round"/>
                    <path d="M54 24V19" stroke="#fff" stroke-width="3" stroke-linecap="round"/>
                </svg>
            </div>
            <p class="lang-zh" style="font-size: 1.2rem; font-weight: 800; margin-bottom: 12px;">安全架构师技术分享系列</p>
            <p class="lang-en hidden" style="font-size: 1.2rem; font-weight: 800; margin-bottom: 12px;">Security Architect Tech Series</p>
            <p class="lang-zh" style="opacity: 0.6; font-size: 0.9rem;">基于 Cisco Live 架构准则 | 深度研究与转化成果</p>
            <div style="margin-top: 35px; opacity: 0.5;">
                <span style="margin: 0 15px;">CISSP</span> | <span style="margin: 0 15px;">CKA</span> | <span style="margin: 0 15px;">SRE</span>
            </div>
        </div>
    </footer>

    <script>
        function setLang(lang) {
            const zhElements = document.querySelectorAll('.lang-zh');
            const enElements = document.querySelectorAll('.lang-en');
            const btns = document.querySelectorAll('.lang-btn');
            if (lang === 'zh') {
                zhElements.forEach(el => el.classList.remove('hidden'));
                enElements.forEach(el => el.classList.add('hidden'));
                btns[0].classList.add('active');
                btns[1].classList.remove('active');
                document.documentElement.lang = 'zh-CN';
            } else {
                zhElements.forEach(el => el.classList.add('hidden'));
                enElements.forEach(el => el.classList.remove('hidden'));
                btns[0].classList.remove('active');
                btns[1].classList.add('active');
                document.documentElement.lang = 'en';
            }
        }

        function switchTab(tabId) {
            const contents = document.querySelectorAll('.code-content');
            const btns = document.querySelectorAll('.tab-btn');
            contents.forEach(c => c.classList.add('hidden'));
            btns.forEach(b => b.classList.remove('active'));
            document.getElementById(tabId).classList.remove('hidden');
            if(event) event.target.classList.add('active');
        }

        function scrollToDemo() {
            document.getElementById('demo').scrollIntoView({ behavior: 'smooth' });
        }

        function runPingSimulation() {
            const terminal = document.getElementById('kernel-terminal');
            const btns = document.querySelectorAll('.controls .btn');
            btns.forEach(b => b.disabled = true);
            const lines = [
                { text: "root@linux-kernel:~# ping 10.0.0.1", delay: 0 },
                { text: "PING 10.0.0.1 (10.0.0.1) 56(84) bytes of data.", delay: 600 },
                { text: "[  Kernel Log  ] Event: icmp_rcv detected. PID 1042 triggered.", delay: 1200, color: "#fff", bold: true },
                { text: "64 bytes from 10.0.0.1: icmp_seq=1 ttl=64 time=0.032 ms", delay: 1300 },
                { text: "[  Kernel Log  ] Event: icmp_rcv detected. PID 1042 triggered.", delay: 2200, color: "#fff", bold: true },
                { text: "64 bytes from 10.0.0.1: icmp_seq=2 ttl=64 time=0.035 ms", delay: 2300 }
            ];
            animateTerminal(lines, btns);
            sendPacketSimulation('PING', 'var(--cisco-blue)');
        }

        function runSecuritySimulation() {
            const terminal = document.getElementById('kernel-terminal');
            const btns = document.querySelectorAll('.controls .btn');
            btns.forEach(b => b.disabled = true);
            const lines = [
                { text: "root@linux-kernel:~# cat /etc/shadow", delay: 0 },
                { text: "[  Tetragon  ] Alert: Forbidden syscall openat() detected on sensitive path.", delay: 800, color: "var(--cisco-red)", bold: true },
                { text: "[  Tetragon  ] Action: Enforcement SIGKILL sent to PID 2048.", delay: 1500, color: "var(--cisco-red)", bold: true },
                { text: "Killed", delay: 1800, color: "#fff" }
            ];
            animateTerminal(lines, btns);
            sendPacketSimulation('BAD', 'var(--cisco-red)');
        }

        function runProfilingSimulation() {
            const terminal = document.getElementById('kernel-terminal');
            const btns = document.querySelectorAll('.controls .btn');
            btns.forEach(b => b.disabled = true);
            const lines = [
                { text: "root@linux-kernel:~# ./profiler -p scheduler", delay: 0 },
                { text: "[  Sched Profiler  ] Capturing scheduler latency...", delay: 600 },
                { text: "PID: 501  Comm: node      Runtime: 1.2 ms", delay: 1200, color: "#6CC24A" },
                { text: "PID: 120  Comm: systemd   Runtime: 0.4 ms", delay: 1600, color: "#6CC24A" },
                { text: "PID: 25   Comm: kworker   Runtime: 2.1 ms", delay: 2000, color: "var(--cisco-orange)" },
                { text: "Profiling complete. Results saved to Maps.", delay: 2500 }
            ];
            animateTerminal(lines, btns);
            sendPacketSimulation('TRACE', 'var(--cisco-green)');
        }

        function animateTerminal(lines, btns) {
            const terminal = document.getElementById('kernel-terminal');
            terminal.innerHTML = "";
            lines.forEach((line, index) => {
                setTimeout(() => {
                    const div = document.createElement('div');
                    div.className = 'terminal-line';
                    if (line.color) div.style.color = line.color;
                    if (line.bold) div.style.fontWeight = 'bold';
                    div.innerText = line.text;
                    terminal.appendChild(div);
                    terminal.scrollTop = terminal.scrollHeight;
                    if (index === lines.length - 1) {
                        const cursorLine = document.createElement('div');
                        cursorLine.className = 'terminal-line';
                        cursorLine.innerHTML = '<span class="terminal-prompt">root@linux-kernel:~#</span> <span class="terminal-cursor"></span>';
                        terminal.appendChild(cursorLine);
                        btns.forEach(b => b.disabled = false);
                    }
                }, line.delay);
            });
        }

        function resetTerminal() {
            const terminal = document.getElementById('kernel-terminal');
            terminal.innerHTML = '<div class="terminal-line"><span class="terminal-prompt">root@linux-kernel:~#</span> <span class="terminal-cursor"></span></div>';
            const btns = document.querySelectorAll('.controls .btn');
            btns.forEach(b => b.disabled = false);
        }

        function sendPacketSimulation(text, color) {
            const track = document.getElementById('packet-track');
            const packet = document.createElement('div');
            packet.className = 'packet';
            packet.style.backgroundColor = color;
            packet.style.color = 'white';
            packet.innerText = text;
            packet.style.left = '0%';
            track.appendChild(packet);

            setTimeout(() => { packet.style.left = '45%'; }, 50);
            setTimeout(() => {
                packet.style.transform = 'translateY(-50%) scale(1.4)';
                packet.style.boxShadow = `0 0 30px ${color}`;
                setTimeout(() => {
                    if (text === 'BAD') {
                        packet.style.top = '150%';
                        packet.style.opacity = '0';
                    } else {
                        packet.style.left = '100%';
                        packet.style.opacity = '0';
                    }
                    setTimeout(() => { packet.remove(); }, 800);
                }, 800);
            }, 1200);
        }
    </script>
</body>
</html>